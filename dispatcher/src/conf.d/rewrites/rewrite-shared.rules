#
# This file contains the rewrite rules, and can be customized.
#
# By default, it includes just the rewrite rules. You can
# add rewrite rules to this file but you should still include
# the default rewrite rules.
Include conf.d/rewrites/default_rewrite.rules

## rewrite rule(s)
RewriteEngine On

## bunch of business-related redirects
Include conf.d/rewrites/business.rules

### STATIC PASS-THROUGH ###
RewriteRule ^(/discover)?/serviceworker\.js$ /etc.clientlibs/dhl/clientlibs/clientlib-site/resources/sw.js [NC,PT,L]
RewriteRule ^(/discover)?/manifest\.json$ /etc.clientlibs/dhl/clientlibs/clientlib-site/resources/manifest.json [NC,PT,L]
#RewriteRule ^(/discover)?/google441cb6f8a8a3ae5b\.html$ /apps/dhl/discoverdhlapi/google/index.html [NC,PT,L]
RewriteRule ^(/discover)?/sureroute-test-object\.html$ /etc.clientlibs/dhl/clientlibs/clientlib-site/resources/data/akamai/sureroute-test-object.txt [NC,PT,L]
RewriteRule ^(/discover)?/sitemap\.xml$ /etc.clientlibs/dhl/clientlibs/clientlib-site/resources/data/sitemaps/20220203-englobal-sitemap.xml [NC,PT,L]
RewriteRule ^(/discover)?/robots\.txt$ /apps/dhl/discoverdhlapi/robots.txt [NC,PT,L]
RewriteRule ^(/discover)?/favicon\.ico$ /etc.clientlibs/dhl/clientlibs/clientlib-site/resources/favicon.ico [PT,L,NC]

### 301 Rewrite all URLs ending in '.html' to remove the extension
RewriteRule ^/discover/(.+)\.html$ https://%{CUSTOM_HOST}/discover/$1 [R=301,L]

### Default redirects to en-global homepage
RewriteRule ^/discover/?$ https://%{CUSTOM_HOST}/discover/en-global [R=301,L]
RewriteRule ^/discover/content/dhl/?$ https://%{CUSTOM_HOST}/discover/en-global [R=301,L]
RewriteRule ^/$ https://%{CUSTOM_HOST}/discover/en-global [R=301,L]

### DYNAMIC PASS-THROUGH TO AEM ###
# all assets in clientlibs or content/dam
RewriteRule ^/discover/(etc\.clientlibs|content/dam)/(.+)$ /$1/$2 [PT,L,NC]
# all html pages
RewriteRule ^/discover/(.+)$ /content/dhl/$1.html [PT,L,NC]
