{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/dev/Components/ArticleGrid.js","js/dev/Components/AuthenticationEvents.js","js/dev/Components/BackButton.js","js/dev/Components/BootstrapCarousel.js","js/dev/Components/CompetitionForm.js","js/dev/Components/Constants.js","js/dev/Components/CookieBanner.js","js/dev/Components/Database.js","js/dev/Components/DeleteAccountForm.js","js/dev/Components/EcomForms.js","js/dev/Components/FormValidation.js","js/dev/Components/Header.js","js/dev/Components/Hero.js","js/dev/Components/IEDetector.js","js/dev/Components/LandingPoints.js","js/dev/Components/LoginForm.js","js/dev/Components/Offline.js","js/dev/Components/Password.js","js/dev/Components/PasswordReminderForm.js","js/dev/Components/PasswordValidity.js","js/dev/Components/RegisterForm.js","js/dev/Components/SearchForm.js","js/dev/Components/ServiceWorker.js","js/dev/Components/ShipForm.js","js/dev/Components/ShipNowForm.js","js/dev/Components/ShipNowTwoStepForm.js","js/dev/Components/ShowHide.js","js/dev/Components/Social.js","js/dev/Components/SubscribePanel.js","js/dev/Components/Toast.js","js/dev/Components/YourAccountForm.js","js/dev/main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","ArticleGridApi","endpoint","pageSize","arguments","undefined","_classCallCheck","this","skip","doRequest","bind","search","loadMore","callback","_this","keyword","$","get","data","Items","ArticleGrid","loading","hasmore","sel","component","grid","template","nav","html","bindEvents","populateTemplates","init","showSpinner","hideSpinner","scrollnav","scrollleft","scrollright","checkScroll","pageScroll","window","on","document","wnd","elm","scrollTop","height","offset","top","outerHeight","preventDefault","each","index","item","is","show","parents","first","remove","addClass","removeClass","$scrollnav","querySelector","scrollWidth","clientWidth","after","self","animate","scrollLeft","before","scrollGap","scroll","items","output","$template","clone","desktopBreakpoint","panelId","Math","random","toString","substr","find","attr","IsLarge","IsVideo","href","Link","title","Title","Images","Mobile","innerHTML","Desktop","text","Description","Category","Name","TimeToRead","push","API","AuthenticationEvents","config","urlToken","urlCheck","urlRefreshCheck","urlDownloadAsset","readCookie","clearCookie","createCookie","checkLoginStatus","checkAuthTokens","showLoggedInElements","showNotLoggedInElements","evt","tokenData","skipElements","loggedInHeader","location","reload","name","nameEQ","ca","cookie","split","charAt","substring","indexOf","value","expirySeconds","expires","date","Date","setTime","getTime","toUTCString","authSplit","callTokenCheck","username","token","trigger","refreshCookie","refreshCookieSplit","refresh_token","url","_this2","csrfresponse","csrftoken","ajax","type","headers","CSRF-Token","dataType","success","response","status","ttl","_this3","hide","closest","full","gatingArticleElm1","tokenresponse","assetinfo","gatingArticleElm2","BackButton","backButton","forwardButton","showButton","goBack","goForward","initHeadroom","history","back","forward","Headroom","classes","initial","pinned","unpinned","notTop","bottom","notBottom","matchMedia","matches","navigator","standalone","BootstrapCarousel","link","checkNumberSlides","touchSwipeCarousel","$elm","isSwipe","swipe","event","direction","$carousel","target","carousel","tap","innerWidth","allowPageScroll","CompetitionForm","urlGetAllDetails","urlCompetition","validate","tryCompetitionEntryLoggedIn","tryCompetitionEntryNotLoggedIn","completeCompetitionEntryLoggedIn","competitionEntry","hasClass","rules","register__yourEmail","errorPlacement","error","element","insertAfter","parent","append","submitHandler","form","frm","answer","val","alert","firstname","lastname","email","position","contact","size","sector","path","trim","modal","allDetailsResponse","refreshSplit","refreshResponse","details","_this4","registration_firstname","registration_lastname","registration_email","registration_position","registration_contact","registration_size","registration_sector","IDB","DB","ARTICLES_STORE","CookieBanner","closeButton","cookieName","hideCookieBanner","showCookieBanner","displayBanner","Cookies","set","seen","_Constants","Database","database","initiateDb","addArticle","deleteArticle","getArticles","Promise","idb","open","_Constants2","default","upgradeDb","objectStoreNames","contains","articleOS","createObjectStore","keyPath","createIndex","unique","then","db","transaction","store","objectStore","all","delete","complete","description","categoryName","categoryLink","timeToRead","imageMobile","imageDesktop","isLarge","isVideo","cacheName","add","getAll","DeleteAccountForm","urlDeleteAccount","tryDeleteAccount","completeDeleteAccount","loggedIn","notLoggedIn","jQuery","validator","addMethod","RegExp","test","login__firstName","login__password","password","deleteAccountResponse","EcomForms","closeIcon","maxForm","minForm","submitForm","displayFormAfter","formTimer","showHideMaxForm","showHideMinForm","setTimeout","toggleClass","serialize","_PasswordValidity","FormValidation","addPasswordCheck","_PasswordValidity2","isPasswordValid","required","passwordCheck","Header","toggle","menu","overlay","searchForm","searchFormInput","searchFormSubmit","lastScrollTop","toggleMenu","toggleSearch","showSearch","hideSearch","bodyScrolling","wt","slideToggle","enabled","documentElement","style","overflow","body","windowHeight","screen","availHeight","focus","Hero","iframe","handleClick","videoId","getVideoID","ytUrl","id","replace","IEDetector","detectIE","version","ua","userAgent","msie","parseInt","rv","edge","LandingPoints","landingPointItem","clickableTitle","container","currentTarget","css","LoginForm","fbAppId","goClientId","urlLogin","buttonFacebook","buttonLinkedin","buttonGooglePlus","tryLoginFacebook","tryLoginLinkedin","tryLoginGoogle","tryLogin","executeLogin","fbAsyncInit","fb_interval","setInterval","FB","appId","xfbml","clearInterval","getElementById","fjs","getElementsByTagName","js","createElement","src","parentNode","insertBefore","googleButton","go_interval","gapi","load","auth2","client_id","cookiepolicy","attachClickHandler","googleUser","result","login__email","login","loginResponse","authResponse","api","dataResponse","fields","scope","return_scopes","IN","User","authorize","Profile","member","values","emailAddress","isAuthorized","getBasicProfile","getEmail","getId","unwaitCallback","_this5","backUrl","_Toast","_Database","SaveForOffline","articleCacheName","pathname","doSave","doUnsave","getHeroImages","isCurrentPageSaved","caches","keys","cacheNames","filter","$heroImage","images","desktopStyles","pathName","toast","_Toast2","_Database2","catch","setText","console","log","pageData","JSON","parse","pageResources","heroImages","concat","cache","uniqueResources","anchor","el","host","relative","inArray","addAll","message","OfflineArticles","editSavedArticles","articles","deletableArticle","saveForOffline","loadArticles","handleEdit","handleSwipe","article","swipedetect","$articlePanel","URL","swipedir","isDeletable","_this6","Offline","offlineArticles","checkStatus","doOnline","doOffline","onLine","removeAttr","addEventListener","Password","togglePlainText","passwordTarget","fieldId","field","PasswordReminderForm","urlRequest","urlReset","requestToken","resetPassword","reminderPage","resetPassword__email","reset__createPassword","reset__confirmPassword","page","nextTokenResponse","nextcsrftoken","PasswordValidityApi","checkCasing","checkSpecial","checkNumber","checkLength","isValid","isLengthValid","isCasingValid","isSpeicalValid","isNumberValid","PasswordValidity","passwordApi","passwordFieldId","passwordField","checkPasswordValidity","RegisterForm","urlRegister","urlUpdateCategories","tryRegisterFacebook","tryRegisterLinkedin","tryRegisterGoogle","tryRegister","executeRegister","register__email","register__password1","tryCategorySelection","first_name","last_name","islinkedin","tcagree","firstName","lastName","basicProfile","getGivenName","getFamilyName","dataLayer","categorySelection","includes","categories","cats","updateCategoriesResponse","SearchForm","clearButton","input","clearSearchForm","ServiceWorker","deferredPrompt","register","addToHomeScreen","serviceWorker","prompt","userChoice","choiceResult","outcome","createA2hsCookie","ShipForm","firstnameInput","firstnameQSP","lastnameInput","lastnameQSP","emailInput","emailQSP","userFirstnameElement","populateForm","ShipNowForm","countryselect","toggleAddress","getFormData","showSuccess","showError","country","label","$parent","options","mandatory","$form","formData","post","unindexedArray","serializeArray","indexedArray","map","source","ShipNowTwoStepForm","swingbutton","forms","form1","form2","submitFacebook","submitLinkedin","submitGoogle","submitForm1","nextForm","submitForm2","thanks","ShowHide","showHideTarget","Social","containerTop","handleScroll","checkSharePos","debounce","left","getLeftOffset","getTopOffset","parentOffset","func","wait","immediate","timeout","context","args","later","apply","callNow","clearTimeout","SubscribePanel","successOverlay","errorOverlay","Toast","duration","setDuration","setAttribute","inner","innerText","appendChild","$toast","urlUpdateDetails","tryUpdateDetails","completeUpdateDetails","$currentPasswordContainer","$newPassword","$confirmPassword","myAccount__currentPassword","myAccount__newPassword","myAccount__confirmPassword","formElement","newemail","newusername","newpassword","updateDetailsResponse","componentForm","registration_tcagree","prop","registration_cats","registration_islinkedin","_Header","_BootstrapCarousel","_ArticleGrid","_SubscribePanel","_Password","_FormValidation","_ShowHide","_CookieBanner","_SearchForm","_EcomForms","_ShipForm","_IEDetector","_Social","_Hero","_AuthenticationEvents","_DeleteAccountForm","_LoginForm","_PasswordReminderForm","_RegisterForm","_YourAccountForm","_ShipNowForm","_ShipNowTwoStepForm","_CompetitionForm","_ServiceWorker","_Offline","_LandingPoints","_BackButton","ready","createEvent","_IEDetector2","_Header2","_BootstrapCarousel2","_ArticleGrid2","_SubscribePanel2","_Password2","_ShowHide2","_CookieBanner2","_SearchForm2","_EcomForms2","_ShipForm2","_Social2","_Hero2","_CompetitionForm2","_ShipNowForm2","_ShipNowTwoStepForm2","_YourAccountForm2","_RegisterForm2","_PasswordReminderForm2","_LoginForm2","_DeleteAccountForm2","_AuthenticationEvents2","_ServiceWorker2","_Offline2","_LandingPoints2","_BackButton2"],"mappings":"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","file":"../main.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","class ArticleGridApi {\r\n  constructor(endpoint, pageSize = 6) {\r\n    this.endpoint = endpoint;\r\n    this.pageSize = pageSize;\r\n    this.skip = 0;\r\n\r\n    this.doRequest = this.doRequest.bind(this);\r\n    this.search = this.search.bind(this);\r\n    this.loadMore = this.loadMore.bind(this);\r\n  }\r\n\r\n  doRequest(callback, keyword = null) {\r\n    $.get(this.endpoint, {\r\n      skip: this.skip,\r\n      pageSize: this.pageSize,\r\n      keyword: keyword\r\n    }, (data) => {\r\n      this.skip += data.Items.length;\r\n      callback(data);\r\n    });\r\n  }\r\n\r\n  search(callback, keyword) {\r\n    this.skip = 0;\r\n    this.doRequest(callback, keyword);\r\n  }\r\n\r\n  loadMore(callback) {\r\n    this.doRequest(callback);\r\n  }\r\n}\r\n\r\nclass ArticleGrid {\r\n  constructor() {\r\n    this.loading = false;\r\n    this.hasmore = true;\r\n\r\n    this.sel = {\r\n      component: '.articleGrid',\r\n      grid: '.articleGrid__grid',\r\n      loadMore: '.articleGrid__loadMore',\r\n      template: '#articleGrid__panelTemplate',\r\n      nav: '.articleGrid__nav'\r\n    };\r\n    this.template = $($(this.sel.template).html());\r\n\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.loadMore = this.loadMore.bind(this);\r\n    this.populateTemplates = this.populateTemplates.bind(this);\r\n    this.init = this.init.bind(this);\r\n    this.showSpinner = this.showSpinner.bind(this);\r\n    this.hideSpinner = this.hideSpinner.bind(this);\r\n    this.scrollnav = this.scrollnav.bind(this);\r\n    this.scrollleft = this.scrollleft.bind(this);\r\n    this.scrollright = this.scrollright.bind(this);\r\n    this.checkScroll = this.checkScroll.bind(this);\r\n    this.pageScroll = this.pageScroll.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n    $(window).on('scroll', this.pageScroll);\r\n    $(document).on('click', this.sel.loadMore, this.loadMore);\r\n    $(document).on('click', '.scrollleft', this.scrollleft);\r\n    $(document).on('click', '.scrollright', this.scrollright);\r\n\r\n    this.pageScroll();\r\n  }\r\n\r\n  pageScroll() {\r\n    if (this.hasmore && (!this.loading)) {\r\n      var wnd = $(window);\r\n      var elm = $(this.sel.loadMore);\r\n\r\n      if (elm && ($(elm).length > 0)) {\r\n        var wst = wnd.scrollTop();\r\n        var wh = wnd.height();\r\n        var ot = elm.offset().top;\r\n        var oh = elm.outerHeight();\r\n\r\n        if ((wst + wh) > (ot + oh)) {\r\n          this.loadMore();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  loadMore(e) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    this.loading = true;\r\n    // Show the loading spinner\r\n    this.showSpinner();\r\n\r\n    var t = 0;\r\n    $(\".articleGrid__item\", this.sel.component).each((index, item) => {\r\n      if (t < 6 && (!$(item).is(\":visible\"))) {\r\n        $(item).show();\r\n        t++;\r\n      }\r\n    });\r\n\r\n    if ($(\".articleGrid__item\",this.sel.component).length === $(\".articleGrid__item:visible\",this.sel.component).length) {\r\n      $(this.sel.loadMore).parents(\".row\").first().remove();\r\n      this.hasmore = false;\r\n    }\r\n\r\n    // Hide the loading spinner\r\n    this.hideSpinner();\r\n    this.loading = false;\r\n  }\r\n\r\n  showSpinner() {\r\n    $(this.sel.loadMore).addClass('articleGrid__loadMore--loading');\r\n  }\r\n\r\n  hideSpinner() {\r\n    $(this.sel.loadMore).removeClass('articleGrid__loadMore--loading');\r\n  }\r\n\r\n  scrollnav() {\r\n    let $scrollnav = document.querySelector(this.sel.nav);\r\n    if ($scrollnav === null) return;\r\n    let scrollWidth = $scrollnav.scrollWidth;\r\n    let clientWidth = $scrollnav.clientWidth;\r\n    if (scrollWidth > clientWidth) {\r\n      $(this.sel.nav).after('<i class=\"scrollright\">></i>');\r\n    }\r\n  }\r\n  scrollright() {\r\n    let self = this.sel.nav;\r\n    let scrollWidth = document.querySelector(self).scrollWidth;\r\n    $(self).animate({\r\n      scrollLeft: scrollWidth + 'px'\r\n    }, 500, function () {\r\n      $('.scrollright').remove();\r\n      $(self).before('<i class=\"scrollleft\"><</i>');\r\n    });\r\n  }\r\n\r\n  scrollleft() {\r\n    let self = this.sel.nav;\r\n    $(self).animate({\r\n      scrollLeft: 0\r\n    }, 500, function () {\r\n      $('.scrollleft').remove();\r\n      $(self).after('<i class=\"scrollright\">></i>');\r\n    });\r\n  }\r\n\r\n  checkScroll() {\r\n    let $scrollnav = document.querySelector(this.sel.nav);\r\n    if ($scrollnav === null) return;\r\n    let scrollWidth = $scrollnav.scrollWidth;\r\n    let clientWidth = $scrollnav.clientWidth;\r\n    let scrollGap = scrollWidth - clientWidth;\r\n    $(self).scroll(function () {\r\n      if (this.scrollLeft === 0) {\r\n        $('.scrollleft').remove();\r\n        $(self).after('<i class=\"scrollright\">></i>');\r\n      }\r\n      if (this.scrollLeft >= scrollGap) {\r\n        $('.scrollright').remove();\r\n        $(self).before('<i class=\"scrollleft\"><</i>');\r\n      }\r\n    });\r\n  }\r\n\r\n  populateTemplates(items) {\r\n    let output = [];\r\n    for (let i = 0; i < items.length; i++) {\r\n      // Clone template\r\n      let $template = this.template.clone();\r\n      // Get the item\r\n      let item = items[i];\r\n      // Set image breakpoint\r\n      let desktopBreakpoint = 992;\r\n      // Generate ID\r\n      let panelId = Math.random().toString(36).substr(2, 9);\r\n      // Populate ID\r\n      $template.find('.articlePanel').attr('id', panelId);\r\n      // If large panel\r\n      if (item.IsLarge) {\r\n        // Update image breakpoint\r\n        desktopBreakpoint = 768;\r\n        // Add class\r\n        $template.find('.articlePanel').addClass('articlePanel--large');\r\n      }\r\n      // If video\r\n      if (item.IsVideo) {\r\n        // Add class\r\n        $template.find('.articlePanel').addClass('articlePanel--video');\r\n      }\r\n      // Populate images\r\n      $template.find('.articlePanel__image').attr({\r\n        href: item.Link,\r\n        title: item.Title\r\n      }).attr('style', 'background-image: url(' + item.Images.Mobile + ');');\r\n      $template.find('style')[0].innerHTML = '@media screen and (min-width: ' + desktopBreakpoint + 'px){#' + panelId + ' .articlePanel__image{background-image: url(' + item.Images.Desktop + ') !important;}}';\r\n      // Populate link\r\n      $template.find('.articlePanel__content > a').attr({\r\n        href: item.Link,\r\n        title: item.Title\r\n      });\r\n      // Populate title\r\n      $template.find('.articlePanel__title').text(item.Title);\r\n      // Populate description\r\n      $template.find('.articlePanel__description').text(item.Description);\r\n      // Populate category\r\n      $template.find('.articlePanel__subTitle a:first-child').attr({\r\n        'href': item.Category.Link,\r\n        'title': item.Category.Name\r\n      }).text(item.Category.Name);\r\n      // Populate time to read\r\n      $template.find('.articlePanel__subTitle a:last-child').attr({\r\n        'href': item.Link,\r\n        'title': item.Title\r\n      }).text(item.TimeToRead);\r\n      // Push item to output\r\n      output.push($template);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    let endpoint = $(this.sel.component).attr('data-endpoint');\r\n    this.API = new ArticleGridApi(endpoint);\r\n    this.scrollnav();\r\n    this.bindEvents();\r\n    this.checkScroll();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new ArticleGrid();\r\n","class AuthenticationEvents {\r\n  constructor() {\r\n    this.config = {\r\n      urlToken: '/libs/granite/csrf/token.json',\r\n      urlCheck: '/bin/dhl/check/index.json',\r\n      urlRefreshCheck: '/bin/dhl/refresh_token/index.json',\r\n      urlDownloadAsset: '/bin/dhl/download_asset/index.json'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n\r\n    this.readCookie = this.readCookie.bind(this);\r\n    this.clearCookie = this.clearCookie.bind(this);\r\n    this.createCookie = this.createCookie.bind(this);\r\n\r\n    this.checkLoginStatus = this.checkLoginStatus.bind(this);\r\n    this.checkAuthTokens = this.checkAuthTokens.bind(this);\r\n\r\n    this.showLoggedInElements = this.showLoggedInElements.bind(this);\r\n    this.showNotLoggedInElements = this.showNotLoggedInElements.bind(this);\r\n  }\r\n\r\n  init() {\r\n    $(window).on('checkauthtokens.DHL', (evt, tokenData, skipElements) => {\r\n      this.checkAuthTokens(tokenData, skipElements);\r\n    });\r\n    $(window).on('userloggedin.DHL', (evt, tokenData) => {\r\n      this.showLoggedInElements(tokenData);\r\n    });\r\n    $(window).on('usernotloggedin.DHL', () => {\r\n      this.showNotLoggedInElements();\r\n    });\r\n\r\n    // logged in header (logout link)\r\n    var loggedInHeader = $('.footer .footer__ctas--loggedin');\r\n    if (loggedInHeader.length > 0) {\r\n      loggedInHeader.on('click', '.logout-link', () => {\r\n        this.clearCookie('DHL.AuthToken');\r\n        this.clearCookie('DHL.RefreshToken');\r\n        location.reload();\r\n\r\n        return false;\r\n      });\r\n    }\r\n\r\n    this.checkLoginStatus();\r\n  }\r\n\r\n  readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\r\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  clearCookie(name) {\r\n    this.createCookie(name, '', -1);\r\n  }\r\n\r\n  createCookie(name, value, expirySeconds) {\r\n    var expires = '';\r\n    if (expirySeconds) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + (expirySeconds * 1000));\r\n      expires = '; expires=' + date.toUTCString();\r\n    }\r\n    document.cookie = name + '=' + value + expires + '; path=/';\r\n  }\r\n\r\n  checkLoginStatus() {\r\n    var cookie = this.readCookie('DHL.AuthToken');\r\n    if (cookie !== null) {\r\n      var authSplit = cookie.split('|');\r\n      if (authSplit.length >= 2) {\r\n        this.callTokenCheck(this.config.urlCheck, {\r\n          username: authSplit[0],\r\n          token: authSplit[1]\r\n        });\r\n      } else {\r\n        $(window).trigger('usernotloggedin.DHL');\r\n      }\r\n    } else {\r\n      var refreshCookie = this.readCookie('DHL.RefreshToken');\r\n      if (refreshCookie !== null) {\r\n        var refreshCookieSplit = refreshCookie.split('|');\r\n        if (refreshCookieSplit.length >= 2) {\r\n          this.callTokenCheck(this.config.urlRefreshCheck, {\r\n            username: refreshCookieSplit[0],\r\n            refresh_token: refreshCookieSplit[1]\r\n          });\r\n        } else {\r\n          $(window).trigger('usernotloggedin.DHL');\r\n        }\r\n      } else {\r\n        $(window).trigger('usernotloggedin.DHL');\r\n      }\r\n    }\r\n  }\r\n\r\n  callTokenCheck(url, data) {\r\n    $.get(this.config.urlToken, (csrfresponse) => {\r\n      var csrftoken = csrfresponse.token;\r\n\r\n      $.ajax({\r\n        url: url,\r\n        data: data,\r\n        type: 'post',\r\n        headers: { 'CSRF-Token': csrftoken },\r\n        dataType: 'json',\r\n        success: (response) => {\r\n          this.checkAuthTokens(response, false);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  checkAuthTokens(tokenData, skipElements) {\r\n    if (tokenData && tokenData.status && tokenData.status === 'ok') {\r\n      this.createCookie('DHL.AuthToken', tokenData.username + '|' + tokenData.token, tokenData.ttl);\r\n      this.createCookie('DHL.RefreshToken', tokenData.username + '|' + tokenData.refresh_token, (24 * 60 * 60));\r\n\r\n      if (skipElements !== true) {\r\n        $(window).trigger('userloggedin.DHL', tokenData);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    if (skipElements !== true) {\r\n      $(window).trigger('usernotloggedin.DHL');\r\n    }\r\n  }\r\n\r\n  showLoggedInElements(tokenData) {\r\n    $('.below-register-form .tab.mobile').hide();\r\n\r\n    $('.below-register-form #register-tab-1').hide();\r\n    $(\".below-register-form .tab-contents .tab-content[data-rel='#register-tab-1']\").removeClass('open');\r\n\r\n    $('.below-register-form #register-tab-2').addClass('active').show();\r\n    $(\".below-register-form .tab-contents .tab-content[data-rel='#register-tab-2']\").addClass('open');\r\n\r\n    $('.below-register-form').show();\r\n\r\n    $('header .header__desktopLinkItem.logged-in .user-firstname, header .header__primaryLinks .user-firstname').text(tokenData.name);\r\n    $('header .header__desktopLinkItem.logged-in, header .header__primaryLinks.logged-in').show();\r\n    $('.footer .logout-links').show();\r\n\r\n    $('.competitionDataCapture.logged-in').show();\r\n    $('.competitionDataCapture.logged-in .loggedin-name').text(tokenData.name);\r\n    $('.cta-third-panel-loggedin').show();\r\n\r\n    $('.gated').addClass('unlocked').removeClass('locked').each((index, item) => {\r\n      $(item).closest('body').find('.hero .hero__cta--grey').show();\r\n    });\r\n    $('.gated-hide').addClass('unlocked').removeClass('locked');\r\n\r\n    $('.articleGrid .article-grid-item-loggedin').show();\r\n\r\n    if (tokenData.full === false) {\r\n      $('.create-password').find('.create-password-name').text(tokenData.name);\r\n      $(window).trigger('show.CreatePasswordModal.DHL');\r\n    }\r\n\r\n    if ($('.reset-password-container').length > 0) {\r\n      window.location = '/content/dhl.html';\r\n    }\r\n    if ($('.page-body.register').length > 0) {\r\n      window.location = '/content/dhl/your-account.html';\r\n    }\r\n\r\n    if ($('.gatingArticle__actions.logged-in').length > 0) {\r\n      var gatingArticleElm1 = $('.gatingArticle__actions.logged-in');\r\n\r\n      $.get(this.config.urlToken, (tokenresponse) => {\r\n        var csrftoken = tokenresponse.token;\r\n        $.ajax({\r\n          url: this.config.urlDownloadAsset,\r\n          data: { assetinfo: gatingArticleElm1.data('assetinfo') },\r\n          type: 'post',\r\n          headers: { 'CSRF-Token': csrftoken },\r\n          dataType: 'json',\r\n          success: (response) => {\r\n            if (response.status === 'ok') {\r\n              gatingArticleElm1.find('.gatingArticle__button').attr('href', response.href);\r\n              gatingArticleElm1.show();\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if ($('#download .download__ctas.logged-in').length > 0) {\r\n      var gatingArticleElm2 = $('#download .download__ctas.logged-in');\r\n\r\n      $.get(this.config.urlToken, (tokenresponse) => {\r\n        var csrftoken = tokenresponse.token;\r\n        $.ajax({\r\n          url: this.config.urlDownloadAsset,\r\n          data: { assetinfo: gatingArticleElm2.data('assetinfo') },\r\n          type: 'post',\r\n          headers: { 'CSRF-Token': csrftoken },\r\n          dataType: 'json',\r\n          success: (response) => {\r\n            if (response.status === 'ok') {\r\n              gatingArticleElm2.find('.download__cta--red').attr('href', response.href);\r\n              gatingArticleElm2.show();\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  showNotLoggedInElements() {\r\n    $('.below-register-form .tab-container #register-tab-1').addClass('active').show();\r\n    $(\".below-register-form .tab-contents .tab-content[data-rel='#register-tab-1']\").addClass('open');\r\n\r\n    $('.below-register-form #register-tab-2').removeClass('active').show();\r\n    $(\".below-register-form .tab-contents .tab-content[data-rel='#register-tab-2']\").removeClass('open');\r\n\r\n    $('.below-register-form').show();\r\n\r\n    $('header .header__desktopLinkItem.logged-out, header .header__primaryLinks.logged-out').show();\r\n    $('.footer .login-links').show();\r\n\r\n    $('.gatingArticle__actions.no-logged-in').show();\r\n    $('#download .download__ctas.no-logged-in').show();\r\n    $('.competitionDataCapture.not-logged-in').show();\r\n    $('.article-page-login-cta').show();\r\n\r\n    $('.gated').addClass('locked').removeClass('unlocked').each((index, item) => {\r\n      $(item).closest('body').find('.hero .hero__cta--grey').hide();\r\n    });\r\n    $('.gated-hide').addClass('locked').removeClass('unlocked');\r\n\r\n    var newsletterCookie = this.readCookie('DHL.NewsletterSubscribed');\r\n    if (newsletterCookie !== null) {\r\n      $('.articleGrid .article-grid-item-loggedin').show();\r\n    } else {\r\n      $('.articleGrid .article-grid-item-subscribe').show();\r\n      $('.subscribePanel').show();\r\n    }\r\n  }\r\n}\r\n\r\nexport default new AuthenticationEvents();\r\n","class BackButton {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.backButton',\r\n      backButton: '.backButton__button--back',\r\n      forwardButton: '.backButton__button--forward'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.showButton = this.showButton.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.goBack = this.goBack.bind(this);\r\n    this.goForward = this.goForward.bind(this);\r\n    this.initHeadroom = this.initHeadroom.bind(this);\r\n  }\r\n\r\n  showButton() {\r\n    $(this.sel.component).addClass('backButton--show');\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.backButton, this.goBack);\r\n    $(document).on('click', this.sel.forwardButton, this.goForward);\r\n  }\r\n\r\n  goBack(e) {\r\n    e.preventDefault();\r\n    history.back(-1);\r\n  }\r\n\r\n  goForward(e) {\r\n    e.preventDefault();\r\n    history.forward();\r\n  }\r\n\r\n  initHeadroom() {\r\n    let component = $(this.sel.component)[0];\r\n    let headroom  = new Headroom(component, {\r\n      classes: {\r\n        initial: 'backButton',\r\n        pinned: 'backButton--pinned',\r\n        unpinned: 'backButton--unpinned',\r\n        top: 'backButton--top',\r\n        notTop: 'backButton--not-top',\r\n        bottom: 'backButton--bottom',\r\n        notBottom: 'backButton--not-bottom'\r\n      }\r\n    });\r\n    headroom.init();\r\n  }\r\n\r\n  init() {\r\n    let standalone = (window.matchMedia('(display-mode: standalone)').matches) || (window.navigator.standalone);\r\n    if (!standalone) return;\r\n    this.bindEvents();\r\n    this.showButton();\r\n    this.initHeadroom();\r\n  }\r\n}\r\n\r\nexport default new BackButton();\r\n","class BootstrapCarousel {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.carousel',\r\n      items: '.carousel-item',\r\n      link: '.categoryHero__link'\r\n    };\r\n    this.init = this.init.bind(this);\r\n    this.checkNumberSlides = this.checkNumberSlides.bind(this);\r\n    this.touchSwipeCarousel = this.touchSwipeCarousel.bind(this);\r\n  }\r\n\r\n  checkNumberSlides() {\r\n    $(this.sel.component).each((index, $elm) => {\r\n      if ($($elm).find(this.sel.items).length <= 1) {\r\n        $($elm).addClass('static');\r\n      }\r\n    });\r\n  }\r\n\r\n  touchSwipeCarousel() {\r\n    let isSwipe = false;\r\n    $(this.sel.component).swipe({\r\n      swipe: (event, direction) => {\r\n        let $carousel = ($(event.target).is(this.sel.component) ? $(event.target) : $(event.target).parents(this.sel.component));\r\n        isSwipe = true;\r\n        if (direction === 'left') {\r\n          $carousel.carousel('next');\r\n        } else if (direction === 'right') {\r\n          $carousel.carousel('prev');\r\n        }\r\n      },\r\n      tap: function (event) {\r\n        // target variable represents the clicked object\r\n        if ($('.categoryHero__link').length && window.innerWidth < 992) {\r\n          let href = $(event.target).parents('.categoryHero__link').first().attr('data-href');\r\n          if (href !== '') {\r\n            window.location = href;\r\n          }\r\n        }\r\n      },\r\n      allowPageScroll: 'vertical'\r\n    });\r\n\r\n    $(this.sel.link).on('click', function () {\r\n      if (!isSwipe) {\r\n        let href = $(this).attr('data-href');\r\n        if (href !== '') {\r\n          window.location = href;\r\n        }\r\n      }\r\n      isSwipe = false;\r\n    });\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.touchSwipeCarousel();\r\n    this.checkNumberSlides();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new BootstrapCarousel();\r\n","class CompetitionForm {\r\n  constructor() {\r\n    this.config = {\r\n      urlToken: '/libs/granite/csrf/token.json',\r\n      urlRefreshCheck: '/bin/dhl/refresh_token/index.json',\r\n      urlGetAllDetails: '/bin/dhl/getdetails/index.json',\r\n      urlCompetition: '/bin/dhl/competition/index.json'\r\n    };\r\n\r\n    this.sel = {\r\n      component: '.competitionDataCapture form'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.readCookie = this.readCookie.bind(this);\r\n    this.validate = this.validate.bind(this);\r\n\r\n    this.tryCompetitionEntryLoggedIn = this.tryCompetitionEntryLoggedIn.bind(this);\r\n    this.tryCompetitionEntryNotLoggedIn = this.tryCompetitionEntryNotLoggedIn.bind(this);\r\n    this.completeCompetitionEntryLoggedIn = this.completeCompetitionEntryLoggedIn.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n  }\r\n\r\n  readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\r\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    this.validate();\r\n    return true;\r\n  }\r\n\r\n  validate() {\r\n    var competitionEntry = $(this.sel.component);\r\n\r\n    if (competitionEntry.length > 0) {\r\n      competitionEntry.each((index, item) => {\r\n        if ($(item).closest('.competitionDataCapture').hasClass('not-logged-in')) {\r\n          $(item).validate({\r\n            rules: {\r\n              register__yourEmail: 'email'\r\n            },\r\n            errorPlacement: (error, element) => {\r\n              if (element.attr('type') === 'checkbox') {\r\n                error.insertAfter($(element).parent().find('label'));\r\n              } else if (element.attr('type') === 'password') {\r\n                $(element).append(error);\r\n                error.insertAfter($(element).parent());\r\n              } else if (element.attr('type') === 'search') {\r\n                error.insertAfter($(element).parent());\r\n              } else {\r\n                error.insertAfter($(element).parent());\r\n              }\r\n            },\r\n            submitHandler: (form) => {\r\n              this.tryCompetitionEntryNotLoggedIn(form);\r\n              return false;\r\n            }\r\n          });\r\n        } else {\r\n          $(item).validate({\r\n            errorPlacement: (error, element) => {\r\n              if (element.attr('type') === 'checkbox') {\r\n                error.insertAfter($(element).parent().find('label'));\r\n              } else if (element.attr('type') === 'password') {\r\n                $(element).append(error);\r\n                error.insertAfter($(element).parent());\r\n              } else if (element.attr('type') === 'search') {\r\n                error.insertAfter($(element).parent());\r\n              } else {\r\n                error.insertAfter($(element).parent());\r\n              }\r\n            },\r\n            submitHandler: (form) => {\r\n              this.tryCompetitionEntryLoggedIn(form);\r\n              return false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  tryCompetitionEntryNotLoggedIn(form) {\r\n    var frm = $(form);\r\n\r\n    var data = { };\r\n    if (frm.find('.comp-answer').length === 0) {\r\n      var answer = frm.find(\"input[type='radio']:checked\").val();\r\n      if (answer === null || answer.length === 0) {\r\n        alert('Please select an option');\r\n        return;\r\n      }\r\n\r\n      data = {\r\n        firstname: frm.find('input#register__firstName').val(),\r\n        lastname: frm.find('input#register__lastName').val(),\r\n        email: frm.find('input#register__yourEmail').val(),\r\n\r\n        position: frm.find('input#register__position').val(),\r\n        contact: frm.find('input#register__contactNumber').val(),\r\n        size: frm.find('select#register__businessSize').val(),\r\n        sector: frm.find('select#register__businessSector').val(),\r\n\r\n        path: frm.data('path'),\r\n        answer: answer\r\n      };\r\n    } else {\r\n      data = {\r\n        firstname: frm.find('input#register__firstName').val(),\r\n        lastname: frm.find('input#register__lastName').val(),\r\n        email: frm.find('input#register__yourEmail').val(),\r\n\r\n        position: frm.find('input#register__position').val(),\r\n        contact: frm.find('input#register__contactNumber').val(),\r\n        size: frm.find('select#register__businessSize').val(),\r\n        sector: frm.find('select#register__businessSector').val(),\r\n\r\n        path: frm.data('path')\r\n      };\r\n\r\n      frm.find('.comp-answer').each((index, item) => {\r\n        var val = $(item).val();\r\n        if ($(item).data('index') === 1) {\r\n          data.answer = val;\r\n        } else {\r\n          data['answer' + $(item).data('index')] = val;\r\n        }\r\n      });\r\n    }\r\n    if (($.trim(data.firstname).length === 0) || ($.trim(data.lastname).length === 0) || ($.trim(data.email).length === 0)) {\r\n      alert('Please enter your name, email address and competition details.');\r\n    } else {\r\n      frm.find(\"button[type='submit']\").text('please wait...');\r\n      frm.find(\"input[type='submit']\").val('please wait...');\r\n\r\n      $.get(this.config.urlToken, (tokenresponse) => {\r\n        var csrftoken = tokenresponse.token;\r\n\r\n        $.ajax({\r\n          url: this.config.urlCompetition,\r\n          data: data,\r\n          type: 'post',\r\n          headers: { 'CSRF-Token': csrftoken },\r\n          dataType: 'json',\r\n          success: (response) => {\r\n            if (response) {\r\n              if (response.status === 'ok') {\r\n                var modal = frm.closest('.competition-container').find('.modal');\r\n                modal.find('.thanks-name').text(data.firstname);\r\n                // modal.modal('show');\r\n                modal.show().addClass('show');\r\n\r\n                frm.closest('.competitionDataCapture').hide();\r\n              } else {\r\n                alert('An error occurred while attempting to enter the competition.\\n' + response.error);\r\n              }\r\n            } else {\r\n              alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n            }\r\n            frm.find(\"button[type='submit']\").text('Enter the competition');\r\n            frm.find(\"input[type='submit']\").val('Enter the competition');\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  tryCompetitionEntryLoggedIn(form) {\r\n    var frm = $(form);\r\n    frm.find(\"button[type='submit']\").text('please wait...');\r\n    frm.find(\"input[type='submit']\").val('please wait...');\r\n\r\n    var cookie = this.readCookie('DHL.AuthToken');\r\n    if (cookie !== null) {\r\n      var split = cookie.split('|');\r\n      if (split.length >= 2) {\r\n        $.get(this.config.urlToken, (tokenresponse) => {\r\n          var csrftoken = tokenresponse.token;\r\n          $.ajax({\r\n            url: this.config.urlGetAllDetails,\r\n            data: { username: split[0], token: split[1] },\r\n            type: 'post',\r\n            headers: { 'CSRF-Token': csrftoken },\r\n            dataType: 'json',\r\n            success: (allDetailsResponse) => {\r\n              if (allDetailsResponse) {\r\n                if (allDetailsResponse.status === 'ok') {\r\n                  this.completeCompetitionEntryLoggedIn(form, allDetailsResponse);\r\n                } else {\r\n                  alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n                }\r\n              } else {\r\n                alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n              }\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n      }\r\n    } else {\r\n      var refreshCookie = this.readCookie('DHL.RefreshToken');\r\n      if (refreshCookie !== null) {\r\n        var refreshSplit = refreshCookie.split('|');\r\n        if (refreshSplit.length >= 2) {\r\n          $.get(this.config.urlToken, (tokenresponse) => {\r\n            var csrftoken = tokenresponse.token;\r\n            $.ajax({\r\n              url: this.config.urlRefreshCheck,\r\n              data: { username: refreshSplit[0], refresh_token: refreshSplit[1] },\r\n              type: 'post',\r\n              headers: { 'CSRF-Token': csrftoken },\r\n              dataType: 'json',\r\n              success: (refreshResponse) => {\r\n                if (refreshResponse) {\r\n                  if (refreshResponse.status === 'ok') {\r\n                    $(window).trigger('checkauthtokens.DHL', [ refreshResponse, true ]);\r\n                    this.tryCompetitionEntryLoggedIn(form);\r\n                  } else {\r\n                    alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n                  }\r\n                } else {\r\n                  alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n                }\r\n              }\r\n            });\r\n          });\r\n        } else {\r\n          alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n        }\r\n      } else {\r\n        alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n      }\r\n    }\r\n  }\r\n\r\n  completeCompetitionEntryLoggedIn(form, details) {\r\n    var frm = $(form);\r\n\r\n    var answer = '';\r\n    if (frm.find('.comp-answer').length > 0) {\r\n      answer = frm.find('.comp-answer').val();\r\n    } else {\r\n      answer = frm.find(\"input[type='radio']:checked\").val();\r\n      if (answer === null || answer.length === 0) {\r\n        alert('Please select an option');\r\n        frm.find(\"button[type='submit']\").text('Enter the competition ' + details.registration_firstname);\r\n        frm.find(\"input[type='submit']\").val('Enter the competition ' + details.registration_firstname);\r\n        return;\r\n      }\r\n    }\r\n\r\n    var data = {\r\n      firstname: details.registration_firstname,\r\n      lastname: details.registration_lastname,\r\n      email: details.registration_email,\r\n\r\n      position: details.registration_position,\r\n      contact: details.registration_contact,\r\n      size: details.registration_size,\r\n      sector: details.registration_sector,\r\n\r\n      path: frm.data('path'),\r\n      answer: answer\r\n    };\r\n\r\n    if (($.trim(data.answer).length === 0) || ($.trim(data.firstname).length === 0) || ($.trim(data.lastname).length === 0) || ($.trim(data.email).length === 0)) {\r\n      alert('Please enter your name, email address and competition details.');\r\n    } else {\r\n      frm.find(\"button[type='submit']\").text('please wait...');\r\n      frm.find(\"input[type='submit']\").val('please wait...');\r\n\r\n      $.get(this.config.urlToken, (tokenresponse) => {\r\n        var csrftoken = tokenresponse.token;\r\n        $.ajax({\r\n          url: this.config.urlCompetition,\r\n          data: data,\r\n          type: 'post',\r\n          headers: { 'CSRF-Token': csrftoken },\r\n          dataType: 'json',\r\n          success: (response) => {\r\n            if (response) {\r\n              if (response.status === 'ok') {\r\n                var modal = frm.closest('.competition-container').find('.modal');\r\n                modal.find('.thanks-name').text(data.firstname);\r\n                // modal.modal('show');\r\n                modal.show().addClass('show');\r\n\r\n                frm.closest('.competitionDataCapture').hide();\r\n              } else {\r\n                alert('An error occurred while attempting to enter the competition.\\n' + response.error);\r\n              }\r\n            } else {\r\n              alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n            }\r\n            frm.find(\"button[type='submit']\").text('Enter the competition ' + data.firstname);\r\n            frm.find(\"input[type='submit']\").val('Enter the competition ' + data.firstname);\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    frm.find(\"button[type='submit']\").text('Enter the competition');\r\n    frm.find(\"input[type='submit']\").val('Enter the competition');\r\n  }\r\n}\r\n\r\nexport default new CompetitionForm();\r\n","export default {\r\n  IDB: {\r\n    DB: 'offline-articles',\r\n    ARTICLES_STORE: 'articles'\r\n  }\r\n};\r\n","class CookieBanner {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.cookie-banner',\r\n      closeButton: '.cookie-banner__button'\r\n    };\r\n\r\n    this.cookieName = 'dhl-cookie-warning';\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.hideCookieBanner = this.hideCookieBanner.bind(this);\r\n    this.showCookieBanner = this.showCookieBanner.bind(this);\r\n    this.displayBanner = this.displayBanner.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    this.displayBanner();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.closeButton, () => {\r\n      this.hideCookieBanner();\r\n      Cookies.set(this.cookieName, {seen: 1});\r\n    });\r\n  }\r\n\r\n  displayBanner() {\r\n    let cookie = Cookies.get(this.cookieName);\r\n\r\n    if (typeof cookie === 'undefined') {\r\n      this.showCookieBanner();\r\n    }\r\n  }\r\n\r\n  showCookieBanner() {\r\n    $(this.sel.component).addClass('cookie-banner--display');\r\n  }\r\n\r\n  hideCookieBanner() {\r\n    $(this.sel.component).removeClass('cookie-banner--display');\r\n    $(this.sel.component).remove();\r\n  }\r\n}\r\n\r\nexport default new CookieBanner();\r\n","import Constants from './Constants';\r\n\r\nclass Database {\r\n  constructor() {\r\n    this.database = null;\r\n\r\n    this.initiateDb = this.initiateDb.bind(this);\r\n    this.addArticle = this.addArticle.bind(this);\r\n    this.deleteArticle = this.deleteArticle.bind(this);\r\n    this.getArticles = this.getArticles.bind(this);\r\n\r\n    // Create/get DB\r\n    if (window.Promise) {\r\n      this.initiateDb();\r\n    }\r\n  }\r\n\r\n  initiateDb() {\r\n    this.database = idb.open(Constants.IDB.DB, 1, (upgradeDb) => {\r\n      if (!upgradeDb.objectStoreNames.contains(Constants.IDB.ARTICLES_STORE)) {\r\n        let articleOS = upgradeDb.createObjectStore(Constants.IDB.ARTICLES_STORE, {\r\n          keyPath: 'link'\r\n        });\r\n        articleOS.createIndex('title', 'title', {unique: false});\r\n        articleOS.createIndex('link', 'link', {unique: true});\r\n        articleOS.createIndex('description', 'description', {unique: false});\r\n        articleOS.createIndex('categoryName', 'categoryName', {unique: false});\r\n        articleOS.createIndex('categoryLink', 'categoryLink', {unique: false});\r\n        articleOS.createIndex('timeToRead', 'timeToRead', {unique: false});\r\n        articleOS.createIndex('imageMobile', 'imageMobile', {unique: false});\r\n        articleOS.createIndex('imageDesktop', 'imageDesktop', {unique: false});\r\n        articleOS.createIndex('isLarge', 'isLarge', {unique: false});\r\n        articleOS.createIndex('isVideo', 'isVideo', {unique: false});\r\n        articleOS.createIndex('cacheName', 'cacheName', {unique: false});\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteArticle(link) {\r\n    return this.database.then((db) => {\r\n      let transaction = db.transaction([Constants.IDB.ARTICLES_STORE], 'readwrite');\r\n      let store = transaction.objectStore(Constants.IDB.ARTICLES_STORE);\r\n      return Promise.all([\r\n        store.delete(link),\r\n        transaction.complete\r\n      ]);\r\n    });\r\n  }\r\n\r\n  addArticle(title, link, description, categoryName, categoryLink, timeToRead, imageMobile, imageDesktop, isLarge, isVideo, cacheName) {\r\n    return this.database.then((db) => {\r\n      let transaction = db.transaction([Constants.IDB.ARTICLES_STORE], 'readwrite');\r\n      let store = transaction.objectStore(Constants.IDB.ARTICLES_STORE);\r\n      return Promise.all([\r\n        store.add({\r\n          title,\r\n          link,\r\n          description,\r\n          categoryName,\r\n          categoryLink,\r\n          timeToRead,\r\n          imageMobile,\r\n          imageDesktop,\r\n          isLarge,\r\n          isVideo,\r\n          cacheName\r\n        }),\r\n        transaction.complete\r\n      ]);\r\n    });\r\n  }\r\n\r\n  getArticles() {\r\n    return this.database.then((db) => {\r\n      let transaction = db.transaction([Constants.IDB.ARTICLES_STORE], 'readonly');\r\n      let store = transaction.objectStore(Constants.IDB.ARTICLES_STORE);\r\n      return store.getAll();\r\n    });\r\n  }\r\n}\r\n\r\nexport default new Database();\r\n","class DeleteAccountForm {\r\n  constructor() {\r\n    this.config = {\r\n      urlToken: '/libs/granite/csrf/token.json',\r\n      urlRefreshCheck: '/bin/dhl/refresh_token/index.json',\r\n      urlGetAllDetails: '/bin/dhl/getdetails/index.json',\r\n      urlDeleteAccount: '/bin/dhl/deleteaccount/index.json'\r\n    };\r\n\r\n    this.sel = {\r\n      component: '.delete-account'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.readCookie = this.readCookie.bind(this);\r\n    this.clearCookie = this.clearCookie.bind(this);\r\n    this.createCookie = this.createCookie.bind(this);\r\n\r\n    this.tryDeleteAccount = this.tryDeleteAccount.bind(this);\r\n    this.completeDeleteAccount = this.completeDeleteAccount.bind(this);\r\n\r\n    this.loggedIn = this.loggedIn.bind(this);\r\n    this.notLoggedIn = this.notLoggedIn.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    jQuery.validator.addMethod('password', (value, element) => {\r\n      return new RegExp($(element).attr('pattern')).test(value);\r\n    }, 'Password format is not valid');\r\n\r\n    jQuery.validator.addMethod('equalTo', (value, element) => {\r\n      return ($('#' + $(element).attr('data-equalTo')).val() === $(element).val());\r\n    }, 'Passwords do not match');\r\n\r\n    $(window).on('userloggedin.DHL', (evt, tokenData) => {\r\n      this.loggedIn(tokenData);\r\n    });\r\n    $(window).on('usernotloggedin.DHL', () => {\r\n      this.notLoggedIn();\r\n    });\r\n\r\n    $(this.sel.component).find('form').validate({\r\n      rules: {\r\n        login__firstName: 'email',\r\n        login__password: 'password'\r\n      },\r\n      errorPlacement: (error, element) => {\r\n        if (element.attr('type') === 'checkbox') {\r\n          error.insertAfter($(element).parent().find('label'));\r\n        } else if (element.attr('type') === 'password') {\r\n          $(element).append(error);\r\n          error.insertAfter($(element).parent());\r\n        } else if (element.attr('type') === 'search') {\r\n          error.insertAfter($(element).parent());\r\n        } else {\r\n          error.insertAfter(element);\r\n        }\r\n      },\r\n      submitHandler: (form) => {\r\n        this.tryDeleteAccount(form);\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n\r\n  readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\r\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  clearCookie(name) {\r\n    this.createCookie(name, '', -1);\r\n  }\r\n\r\n  createCookie(name, value, expirySeconds) {\r\n    var expires = '';\r\n    if (expirySeconds) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + (expirySeconds * 1000));\r\n      expires = '; expires=' + date.toUTCString();\r\n    }\r\n    document.cookie = name + '=' + value + expires + '; path=/';\r\n  }\r\n\r\n  tryDeleteAccount(form) {\r\n    var frm = $(form);\r\n    frm.find(\"button[type='submit']\").text('please wait...');\r\n    frm.find('input.forms__cta--red').val('please wait...');\r\n\r\n    var cookie = this.readCookie('DHL.AuthToken');\r\n    if (cookie !== null) {\r\n      var split = cookie.split('|');\r\n      if (split.length >= 2) {\r\n        $.get(this.config.urlToken, (tokenresponse) => {\r\n          var csrftoken = tokenresponse.token;\r\n          $.ajax({\r\n            url: this.config.urlGetAllDetails,\r\n            data: { username: split[0], token: split[1] },\r\n            type: 'post',\r\n            headers: { 'CSRF-Token': csrftoken },\r\n            dataType: 'json',\r\n            success: (allDetailsResponse) => {\r\n              if (allDetailsResponse) {\r\n                if (allDetailsResponse.status === 'ok') {\r\n                  $(window).trigger('checkauthtokens.DHL', [ allDetailsResponse, true ]);\r\n                  this.completeDeleteAccount(form, allDetailsResponse);\r\n                } else {\r\n                  alert('An unknown error occurred while attempting to delete your account (1). Please try again later');\r\n                }\r\n              } else {\r\n                alert('An unknown error occurred while attempting to delete your account (2). Please try again later');\r\n              }\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        alert('An unknown error occurred while attempting to delete your account (3). Please try again later');\r\n      }\r\n    } else {\r\n      var refreshCookie = this.readCookie('DHL.RefreshToken');\r\n      if (refreshCookie !== null) {\r\n        var refreshSplit = refreshCookie.split('|');\r\n        if (refreshSplit.length >= 2) {\r\n          $.get(this.config.urlToken, (tokenresponse) => {\r\n            var csrftoken = tokenresponse.token;\r\n            $.ajax({\r\n              url: this.config.urlRefreshCheck,\r\n              data: { username: refreshSplit[0], refresh_token: refreshSplit[1] },\r\n              type: 'post',\r\n              headers: { 'CSRF-Token': csrftoken },\r\n              dataType: 'json',\r\n              success: (refreshResponse) => {\r\n                if (refreshResponse) {\r\n                  if (refreshResponse.status === 'ok') {\r\n                    $(window).trigger('checkauthtokens.DHL', [ refreshResponse, true ]);\r\n                    this.tryDeleteAccount(form);\r\n                  } else {\r\n                    alert('An unknown error occurred while attempting to delete your account (4). Please try again later');\r\n                  }\r\n                } else {\r\n                  alert('An unknown error occurred while attempting to delete your account (5). Please try again later');\r\n                }\r\n              }\r\n            });\r\n          });\r\n        } else {\r\n          alert('An unknown error occurred while attempting to delete your account (6). Please try again later');\r\n        }\r\n      } else {\r\n        alert('An unknown error occurred while attempting to delete your account. Please try again later');\r\n      }\r\n    }\r\n  }\r\n\r\n  completeDeleteAccount(form, details) {\r\n    var frm = $(form);\r\n\r\n    var data = {\r\n      token: details.token,\r\n\r\n      username: frm.find('input#login__firstName').val(),\r\n      password: frm.find('input#login__password').val()\r\n    };\r\n\r\n    if (($.trim(data.username).length == 0) || ($.trim(data.password).length == 0)) {\r\n      alert('Please enter your email address and password.');\r\n    } else {\r\n      frm.find(\"button[type='submit']\").text('please wait...');\r\n      frm.find('input.forms__cta--red').val('please wait...');\r\n\r\n      $.get(this.config.urlToken, (tokenresponse) => {\r\n        var csrftoken = tokenresponse.token;\r\n        $.ajax({\r\n          url: this.config.urlDeleteAccount,\r\n          data: data,\r\n          type: 'post',\r\n          headers: { 'CSRF-Token': csrftoken },\r\n          dataType: 'json',\r\n          success: (deleteAccountResponse) => {\r\n            if (deleteAccountResponse) {\r\n              $(window).trigger('checkauthtokens.DHL', [ deleteAccountResponse, true ]);\r\n\r\n              if (deleteAccountResponse.status === 'ok') {\r\n                this.clearCookie('DHL.AuthToken');\r\n                this.clearCookie('DHL.RefreshToken');\r\n\r\n                window.location = frm.data('successurl');\r\n              } else {\r\n                alert('An error occurred while attempting to delete your account.\\n' + deleteAccountResponse.error);\r\n              }\r\n            } else {\r\n              alert('An unknown error occurred while attempting to delete your account. Please try again later');\r\n            }\r\n            frm.find(\"button[type='submit']\").text('Delete Account');\r\n            frm.find('input.forms__cta--red').val('Delete Account');\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    frm.find(\"button[type='submit']\").text('Delete Account');\r\n    frm.find('input.forms__cta--red').val('Delete Account');\r\n  }\r\n\r\n  loggedIn(tokenData) {\r\n    if (tokenData && tokenData.status && tokenData.status === 'ok') {\r\n      $(this.sel.component).show();\r\n    }\r\n  }\r\n\r\n  notLoggedIn() {\r\n    if ($(this.sel.component).hasClass('no-redirect')) {\r\n      $(this.sel.component).show();\r\n    } else {\r\n      window.location = '/content/dhl.html';\r\n    }\r\n  }\r\n}\r\n\r\nexport default new DeleteAccountForm();\r\n","class EcomForms {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.ecom-form',\r\n      closeIcon: '.ecom-form__close',\r\n      maxForm: '.ecom-form--max',\r\n      minForm: '.ecom-form--min',\r\n      submitForm: '.ecom-form input[type=submit]'\r\n    };\r\n\r\n    this.displayFormAfter = 5000;\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.formTimer = this.formTimer.bind(this);\r\n    this.showHideMaxForm = this.showHideMaxForm.bind(this);\r\n    this.showHideMinForm = this.showHideMinForm.bind(this);\r\n    this.submitForm = this.submitForm.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    this.formTimer();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.closeIcon, () => {\r\n      this.showHideMaxForm();\r\n      this.showHideMinForm();\r\n    });\r\n\r\n    $(document).on('click', this.sel.submitForm, (e) => {\r\n      e.preventDefault();\r\n      let form = $(e.target).closest('form');\r\n      this.submitForm(form);\r\n    });\r\n  }\r\n\r\n  formTimer() {\r\n    setTimeout(() => {\r\n      this.showHideMaxForm();\r\n    }, this.displayFormAfter);\r\n  }\r\n\r\n  showHideMaxForm() {\r\n    $(this.sel.maxForm).toggleClass('is-hidden');\r\n  }\r\n\r\n  showHideMinForm() {\r\n    $(this.sel.minForm).toggleClass('is-shown');\r\n  }\r\n\r\n  submitForm(form) {\r\n    window.location.href = form.attr('action') + '?' + form.serialize();\r\n  }\r\n}\r\n\r\nexport default new EcomForms();\r\n","import PasswordValidity from './PasswordValidity';\r\n\r\nclass FormValidation {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.forms'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.validate = this.validate.bind(this);\r\n    this.addPasswordCheck = this.addPasswordCheck.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n\r\n    this.addPasswordCheck();\r\n    this.validate();\r\n    return true;\r\n  }\r\n\r\n  addPasswordCheck() {\r\n    $.validator.addMethod('passwordCheck', (value) => {\r\n      return PasswordValidity.isPasswordValid(value);\r\n    }, 'Please enter a valid password');\r\n  }\r\n\r\n  validate() {\r\n    $(this.sel.component).validate({\r\n      rules: {\r\n        'required': {\r\n          required: true\r\n        },\r\n        'password': {\r\n          passwordCheck: true\r\n        }\r\n      },\r\n      errorPlacement: (error, element) => {\r\n        if (element.attr('type') === 'checkbox') {\r\n          error.insertAfter($(element).parent().find('label'));\r\n        } else if (element.attr('type') === 'password') {\r\n          $(element).append(error);\r\n          error.insertAfter($(element).parent());\r\n        } else if (element.attr('type') === 'search') {\r\n          error.insertAfter($(element).parent());\r\n        } else {\r\n          error.insertAfter(element);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default new FormValidation();\r\n","class Header {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.header',\r\n      toggle: '.header__navigation',\r\n      menu: '.header__meganav',\r\n      overlay: '.header__overlay',\r\n      search: '.header__desktopSearch',\r\n      searchForm: '.header__desktopSearchForm',\r\n      searchFormInput: '.header__desktopSearchForm .header__searchInput',\r\n      searchFormSubmit: '.header__desktopSearchForm .header__searchButton'\r\n    };\r\n    this.lastScrollTop = 0;\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.toggleMenu = this.toggleMenu.bind(this);\r\n    this.toggleSearch = this.toggleSearch.bind(this);\r\n    this.showSearch = this.showSearch.bind(this);\r\n    this.hideSearch = this.hideSearch.bind(this);\r\n    this.bodyScrolling = this.bodyScrolling.bind(this);\r\n\r\n    this.checkScroll = this.checkScroll.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.toggle, (e) => {\r\n      e.preventDefault();\r\n      this.toggleMenu();\r\n    });\r\n    $(document).on('click', this.sel.overlay, this.toggleMenu);\r\n    $(document).on('click', this.sel.search, this.toggleSearch);\r\n    $(window).on('scroll', this.checkScroll);\r\n    this.checkScroll();\r\n  }\r\n\r\n  checkScroll() {\r\n    var wt = $(window).scrollTop();\r\n    var pb = $('.page-body').offset().top;\r\n    if (wt > pb) {\r\n      $('.page-body').addClass('fixed');\r\n      $(this.sel.component).addClass('fixed');\r\n      if (wt > this.lastScrollTop) {\r\n        $(this.sel.component).removeClass('in');\r\n      } else {\r\n        $(this.sel.component).addClass('in');\r\n      }\r\n    } else {\r\n      $('.page-body').removeClass('fixed');\r\n      $(this.sel.component).removeClass('fixed');\r\n    }\r\n\r\n    this.lastScrollTop = wt;\r\n  }\r\n\r\n  toggleMenu() {\r\n    if (!$(this.sel.menu).is(':visible')) {\r\n      this.bodyScrolling(false);\r\n      $(this.sel.toggle).addClass('header__navigation--open');\r\n    } else {\r\n      this.bodyScrolling(true);\r\n      $(this.sel.toggle).removeClass('header__navigation--open');\r\n    }\r\n    $(this.sel.menu).slideToggle(150);\r\n\r\n    if ($(this.sel.searchForm).hasClass('header__desktopSearchForm--open')) {\r\n      $(this.sel.searchForm).removeClass('header__desktopSearchForm--open');\r\n      setTimeout(() => {\r\n        $(this.sel.search).removeClass('header__desktopSearch--close');\r\n      }, 150);\r\n    }\r\n  }\r\n\r\n  bodyScrolling(enabled) {\r\n    if (enabled) {\r\n      $('body').removeClass('modal-open');\r\n      document.documentElement.style.height = 'auto';\r\n      document.documentElement.style.overflow = 'auto';\r\n      document.body.style.height = 'auto';\r\n    } else {\r\n      $('body').addClass('modal-open');\r\n      let windowHeight = window.screen.availHeight;\r\n      document.documentElement.style.overflow = 'hidden';\r\n      document.documentElement.style.height = windowHeight.toString() + 'px';\r\n      document.body.style.height = windowHeight.toString() + 'px';\r\n    }\r\n  }\r\n\r\n  toggleSearch(e) {\r\n    e.preventDefault();\r\n    if ($(this.sel.search).hasClass('header__desktopSearch--close')) {\r\n      this.hideSearch();\r\n    } else {\r\n      this.showSearch();\r\n    }\r\n  }\r\n\r\n  showSearch() {\r\n    $(this.sel.search).addClass('header__desktopSearch--close');\r\n    $(this.sel.searchForm).addClass('header__desktopSearchForm--open');\r\n    $(this.sel.searchFormInput).focus();\r\n\r\n    if ($(this.sel.toggle).hasClass('header__navigation--open')) {\r\n      this.bodyScrolling(true);\r\n      $(this.sel.toggle).removeClass('header__navigation--open');\r\n      $(this.sel.menu).slideToggle(150);\r\n    }\r\n  }\r\n\r\n  hideSearch() {\r\n    $(this.sel.searchForm).removeClass('header__desktopSearchForm--open');\r\n    setTimeout(() => {\r\n      $(this.sel.search).removeClass('header__desktopSearch--close');\r\n    }, 150);\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new Header();\r\n","class Hero {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.hero',\r\n      trigger: '.hero__playButton, .hero__cta--video',\r\n      iframe: '.hero .hero__video'\r\n    };\r\n\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.init = this.init.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.trigger, this.handleClick);\r\n  }\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    let videoId = this.getVideoID(e.target.href);\r\n    $(this.sel.iframe).attr('src', 'https://www.youtube.com/embed/' + videoId + '?rel=0&amp;showinfo=0&amp;autoplay=1').addClass('hero__video--open');\r\n  }\r\n\r\n  getVideoID(ytUrl) {\r\n    let id = '';\r\n    let url = ytUrl.replace(/(>|<)/gi, '').split(/(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\r\n    if (url[2] !== undefined) {\r\n      id = url[2].split(/[^0-9a-z_\\-]/i);\r\n      id = id[0];\r\n    } else {\r\n      id = url;\r\n    }\r\n    return id;\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new Hero();\r\n","class IEDetector {\r\n  constructor() {\r\n    this.sel = {\r\n      component: 'body'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.detectIE = this.detectIE.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    var version = this.detectIE();\r\n    if (version !== false) {\r\n      if (version >= 12) {\r\n        $(this.sel.component).addClass('ie-edge');\r\n      } else {\r\n        $(this.sel.component).addClass(`ie-${version}`);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  detectIE() {\r\n    var ua = window.navigator.userAgent;\r\n    // Test values; Uncomment to check result \r\n    // IE 10\r\n    // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\r\n    // IE 11\r\n    // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';    // Edge 12 (Spartan)\r\n    // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0'    // Edge 13\r\n    // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\r\n    var msie = ua.indexOf('MSIE ');\r\n    if (msie > 0) {\r\n      // IE 10 or older => return version number\r\n      return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n    }\r\n\r\n    var trident = ua.indexOf('Trident/');\r\n    if (trident > 0) {\r\n      // IE 11 => return version number\r\n      var rv = ua.indexOf('rv:');\r\n      return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n    }\r\n\r\n    var edge = ua.indexOf('Edge/');\r\n    if (edge > 0) {\r\n      // Edge (IE 12+) => return version number\r\n      return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n    }\r\n\r\n    // other browser\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default new IEDetector();\r\n","class LandingPoints {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.landingpoints',\r\n      landingPointItem: '.landingpoints .landingpoint',\r\n      clickableTitle: '.landingpoints .landingpoint__title a'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.clickableTitle, (evt) => {\r\n      var container = $(evt.currentTarget).closest(this.sel.landingPointItem);\r\n      if (container.hasClass('open')) {\r\n        container.find('.landingpoint__content').css({ height: 0 });\r\n        container.removeClass('open');\r\n      } else {\r\n        $(evt.currentTarget).closest(this.sel.component).find('.landingpoint.open .landingpoint__content').css({ height: 0 });\r\n        $(evt.currentTarget).closest(this.sel.component).find('.landingpoint').removeClass('open');\r\n        container.addClass('open');\r\n        container.find('.landingpoint__content').css({ height: container.find('.landingpoint__content p').outerHeight() });\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n}\r\n\r\nexport default new LandingPoints();\r\n\r\n","class LoginForm {\r\n  constructor() {\r\n    this.config = {\r\n      // fbAppId: '1000773163337798',\r\n      fbAppId: '1080031328801211',\r\n      // goClientId: '913960352236-u7un0l22tvkmlbpa5bcnf1uqg4csi7e3.apps.googleusercontent.com',\r\n      goClientId: '313469837420-l882h39ge8n8n9pb97ldvjk3fm8ppqgs.apps.googleusercontent.com',\r\n\r\n      urlToken: '/libs/granite/csrf/token.json',\r\n      urlLogin: '/bin/dhl/login/index.json'\r\n    };\r\n\r\n    this.sel = {\r\n      component: '.page-body.login form.forms',\r\n      buttonFacebook: '.forms__cta--social.fb',\r\n      buttonLinkedin: '.forms__cta--social.li',\r\n      buttonGooglePlus: '.forms__cta--social.go'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n\r\n    this.tryLoginFacebook = this.tryLoginFacebook.bind(this);\r\n    this.tryLoginLinkedin = this.tryLoginLinkedin.bind(this);\r\n    this.tryLoginGoogle = this.tryLoginGoogle.bind(this);\r\n    this.tryLogin = this.tryLogin.bind(this);\r\n\r\n    this.executeLogin = this.executeLogin.bind(this);\r\n\r\n    this.loggedIn = this.loggedIn.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(window).on('userloggedin.DHL', () => {\r\n      this.loggedIn();\r\n    });\r\n\r\n    jQuery.validator.addMethod('password', (value, element) => {\r\n      return new RegExp($(element).attr('pattern')).test(value);\r\n    }, 'Password format is not valid');\r\n\r\n    jQuery.validator.addMethod('equalTo', (value, element) => {\r\n      return ($('#' + $(element).attr('data-equalTo')).val() === $(element).val());\r\n    }, 'Passwords do not match');\r\n\r\n    if ($(this.sel.component).find(this.sel.buttonFacebook).length > 0) {\r\n      window.fbAsyncInit = () => {\r\n        window.fb_interval = setInterval(() => {\r\n          if (typeof (window.FB) !== 'undefined' && window.FB !== null) {\r\n            window.FB.init({\r\n              appId: this.config.fbAppId,\r\n              cookie: true,\r\n              xfbml: true,\r\n              version: 'v2.8'\r\n            });\r\n\r\n            clearInterval(window.fb_interval);\r\n          }\r\n        }, 100);\r\n      };\r\n\r\n      if (document.getElementById('facebook-jssdk') === null) {\r\n        var fjs = document.getElementsByTagName('script')[0];\r\n        var js = document.createElement('script');\r\n        js.id = 'facebook-jssdk';\r\n        js.src = '//connect.facebook.net/en_EN/sdk.js';\r\n        fjs.parentNode.insertBefore(js, fjs);\r\n      }\r\n      $(this.sel.component).find(this.sel.buttonFacebook).on('click', (evt) => {\r\n        this.tryLoginFacebook(evt);\r\n        return false;\r\n      });\r\n    }\r\n\r\n    if ($(this.sel.component).find(this.sel.buttonLinkedin).length > 0) {\r\n      $(this.sel.component).find(this.sel.buttonLinkedin).on('click', (evt) => {\r\n        this.tryLoginLinkedin(evt);\r\n        return false;\r\n      });\r\n    }\r\n\r\n    var googleButton = $(this.sel.component).find(this.sel.buttonGooglePlus);\r\n    if (googleButton.length > 0) {\r\n      window.go_interval = setInterval(() => {\r\n        if (typeof (window.gapi) !== 'undefined' && window.gapi !== null) {\r\n          window.gapi.load('auth2', () => {\r\n            var auth2 = window.gapi.auth2.init({\r\n              client_id: this.config.goClientId,\r\n              cookiepolicy: 'single_host_origin'\r\n            });\r\n\r\n            var element = googleButton.get(0);\r\n            auth2.attachClickHandler(element, {},\r\n              (googleUser) => {\r\n                this.tryLoginGoogle(googleUser);\r\n                return false;\r\n              },\r\n              (result) => {\r\n                if (result.error !== 'popup_closed_by_user') {\r\n                  alert(result.error);\r\n                }\r\n              }\r\n            );\r\n          });\r\n\r\n          clearInterval(window.go_interval);\r\n        }\r\n      }, 100);\r\n\r\n      $(this.sel.component).find(this.sel.buttonGooglePlus).on('click', (evt) => {\r\n        evt.preventDefault();\r\n        return false;\r\n      });\r\n    }\r\n\r\n    $(this.sel.component).validate({\r\n      rules: {\r\n        login__email: 'email',\r\n        login__password: 'password'\r\n      },\r\n      errorPlacement: (error, element) => {\r\n        if (element.attr('type') === 'checkbox') {\r\n          error.insertAfter($(element).parent().find('label'));\r\n        } else if (element.attr('type') === 'password') {\r\n          $(element).append(error);\r\n          error.insertAfter($(element).parent());\r\n        } else if (element.attr('type') === 'search') {\r\n          error.insertAfter($(element).parent());\r\n        } else {\r\n          error.insertAfter(element);\r\n        }\r\n      },\r\n      submitHandler: (form) => {\r\n        this.tryLogin(form);\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n\r\n  tryLoginFacebook(evt) {\r\n    evt.preventDefault();\r\n\r\n    $(this.sel.component).find(this.sel.buttonFacebook).text('please wait...');\r\n\r\n    window.FB.login((loginResponse) => {\r\n      if (loginResponse.authResponse) {\r\n        window.FB.api('/me', (dataResponse) => {\r\n          var data = {\r\n            username: dataResponse.email,\r\n            password: dataResponse.id\r\n          };\r\n\r\n          this.executeLogin(data, () => {\r\n            $(this.sel.component).find(this.sel.buttonFacebook).text('Facebook');\r\n          });\r\n        }, { fields: [ 'id', 'email' ]});\r\n      }\r\n      return false;\r\n    }, { scope: 'email,public_profile', return_scopes: true });\r\n  }\r\n\r\n  tryLoginLinkedin(evt) {\r\n    evt.preventDefault();\r\n\r\n    $(this.sel.component).find(this.sel.buttonLinkedin).text('please wait...');\r\n\r\n    IN.User.authorize(() => {\r\n      IN.API.Profile('me').fields('id', 'first-name', 'last-name', 'email-address').result((result) => {\r\n        var member = result.values[0];\r\n\r\n        var data = {\r\n          username: member.emailAddress,\r\n          password: member.id\r\n        };\r\n\r\n        this.executeLogin(data, () => {\r\n          $(this.sel.component).find(this.sel.buttonLinkedin).text('LinkedIn');\r\n        });\r\n      });\r\n    });\r\n\r\n    setInterval(() => {\r\n      var result = window.IN.User.isAuthorized();\r\n      if (result) {\r\n        IN.API.Profile('me').fields('id', 'first-name', 'last-name', 'email-address').result((result) => {\r\n          var member = result.values[0];\r\n  \r\n          var data = {\r\n            username: member.emailAddress,\r\n            password: member.id\r\n          };\r\n  \r\n          this.executeLogin(data, () => {\r\n            $(this.sel.component).find(this.sel.buttonLinkedin).text('LinkedIn');\r\n          });\r\n        });\r\n      }\r\n    }, 1000);\r\n\r\n\r\n    return false;\r\n  }\r\n\r\n  tryLoginGoogle(googleUser) {\r\n    var data = {\r\n      username: googleUser.getBasicProfile().getEmail(),\r\n      password: googleUser.getBasicProfile().getId()\r\n    };\r\n\r\n    $(this.sel.component).find(this.sel.buttonGooglePlus).text('please wait...');\r\n    this.executeLogin(data, () => {\r\n      $(this.sel.component).find(this.sel.buttonGooglePlus).text('Google+');\r\n    });\r\n  }\r\n\r\n  tryLogin(form) {\r\n    var frm = $(form);\r\n    var username = frm.find('input#login__email').val();\r\n    var password = frm.find('input#login__password').val();\r\n\r\n    if (($.trim(username).length === 0) || ($.trim(password).length === 0)) {\r\n      alert('Please enter your email address and password');\r\n    } else {\r\n      frm.find(\"button[type='submit']\").text('please wait...');\r\n      frm.find('input.forms__cta--red').val('please wait...');\r\n\r\n      this.executeLogin({ username: username, password: password }, () => {\r\n        frm.find(\"button[type='submit']\").text('Log In');\r\n        frm.find('input.forms__cta--red').val('Login');\r\n      });\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  executeLogin(data, unwaitCallback) {\r\n    $.get(this.config.urlToken, (tokenresponse) => {\r\n      var csrftoken = tokenresponse.token;\r\n\r\n      $.ajax({\r\n        url: this.config.urlLogin,\r\n        data: data,\r\n        type: 'post',\r\n        headers: { 'CSRF-Token': csrftoken },\r\n        dataType: 'json',\r\n        success: (response) => {\r\n          if (response) {\r\n            if (response.status === 'ok') {\r\n              $(window).trigger('checkauthtokens.DHL', [ response, true ]);\r\n\r\n              var backUrl = $(this.sel.component).data('back');\r\n              if ($.trim(backUrl).length === 0) {\r\n                backUrl = '/content/dhl.html';\r\n              }\r\n              window.location = backUrl;\r\n            } else {\r\n              alert('An error occurred while attempting to register.\\n' + response.error);\r\n            }\r\n          } else {\r\n            alert('An unknown error occurred while attempting to register. Please try again later.');\r\n          }\r\n          unwaitCallback();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  loggedIn() {\r\n    window.location = '/content/dhl/your-account.html';\r\n  }\r\n}\r\n\r\nexport default new LoginForm();\r\n","import Toast from './Toast';\r\nimport Database from './Database';\r\n\r\nclass SaveForOffline {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.hero__saveForOffline'\r\n    };\r\n    // Create article cache name\r\n    this.articleCacheName = 'offline-' + window.location.pathname;\r\n\r\n    this.init = this.init.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.doSave = this.doSave.bind(this);\r\n    this.doUnsave = this.doUnsave.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.getHeroImages = this.getHeroImages.bind(this);\r\n    this.isCurrentPageSaved = this.isCurrentPageSaved.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.component, this.handleClick);\r\n  }\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    if ($(this.sel.component).hasClass('hero__saveForOffline--saved')) {\r\n      this.doUnsave();\r\n    } else {\r\n      this.doSave();\r\n    }\r\n  }\r\n\r\n  isCurrentPageSaved() {\r\n    // Check if already saved\r\n    caches.keys().then((cacheNames) => { // Get array of cache names\r\n      return Promise.all(\r\n        cacheNames.filter((cacheName) => { // Filter array\r\n          return (cacheName === this.articleCacheName); // If matches current pathname\r\n        })\r\n      );\r\n    }).then((cacheNames) => { // Once got filtered array\r\n      if (cacheNames.length > 0) { // If there are caches\r\n        $(this.sel.component).addClass('hero__saveForOffline--saved').attr('title', 'Article Saved').find('span').text('Article Saved');\r\n      }\r\n    });\r\n  }\r\n\r\n  getHeroImages() {\r\n    // Get the hero image element\r\n    let $heroImage = $('.hero__image');\r\n    // If it exists\r\n    if ($heroImage.length > 0) {\r\n      // Create array for images\r\n      let images = [];\r\n      // Add the mobile image URL\r\n      images.push(\r\n        $heroImage.css('background-image').split('url(')[1].split(')')[0].replace(/\"/g, '').replace(/'/g, '')\r\n      );\r\n      // Get the desktop image URL\r\n      let desktopStyles = $heroImage.parents('.hero').find('style').html().split('url(')[1].split(')')[0].replace(/\"/g, '').replace(/'/g, '');\r\n      // Add the desktop image to the array\r\n      images.push(desktopStyles);\r\n      // Return the images\r\n      return images;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  doUnsave(pathName = window.location.pathname) {\r\n    let toast = new Toast('Article has been removed', 3000);\r\n    // Remove article from IDB\r\n    return Database.deleteArticle(pathName).then(() => {// Deleted from IDB successfully\r\n      // Remove article content\r\n      caches.delete('offline-' + pathName).then(() => {\r\n        $(this.sel.component).removeClass('hero__saveForOffline--saved').attr('title', 'Save Article').find('span').text('Save Article');\r\n        toast.show();\r\n      });\r\n    }).catch(() => {// There was an error deleting from IDB\r\n      toast.setText('There was a problem deleting the article');\r\n      toast.show();\r\n    });\r\n  }\r\n\r\n  doSave() {\r\n    // Create toast for confirmation\r\n    let toast = new Toast('Article is now available offline', 3000);\r\n\r\n    if ($('#articleData').length <= 0) {\r\n      console.log('SW ERROR: Offline.js:90');\r\n      toast.setText('Article could not be saved for offline');\r\n      toast.show();\r\n      return false;\r\n    }\r\n    // Get page data for IDB\r\n    let pageData = JSON.parse($('#articleData').html());\r\n\r\n    // Add article to IDB\r\n    Database.addArticle(\r\n      pageData.title,\r\n      window.location.pathname,\r\n      pageData.description,\r\n      pageData.categoryName,\r\n      pageData.categoryLink,\r\n      pageData.timeToRead,\r\n      pageData.imageMobile,\r\n      pageData.imageDesktop,\r\n      pageData.isLarge,\r\n      pageData.isVideo,\r\n      this.articleCacheName\r\n    ).then(() => {// Saved in IDB successfully\r\n      // Build an array of the page-specific resources.\r\n      let pageResources = [window.location.pathname, pageData.imageMobile, pageData.imageDesktop];\r\n\r\n      // Add the hero images\r\n      if ($('.hero__image').length > 0) {\r\n        let heroImages = this.getHeroImages();\r\n        if (heroImages) pageResources = pageResources.concat(heroImages);\r\n      }\r\n\r\n      // Add images to the array\r\n      $('.page-body .wysiwyg img, .authorPanel img').each((index, element) => {\r\n        // Trim whitespace form src\r\n        let imgSrc = $.trim($(element).attr('src'));\r\n        // If empty src skip this image\r\n        if (!(imgSrc === '')) {\r\n          // Add to page resources\r\n          pageResources.push($(element).attr('src'));\r\n        }\r\n      });\r\n\r\n      // Open the unique cache for this URL\r\n      caches.open(this.articleCacheName).then((cache) => {\r\n        // Unique URLs\r\n        let uniqueResources = [];\r\n        // Create anchor element to get full URLs\r\n        let anchor = document.createElement('a');\r\n        // Dedupe assets\r\n        $.each(pageResources, (i, el) => {\r\n          // Load the current URL into the anchor\r\n          anchor.href = el;\r\n          // Only cache URLs on our domain\r\n          if (anchor.host !== window.location.host) return;\r\n          // Get the relative path\r\n          let relative = anchor.pathname + anchor.search;\r\n          // If already in list of assets, don't include it again\r\n          if ($.inArray(relative, uniqueResources) === -1) uniqueResources.push(relative);\r\n        });\r\n        // Cache all required assets\r\n        let updateCache = cache.addAll(uniqueResources);\r\n        // Update UI to indicate success\r\n        // Or catch any errors if it doesn't succeed\r\n        updateCache.then(() => {\r\n          // console.log('Article is now available offline.');\r\n          $(this.sel.component).addClass('hero__saveForOffline--saved').attr('title', 'Saved for offline').find('span').text('Article Saved');\r\n        }).catch((error) => {\r\n          console.log(error.message);\r\n          // console.log('Article could not be saved for offline.', error);\r\n          toast.setText('Article could not be saved for offline');\r\n        }).then(() => {\r\n          toast.show();\r\n        });\r\n      });\r\n    }).catch((error) => {// There was an error saving to IDB\r\n      console.log(error.message);\r\n      toast.setText('Article could not be saved for offline');\r\n      toast.show();\r\n    });\r\n    return true;\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.isCurrentPageSaved();\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n}\r\n\r\nclass OfflineArticles {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.articleGrid--saved',\r\n      grid: '.articleGrid--saved .articleGrid__grid',\r\n      title: '.articleGrid--saved .articleGrid__title',\r\n      template: '#articleGrid__panelTemplate',\r\n      editSavedArticles: '.hero__editSavedArticles',\r\n      articles: '.articleGrid--saved .articleGrid__grid .articlePanel',\r\n      deletableArticle: '.articleGrid--saved .articleGrid__grid .articlePanel--deletable'\r\n    };\r\n    this.saveForOffline = new SaveForOffline();\r\n    this.template = $($(this.sel.template).html());\r\n\r\n    this.init = this.init.bind(this);\r\n    this.loadArticles = this.loadArticles.bind(this);\r\n    this.populateTemplates = this.populateTemplates.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.handleEdit = this.handleEdit.bind(this);\r\n    this.deleteArticle = this.deleteArticle.bind(this);\r\n    this.handleSwipe = this.handleSwipe.bind(this);\r\n  }\r\n\r\n  loadArticles() {\r\n    return Database.getArticles().then((articles) => {\r\n      let items = [];\r\n      for (var i = 0; i < articles.length; i++) {\r\n        let article = articles[i];\r\n        items.push({\r\n          Link: article.link,\r\n          Title: article.title,\r\n          Description: article.description,\r\n          Category: {\r\n            Name: article.categoryName,\r\n            Link: article.categoryLink\r\n          },\r\n          TimeToRead: article.timeToRead,\r\n          Images: {\r\n            Mobile: article.imageMobile,\r\n            Desktop: article.imageDesktop\r\n          },\r\n          IsLarge: article.isLarge,\r\n          IsVideo: article.isVideo\r\n        });\r\n      }\r\n      if (items.length > 0) {\r\n        $(this.sel.grid).html(this.populateTemplates(items));\r\n      } else {\r\n        $(this.sel.title).text('You have no saved articles');\r\n      }\r\n    });\r\n  }\r\n\r\n  populateTemplates(items) {\r\n    let output = [];\r\n    for (let i = 0; i < items.length; i++) {\r\n      // Clone template\r\n      let $template = this.template.clone();\r\n      // Get the item\r\n      let item = items[i];\r\n      // Set image breakpoint\r\n      let desktopBreakpoint = 992;\r\n      // Generate ID\r\n      let panelId = Math.random().toString(36).substr(2, 9);\r\n      // Populate ID\r\n      $template.find('.articlePanel').attr('id', panelId);\r\n      // If large panel\r\n      if (item.IsLarge) {\r\n        // Update image breakpoint\r\n        desktopBreakpoint = 768;\r\n        // Add class\r\n        $template.find('.articlePanel').addClass('articlePanel--large');\r\n      }\r\n      // If video\r\n      if (item.IsVideo) {\r\n        // Add class\r\n        $template.find('.articlePanel').addClass('articlePanel--video');\r\n      }\r\n      // Populate images\r\n      $template.find('.articlePanel__image').attr({\r\n        href: item.Link,\r\n        title: item.Title\r\n      }).attr('style', 'background-image: url(' + item.Images.Mobile + ');');\r\n      $template.find('style')[0].innerHTML = '@media screen and (min-width: ' + desktopBreakpoint + 'px){#' + panelId + ' .articlePanel__image{background-image: url(' + item.Images.Desktop + ') !important;}}';\r\n      // Populate link\r\n      $template.find('.articlePanel__content > a').attr({\r\n        href: item.Link,\r\n        title: item.Title\r\n      });\r\n      // Populate title\r\n      $template.find('.articlePanel__title').text(item.Title);\r\n      // Populate description\r\n      $template.find('.articlePanel__description').text(item.Description);\r\n      // Populate category\r\n      $template.find('.articlePanel__subTitle a:first-child').attr({\r\n        'href': item.Category.Link,\r\n        'title': item.Category.Name\r\n      }).text(item.Category.Name);\r\n      // Populate time to read\r\n      $template.find('.articlePanel__subTitle a:last-child').attr({\r\n        'href': item.Link,\r\n        'title': item.Title\r\n      }).text(item.TimeToRead);\r\n      // Push item to output\r\n      output.push($template);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.editSavedArticles, this.handleEdit);\r\n    $(document).on('click', this.sel.deletableArticle, this.deleteArticle);\r\n    $(this.sel.articles).swipedetect(this.handleSwipe);\r\n  }\r\n\r\n  handleEdit(e) {\r\n    e.preventDefault();\r\n    $(this.sel.editSavedArticles).toggleClass('hero__editSavedArticles--editing');\r\n    if ($(this.sel.editSavedArticles).hasClass('hero__editSavedArticles--editing')) {\r\n      $(this.sel.grid).find('.articlePanel').addClass('articlePanel--deletable');\r\n    } else {\r\n      $(this.sel.grid).find('.articlePanel').removeClass('articlePanel--deletable');\r\n    }\r\n  }\r\n\r\n  deleteArticle(e) {\r\n    e.preventDefault();\r\n    let $articlePanel = $(e.target).parents('.articlePanel');\r\n    let url = new URL($articlePanel.find('.articlePanel__image')[0].href);\r\n    this.saveForOffline.doUnsave(url.pathname).then(() => {\r\n      $articlePanel.parent().remove();\r\n      if ($(this.sel.grid).find('.articlePanel').length <= 0) {\r\n        $(this.sel.grid).append('<div class=\"col-12\"><h2 class=\"articleGrid__title\">You have no saved articles</h2></div>');\r\n        this.handleEdit({preventDefault: () => {}});\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSwipe(swipedir, element) {\r\n    // swipedir contains either \"none\", \"left\", \"right\", \"top\", or \"down\"\r\n    let isDeletable = $(element).hasClass('articlePanel--deletable');\r\n    if (swipedir === 'left' && !isDeletable) {\r\n      $('.articlePanel.articlePanel--deletable').removeClass('articlePanel--deletable');\r\n      $(element).addClass('articlePanel--deletable');\r\n    } else if (swipedir === 'right' && isDeletable) {\r\n      $(element).removeClass('articlePanel--deletable');\r\n    }\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.loadArticles().then(() => {\r\n      this.bindEvents();\r\n    });\r\n    return true;\r\n  }\r\n}\r\n\r\nclass Offline {\r\n  constructor() {\r\n    this.saveForOffline = new SaveForOffline();\r\n    this.offlineArticles = new OfflineArticles();\r\n    this.init = this.init.bind(this);\r\n    this.checkStatus = this.checkStatus.bind(this);\r\n    this.doOnline = this.doOnline.bind(this);\r\n    this.doOffline = this.doOffline.bind(this);\r\n  }\r\n\r\n  checkStatus() {\r\n    if (navigator.onLine) {\r\n      this.doOnline();\r\n    } else {\r\n      this.doOffline();\r\n    }\r\n  }\r\n\r\n  doOnline() {\r\n    $('body').removeClass('offline');\r\n    $('.disable-offline[tabindex=\"-1\"], .disable-offline *[tabindex=\"-1\"]').removeAttr('tabindex');\r\n  }\r\n\r\n  doOffline() {\r\n    $('body').addClass('offline');\r\n    $('.disable-offline, .disable-offline *').attr('tabindex', '-1');\r\n  }\r\n\r\n  bindEvents() {\r\n    window.addEventListener('online', this.doOnline);\r\n    window.addEventListener('offline', this.doOffline);\r\n  }\r\n\r\n  init() {\r\n    if (!('onLine' in navigator)) return false;\r\n    this.saveForOffline.init();\r\n    this.offlineArticles.init();\r\n    this.checkStatus();\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new Offline();\r\n","class Password {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.forms__password',\r\n      toggle: '.forms__password input[type=checkbox]'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.togglePlainText = this.togglePlainText.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('change', this.sel.toggle, (e) => {\r\n      const passwordTarget = $(e.target).attr('data-field-id');\r\n      this.togglePlainText(passwordTarget);\r\n    });\r\n  }\r\n\r\n  togglePlainText(fieldId) {\r\n    const field = $('#' + fieldId);\r\n    switch (field.attr('type')) {\r\n    case 'password':\r\n      field.attr('type', 'text');\r\n      break;\r\n\r\n    default:\r\n    case 'text':\r\n      field.attr('type', 'password');\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new Password();\r\n","class PasswordReminderForm {\r\n  constructor() {\r\n    this.config = {\r\n      urlToken: '/libs/granite/csrf/token.json',\r\n      urlLogin: '/bin/dhl/login/index.json',\r\n      urlRequest: '/bin/dhl/request_password/index.json',\r\n      urlReset: '/bin/dhl/reset_password/index.json'\r\n    };\r\n\r\n    this.sel = {\r\n      component: '.reset-password-container'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.createCookie = this.createCookie.bind(this);\r\n\r\n    this.requestToken = this.requestToken.bind(this);\r\n    this.resetPassword = this.resetPassword.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    jQuery.validator.addMethod('password', (value, element) => {\r\n      return new RegExp($(element).attr('pattern')).test(value);\r\n    }, 'Password format is not valid');\r\n\r\n    jQuery.validator.addMethod('equalTo', (value, element) => {\r\n      return ($('#' + $(element).attr('data-equalTo')).val() === $(element).val());\r\n    }, 'Passwords do not match');\r\n\r\n    var reminderPage = $(this.sel.component);\r\n    if (reminderPage.length > 0) {\r\n      var username = reminderPage.data('username');\r\n      var token = reminderPage.data('token');\r\n\r\n      if ((username !== null && typeof (username) !== 'undefined' && username.length > 0) && (token !== null && typeof (token) !== 'undefined' && token.length > 0)) {\r\n        reminderPage.find('.step-3').show();\r\n        reminderPage.find('.step-1').hide();\r\n        reminderPage.find('.step-2').hide();\r\n      } else {\r\n        reminderPage.find('.step-1').show();\r\n        reminderPage.find('.step-2').hide();\r\n        reminderPage.find('.step-3').hide();\r\n      }\r\n\r\n      reminderPage.find('.step-1 form').validate({\r\n        rules: {\r\n          resetPassword__email: 'email'\r\n        },\r\n        errorPlacement: (error, element) => {\r\n          if (element.attr('type') === 'checkbox') {\r\n            error.insertAfter($(element).parent().find('label'));\r\n          } else if (element.attr('type') === 'password') {\r\n            $(element).append(error);\r\n            error.insertAfter($(element).parent());\r\n          } else if (element.attr('type') === 'search') {\r\n            error.insertAfter($(element).parent());\r\n          } else {\r\n            error.insertAfter(element);\r\n          }\r\n        },\r\n        submitHandler: (form) => {\r\n          this.requestToken(form);\r\n          return false;\r\n        }\r\n      });\r\n\r\n      reminderPage.find('.step-3 form').validate({\r\n        rules: {\r\n          reset__createPassword: 'password',\r\n          reset__confirmPassword: 'equalTo'\r\n        },\r\n        errorPlacement: (error, element) => {\r\n          if (element.attr('type') === 'checkbox') {\r\n            error.insertAfter($(element).parent().find('label'));\r\n          } else if (element.attr('type') === 'password') {\r\n            $(element).append(error);\r\n            error.insertAfter($(element).parent());\r\n          } else if (element.attr('type') === 'search') {\r\n            error.insertAfter($(element).parent());\r\n          } else {\r\n            error.insertAfter(element);\r\n          }\r\n        },\r\n        submitHandler: (form) => {\r\n          this.resetPassword(form);\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  createCookie(name, value, expirySeconds) {\r\n    var expires = '';\r\n    if (expirySeconds) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + (expirySeconds * 1000));\r\n      expires = '; expires=' + date.toUTCString();\r\n    }\r\n    document.cookie = name + '=' + value + expires + '; path=/';\r\n  }\r\n\r\n  requestToken(form) {\r\n    var data = {\r\n      username: $(form).find('input#resetPassword__email').val(),\r\n      page: window.location.href\r\n    };\r\n\r\n    $(form).find(\"button[type='submit']\").text('please wait...');\r\n    $(form).find('input.forms__cta--red').val('please wait...');\r\n    $.get(this.config.urlToken, (tokenresponse) => {\r\n      var csrftoken = tokenresponse.token;\r\n      $.ajax({\r\n        url: this.config.urlRequest,\r\n        data: data,\r\n        type: 'post',\r\n        headers: { 'CSRF-Token': csrftoken },\r\n        dataType: 'json',\r\n        success: (response) => {\r\n          if (response) {\r\n            if (response.status === 'ok') {\r\n              $(this.sel.component).find('.step-1').hide();\r\n              $(this.sel.component).find('.step-2').show();\r\n            } else {\r\n              alert('An error occurred while attempting to request a password reset.\\n' + response.error);\r\n            }\r\n          } else {\r\n            alert('An unknown error occurred while attempting to request a password reset. Please try again later');\r\n          }\r\n          $(form).find(\"button[type='submit']\").text('Get new password');\r\n          $(form).find('input.forms__cta--red').val('Get new password');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  resetPassword(form) {\r\n    var username = $(this.sel.component).data('username');\r\n    var token = $(this.sel.component).data('token');\r\n    var password = $(form).find('input#reset__createPassword').val();\r\n    var data = {\r\n      username: username,\r\n      token: token,\r\n      password: password\r\n    };\r\n\r\n    $(form).find(\"button[type='submit']\").text('please wait...');\r\n    $(form).find('input.forms__cta--red').val('please wait...');\r\n    $.get(this.config.urlToken, (tokenresponse) => {\r\n      var csrftoken = tokenresponse.token;\r\n      $.ajax({\r\n        url: this.config.urlReset,\r\n        data: data,\r\n        type: 'post',\r\n        headers: { 'CSRF-Token': csrftoken },\r\n        dataType: 'json',\r\n        success: (response) => {\r\n          if (response) {\r\n            if (response.status === 'ok') {\r\n              $.get(this.config.urlToken, (nextTokenResponse) => {\r\n                var nextcsrftoken = nextTokenResponse.token;\r\n\r\n                $.ajax({\r\n                  url: this.config.urlLogin,\r\n                  data: { username: username, password: password },\r\n                  type: 'post',\r\n                  headers: { 'CSRF-Token': nextcsrftoken },\r\n                  dataType: 'json',\r\n                  success: (loginResponse) => {\r\n                    if (loginResponse) {\r\n                      if (loginResponse.status === 'ok') {\r\n                        $(window).trigger('checkauthtokens.DHL', [ loginResponse, true ]);\r\n\r\n                        var backUrl = $(form).data('back');\r\n                        if ($.trim(backUrl).length === 0) {\r\n                          backUrl = '/content/dhl.html';\r\n                        }\r\n                        window.location = backUrl;\r\n                      } else {\r\n                        alert('An error occurred while attempting to login using your updated credentials.\\n' + response.error);\r\n                      }\r\n                    } else {\r\n                      alert('An unknown error occurred while attempting to login using your updated credentials. Please try again later');\r\n                    }\r\n                    $(form).find(\"button[type='submit']\").text('Submit');\r\n                    $(form).find('input.forms__cta--red').val('Submit');\r\n                  }\r\n                });\r\n              });\r\n            } else {\r\n              alert('An error occurred while attempting to request a password reset.\\n' + response.error);\r\n            }\r\n          } else {\r\n            alert('An unknown error occurred while attempting to request a password reset. Please try again later');\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default new PasswordReminderForm();\r\n","class PasswordValidityApi {\r\n  constructor() {\r\n    this.checkCasing = this.checkCasing.bind(this);\r\n    this.checkSpecial = this.checkSpecial.bind(this);\r\n    this.checkNumber = this.checkNumber.bind(this);\r\n    this.checkLength = this.checkLength.bind(this);\r\n    this.isValid = this.isValid.bind(this);\r\n  }\r\n\r\n  isValid(password) {\r\n    const isLengthValid = this.checkLength(password);\r\n    const isCasingValid = this.checkCasing(password);\r\n    const isSpeicalValid = this.checkSpecial(password);\r\n    const isNumberValid = this.checkNumber(password);\r\n\r\n    const result = {\r\n      isValid: isLengthValid && isCasingValid && isSpeicalValid && isNumberValid,\r\n      isLengthValid,\r\n      isCasingValid,\r\n      isSpeicalValid,\r\n      isNumberValid\r\n    };\r\n\r\n    return result;\r\n  }\r\n\r\n  checkLength(password) {\r\n    return password.length >= 8;\r\n  }\r\n\r\n  checkCasing(password) {\r\n    return /^(?=.*[a-z]).+$/.test(password) && /^(?=.*[A-Z]).+$/.test(password);\r\n  }\r\n\r\n  checkNumber(password) {\r\n    return /^(?=.*[0-9]).+$/.test(password);\r\n  }\r\n\r\n  checkSpecial(password) {\r\n    return /^(?=.*[!%&*()={}@#><]).+$/.test(password);\r\n  }\r\n}\r\n\r\n\r\n// I've assumed there will only be one password validity checker on a page at once, because:\r\n// - the validity checker would only be on the main password entry field and not the confirmation\r\n// - a user wouldn't be setting more than one password at once\r\nclass PasswordValidity {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.validity-checks'\r\n    };\r\n\r\n    this.passwordApi = new PasswordValidityApi();\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    const passwordFieldId = $(this.sel.component).attr('data-field-id');\r\n    const passwordField = $('#' + passwordFieldId);\r\n\r\n    $(document).on('keyup keypress change', '#' + passwordFieldId, () => {\r\n      let password = passwordField.val();\r\n      this.checkPasswordValidity(password);\r\n    });\r\n  }\r\n\r\n  isPasswordValid(password) {\r\n    let result = this.passwordApi.isValid(password);\r\n    return result.isValid;\r\n  }\r\n\r\n  checkPasswordValidity(password) {\r\n    let result = this.passwordApi.isValid(password);\r\n\r\n    if (result.isLengthValid) {\r\n      $('[data-check=length]').addClass('is-valid');\r\n    } else {\r\n      $('[data-check=length]').removeClass('is-valid');\r\n    }\r\n\r\n    if (result.isCasingValid) {\r\n      $('[data-check=casing]').addClass('is-valid');\r\n    } else {\r\n      $('[data-check=casing]').removeClass('is-valid');\r\n    }\r\n\r\n    if (result.isSpeicalValid) {\r\n      $('[data-check=special]').addClass('is-valid');\r\n    } else {\r\n      $('[data-check=special]').removeClass('is-valid');\r\n    }\r\n\r\n    if (result.isNumberValid) {\r\n      $('[data-check=number]').addClass('is-valid');\r\n    } else {\r\n      $('[data-check=number]').removeClass('is-valid');\r\n    }\r\n  }\r\n}\r\n\r\nexport default new PasswordValidity();\r\n","class RegisterForm {\r\n  constructor() {\r\n    this.config = {\r\n      // fbAppId: '1000773163337798',\r\n      fbAppId: '1080031328801211',\r\n      // goClientId: '913960352236-u7un0l22tvkmlbpa5bcnf1uqg4csi7e3.apps.googleusercontent.com',\r\n      goClientId: '313469837420-l882h39ge8n8n9pb97ldvjk3fm8ppqgs.apps.googleusercontent.com',\r\n\r\n      urlToken: '/libs/granite/csrf/token.json',\r\n      urlRefreshCheck: '/bin/dhl/refresh_token/index.json',\r\n      urlRegister: '/bin/dhl/register/index.json',\r\n      urlUpdateCategories: '/bin/dhl/update_categories/index.json'\r\n    };\r\n\r\n    this.sel = {\r\n      component: '.page-body.register, #download, .gated',\r\n      buttonFacebook: '.forms__cta--social.fb',\r\n      buttonLinkedin: '.forms__cta--social.li',\r\n      buttonGooglePlus: '.forms__cta--social.go'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.loggedIn = this.loggedIn.bind(this);\r\n\r\n    this.tryRegisterFacebook = this.tryRegisterFacebook.bind(this);\r\n    this.tryRegisterLinkedin = this.tryRegisterLinkedin.bind(this);\r\n    this.tryRegisterGoogle = this.tryRegisterGoogle.bind(this);\r\n    this.tryRegister = this.tryRegister.bind(this);\r\n\r\n    this.executeRegister = this.executeRegister.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\r\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(window).on('userloggedin.DHL', () => {\r\n      this.loggedIn();\r\n    });\r\n\r\n    jQuery.validator.addMethod('password', (value, element) => {\r\n      if ($.trim(value).length === 0) return true;\r\n      return new RegExp($(element).attr('pattern')).test(value);\r\n    }, 'Password format is not valid');\r\n\r\n    jQuery.validator.addMethod('equalTo', (value, element) => {\r\n      return ($('#' + $(element).attr('data-equalTo')).val() === $(element).val());\r\n    }, 'Passwords do not match');\r\n\r\n    if ($(this.sel.component).find(this.sel.buttonFacebook).length > 0) {\r\n      window.fbAsyncInit = () => {\r\n        window.fb_interval = setInterval(() => {\r\n          if (typeof (window.FB) !== 'undefined' && window.FB !== null) {\r\n            window.FB.init({\r\n              appId: this.config.fbAppId,\r\n              cookie: true,\r\n              xfbml: true,\r\n              version: 'v2.8'\r\n            });\r\n\r\n            clearInterval(window.fb_interval);\r\n          }\r\n        }, 100);\r\n      };\r\n\r\n      if (document.getElementById('facebook-jssdk') === null) {\r\n        var fjs = document.getElementsByTagName('script')[0];\r\n        var js = document.createElement('script');\r\n        js.id = 'facebook-jssdk';\r\n        js.src = '//connect.facebook.net/en_EN/sdk.js';\r\n        fjs.parentNode.insertBefore(js, fjs);\r\n      }\r\n      $(this.sel.component).find(this.sel.buttonFacebook).on('click', (evt) => {\r\n        this.tryRegisterFacebook(evt);\r\n        return false;\r\n      });\r\n    }\r\n\r\n    if ($(this.sel.component).find(this.sel.buttonLinkedin).length > 0) {\r\n      $(this.sel.component).find(this.sel.buttonLinkedin).on('click', (evt) => {\r\n        this.tryRegisterLinkedin(evt);\r\n        return false;\r\n      });\r\n    }\r\n\r\n    var googleButton = $(this.sel.component).find(this.sel.buttonGooglePlus);\r\n    if (googleButton.length > 0) {\r\n      window.go_interval = setInterval(() => {\r\n        if (typeof (window.gapi) !== 'undefined' && window.gapi !== null) {\r\n          window.gapi.load('auth2', () => {\r\n            var auth2 = window.gapi.auth2.init({\r\n              client_id: this.config.goClientId,\r\n              cookiepolicy: 'single_host_origin'\r\n            });\r\n\r\n            var element = googleButton.get(0);\r\n            auth2.attachClickHandler(element, {},\r\n              (googleUser) => {\r\n                this.tryRegisterGoogle(googleUser);\r\n                return false;\r\n              },\r\n              (result) => {\r\n                if (result.error !== 'popup_closed_by_user') {\r\n                  alert(result.error);\r\n                }\r\n              }\r\n            );\r\n          });\r\n\r\n          clearInterval(window.go_interval);\r\n        }\r\n      }, 100);\r\n\r\n      $(this.sel.component).find(this.sel.buttonGooglePlus).on('click', (evt) => {\r\n        evt.preventDefault();\r\n        return false;\r\n      });\r\n    }\r\n\r\n    $(this.sel.component).find('#glb-register-start form#register-detail-form').validate({\r\n      rules: {\r\n        register__email: 'email',\r\n        register__password1: 'password'\r\n      },\r\n      errorPlacement: (error, element) => {\r\n        if (element.attr('type') === 'checkbox') {\r\n          error.insertAfter($(element).parent().find('label'));\r\n        } else if (element.attr('type') === 'password') {\r\n          $(element).append(error);\r\n          error.insertAfter($(element).parent());\r\n        } else if (element.attr('type') === 'search') {\r\n          error.insertAfter($(element).parent());\r\n        } else {\r\n          error.insertAfter(element);\r\n        }\r\n      },\r\n      submitHandler: (form) => {\r\n        this.tryRegister(form);\r\n        return false;\r\n      }\r\n    });\r\n\r\n    $(this.sel.component).find('#glb-register-categories form .forms__cta--red').on('click', (evt) => {\r\n      evt.preventDefault();\r\n      this.tryCategorySelection(evt);\r\n      return false;\r\n    });\r\n  }\r\n\r\n  tryRegisterFacebook(evt) {\r\n    evt.preventDefault();\r\n\r\n    $(this.sel.component).find(this.sel.buttonFacebook).text('please wait...');\r\n\r\n    window.FB.login((loginResponse) => {\r\n      if (loginResponse.authResponse) {\r\n        window.FB.api('/me', (dataResponse) => {\r\n          var data = {\r\n            firstname: dataResponse.first_name,\r\n            lastname: dataResponse.last_name,\r\n            username: dataResponse.email,\r\n            password: dataResponse.id,\r\n            islinkedin: 'true',\r\n            tcagree: true\r\n          };\r\n\r\n          this.executeRegister(data, () => {\r\n            $(this.sel.component).find(this.sel.buttonFacebook).text('Facebook');\r\n          });\r\n        }, { fields: [ 'id', 'email', 'first_name', 'last_name' ]});\r\n      }\r\n      return false;\r\n    }, { scope: 'email,public_profile', return_scopes: true });\r\n  }\r\n\r\n  tryRegisterLinkedin(evt) {\r\n    evt.preventDefault();\r\n\r\n    $(this.sel.component).find(this.sel.buttonLinkedin).text('please wait...');\r\n\r\n    IN.User.authorize(() => {\r\n      IN.API.Profile('me').fields('id', 'first-name', 'last-name', 'email-address').result((result) => {\r\n        var member = result.values[0];\r\n\r\n        var data = {\r\n          firstname: member.firstName,\r\n          lastname: member.lastName,\r\n          username: member.emailAddress,\r\n          password: member.id,\r\n          islinkedin: 'true',\r\n          tcagree: true\r\n        };\r\n\r\n        this.executeRegister(data, () => {\r\n          $(this.sel.component).find(this.sel.buttonLinkedin).text('LinkedIn');\r\n        });\r\n      });\r\n    });\r\n\r\n    setInterval(() => {\r\n      var result = window.IN.User.isAuthorized();\r\n      if (result) {\r\n        IN.API.Profile('me').fields('id', 'first-name', 'last-name', 'email-address').result((result) => {\r\n          var member = result.values[0];\r\n  \r\n          var data = {\r\n            firstname: member.firstName,\r\n            lastname: member.lastName,\r\n            username: member.emailAddress,\r\n            password: member.id,\r\n            islinkedin: 'true',\r\n            tcagree: true\r\n          };\r\n  \r\n          this.executeRegister(data, () => {\r\n            $(this.sel.component).find(this.sel.buttonLinkedin).text('LinkedIn');\r\n          });\r\n        });\r\n      }\r\n    }, 1000);\r\n    return false;\r\n  }\r\n\r\n  tryRegisterGoogle(googleUser) {\r\n    var basicProfile = googleUser.getBasicProfile();\r\n\r\n    var data = {\r\n      firstname: basicProfile.getGivenName(),\r\n      lastname: basicProfile.getFamilyName(),\r\n      username: basicProfile.getEmail(),\r\n      password: basicProfile.getId(),\r\n      islinkedin: 'true',\r\n      tcagree: true\r\n    };\r\n\r\n    $(this.sel.component).find(this.sel.buttonGooglePlus).text('please wait...');\r\n    this.executeRegister(data, () => {\r\n      $(this.sel.component).find(this.sel.buttonGooglePlus).text('Google+');\r\n    });\r\n  }\r\n\r\n  tryRegister(form) {\r\n    var frm = $(form);\r\n    var data = {\r\n      firstname: frm.find('input#register__firstname').val(),\r\n      lastname: frm.find('input#register__lastname').val(),\r\n      username: frm.find('input#register__email').val(),\r\n      password: frm.find('input#register__password1').val(),\r\n\r\n      islinkedin: 'false',\r\n      tcagree: frm.find('input#checkboxId').is(':checked')\r\n    };\r\n\r\n    if (($.trim(data.firstname).length === 0) || ($.trim(data.lastname).length === 0) || ($.trim(data.username).length === 0)) {\r\n      alert('Please enter your name and email address.');\r\n    } else {\r\n      frm.find(\"button[type='submit']\").text('please wait...');\r\n      frm.find('input.forms__cta--red').val('please wait...');\r\n\r\n      this.executeRegister(data, () => {\r\n        frm.find(\"button[type='submit']\").text('Submit');\r\n        frm.find('input.forms__cta--red').val('Submit');\r\n      });\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  executeRegister(data, unwaitCallback) {\r\n    $.get(this.config.urlToken, (tokenresponse) => {\r\n      var csrftoken = tokenresponse.token;\r\n\r\n      $.ajax({\r\n        url: this.config.urlRegister,\r\n        data: data,\r\n        type: 'post',\r\n        headers: { 'CSRF-Token': csrftoken },\r\n        dataType: 'json',\r\n        success: (response) => {\r\n          if (response) {\r\n            var frm = $('.page-body.register, #download, .gated').find('form');\r\n\r\n            if (response.status === 'ok') {\r\n              $(window).trigger('checkauthtokens.DHL', [ response, true ]);\r\n\r\n              window.dataLayer = window.dataLayer || [];\r\n              window.dataLayer.push({\r\n                'event': 'registrationComplete'\r\n              });\r\n\r\n              if ((frm.closest('#download').length > 0) || (frm.closest('.gated').length > 0)) {\r\n                location.reload();\r\n                return;\r\n              }\r\n\r\n              var modal = $('.register.below-register-form').find('.modal');\r\n              var categorySelection = $(this.sel.component).find('#glb-register-categories');\r\n              if (modal.length > 0) {\r\n                modal.find('.thanks-name').text(data.firstname);\r\n                modal.find('button').on('click', () => {\r\n                  var backUrl = frm.data('back');\r\n                  if ($.trim(backUrl).length === 0) {\r\n                    location.reload();\r\n                  } else {\r\n                    window.location = backUrl;\r\n                  }\r\n                });\r\n\r\n                modal.modal('show');\r\n              } else if (categorySelection.length > 0) {\r\n                $(this.sel.component).find('#glb-register-start').hide();\r\n\r\n                categorySelection.find('.forms__title').text('Thanks ' + response.name);\r\n                categorySelection.show();\r\n              }\r\n            } else if (response.error.includes('Email address already exists')) {\r\n              $('<label id=\"register__email-error\" class=\"error\" for=\"register__email\">This email address already exists</label>').insertAfter(frm.find('input#register__email'));\r\n            } else {\r\n              alert('An error occurred while attempting to register.\\n' + response.error);\r\n            }\r\n          } else {\r\n            alert('An unknown error occurred while attempting to register. Please try again later.');\r\n          }\r\n          unwaitCallback();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  tryCategorySelection() {\r\n    var categories = '';\r\n    var container = $(this.sel.component).find('#glb-register-categories form');\r\n    container.find('input:checked').each((index, item) => {\r\n      if (categories.length > 0) {\r\n        categories += ',';\r\n      }\r\n      categories += $(item).val();\r\n    });\r\n\r\n    if (categories.length > 0) {\r\n      var cookie = this.readCookie('DHL.AuthToken');\r\n      if (cookie !== null) {\r\n        var split = cookie.split('|');\r\n        if (split.length >= 2) {\r\n          $.get(this.config.urlToken, (tokenresponse) => {\r\n            var csrftoken = tokenresponse.token;\r\n            $.ajax({\r\n              url: this.config.urlUpdateCategories,\r\n              data: { username: split[0], token: split[1], cats: categories },\r\n              type: 'post',\r\n              headers: { 'CSRF-Token': csrftoken },\r\n              dataType: 'json',\r\n              success: (updateCategoriesResponse) => {\r\n                if (updateCategoriesResponse) {\r\n                  if (updateCategoriesResponse.status === 'ok') {\r\n                    $(window).trigger('checkauthtokens.DHL', [ updateCategoriesResponse, true ]);\r\n                    window.location = '/content/dhl.html';\r\n                  } else {\r\n                    alert('An unknown error occurred while attempting to update your details (1). Please try again later');\r\n                  }\r\n                } else {\r\n                  alert('An unknown error occurred while attempting to update your details (2). Please try again later');\r\n                }\r\n              }\r\n            });\r\n          });\r\n        } else {\r\n          alert('An unknown error occurred while attempting to update your details (3). Please try again later');\r\n        }\r\n      } else {\r\n        var refreshCookie = this.readCookie('DHL.RefreshToken');\r\n        if (refreshCookie !== null) {\r\n          var refreshSplit = refreshCookie.split('|');\r\n          if (refreshSplit.length >= 2) {\r\n            $.get(this.config.urlToken, (tokenresponse) => {\r\n              var csrftoken = tokenresponse.token;\r\n              $.ajax({\r\n                url: this.config.urlRefreshCheck,\r\n                data: { username: refreshSplit[0], refresh_token: refreshSplit[1] },\r\n                type: 'post',\r\n                headers: { 'CSRF-Token': csrftoken },\r\n                dataType: 'json',\r\n                success: (refreshResponse) => {\r\n                  if (refreshResponse) {\r\n                    if (refreshResponse.status === 'ok') {\r\n                      $(window).trigger('checkauthtokens.DHL', [ refreshResponse, true ]);\r\n                      this.tryCategorySelection();\r\n                    } else {\r\n                      alert('An unknown error occurred while attempting to update your details (4). Please try again later');\r\n                    }\r\n                  } else {\r\n                    alert('An unknown error occurred while attempting to update your details (5). Please try again later');\r\n                  }\r\n                }\r\n              });\r\n            });\r\n          } else {\r\n            alert('An unknown error occurred while attempting to update your details (6). Please try again later');\r\n          }\r\n        } else {\r\n          alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n        }\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  loggedIn() {\r\n    if ($('.page-body.register').length > 0) {\r\n      window.location = '/content/dhl/your-account.html';\r\n    }\r\n  }\r\n}\r\n\r\nexport default new RegisterForm();\r\n","class SearchForm {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.search-form',\r\n      clearButton: '.search-form__clear-icon',\r\n      input: '.search-form__search input[type=search]'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.clearSearchForm = this.clearSearchForm.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.clearButton, () => {\r\n      this.clearSearchForm();\r\n    });\r\n  }\r\n\r\n  clearSearchForm() {\r\n    $(this.sel.input).val('').focus();\r\n  }\r\n}\r\n\r\nexport default new SearchForm();\r\n","class ServiceWorker {\r\n  constructor() {\r\n    this.deferredPrompt = null;\r\n\r\n    this.init = this.init.bind(this);\r\n    this.register = this.register.bind(this);\r\n    this.addToHomeScreen = this.addToHomeScreen.bind(this);\r\n  }\r\n\r\n  register() {\r\n    navigator.serviceWorker.register('/sw.js').then(() => {\r\n      // console.log('ServiceWorker succesfully registered');\r\n    }).catch(() => {\r\n      // console.log('ServiceWorker registration failed: ', err);\r\n    });\r\n  }\r\n\r\n  addToHomeScreen() {\r\n    window.addEventListener('beforeinstallprompt', (e) => {\r\n      // Prevent Chrome 67 and earlier from automatically showing the prompt\r\n      e.preventDefault();\r\n      // Stash the event so it can be triggered later.\r\n      this.deferredPrompt = e;\r\n      // Check if already dismissed\r\n      let a2hsCookie = Cookies.get('a2hs');\r\n      // If the cookie is set to ignore, ignore the prompt\r\n      if (a2hsCookie === 'ignore') return;\r\n      // Show the add to home screen banner\r\n      $('.addToHomeScreen').addClass('addToHomeScreen--open');\r\n    });\r\n\r\n    $(document).on('click', '.addToHomeScreen__cta', (e) => {\r\n      e.preventDefault();\r\n      // Show A2HS\r\n      this.deferredPrompt.prompt();\r\n      // Wait for the user to respond to the prompt\r\n      this.deferredPrompt.userChoice.then((choiceResult) => {\r\n        if (choiceResult.outcome === 'accepted') {\r\n          // Hide the add to home screen banner\r\n          $('.addToHomeScreen').removeClass('addToHomeScreen--open');\r\n        } else {\r\n          // Change content\r\n          $('.addToHomeScreen__title').text('That\\'s a shame, maybe next time');\r\n          $('.addToHomeScreen__cta').remove();\r\n          $('.addToHomeScreen__link').text('Close');\r\n          // Set ignore cookie\r\n          this.createA2hsCookie();\r\n        }\r\n        this.deferredPrompt = null;\r\n      });\r\n    });\r\n\r\n    $(document).on('click', '.addToHomeScreen__link', (e) => {\r\n      e.preventDefault();\r\n      // Hide the add to home screen banner\r\n      $('.addToHomeScreen').removeClass('addToHomeScreen--open');\r\n      // Clear the prompt\r\n      this.deferredPrompt = null;\r\n      // Set ignore cookie\r\n      this.createA2hsCookie();\r\n    });\r\n  }\r\n\r\n  createA2hsCookie() {\r\n    // Set ignore cookie\r\n    Cookies.set('a2hs', 'ignore', {expires: 14});\r\n  }\r\n\r\n  init() {\r\n    if (!('serviceWorker' in navigator)) return false;\r\n    this.register();\r\n    this.addToHomeScreen();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new ServiceWorker();\r\n","class ShipForm {\r\n  constructor() {\r\n    this.sel = {\r\n      // QSP = querystring parameter\r\n      component: '.ship-now',\r\n      firstnameInput: '#firstname', // jquery selector for input (can be eg '.firstname input')\r\n      firstnameQSP: '?firstname', // need ? followed by parameter name\r\n      lastnameInput: '#lastname',\r\n      lastnameQSP: '?lastname',\r\n      emailInput: '#email',\r\n      emailQSP: '?email',\r\n      userFirstnameElement: '.user-firstname'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.populateForm = this.populateForm.bind(this);\r\n    this.showLoggedInElements = this.showLoggedInElements.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    \r\n    $(window).on('userloggedin.DHL', (evt, tokenData) => {\r\n      this.showLoggedInElements(tokenData);\r\n    });\r\n\r\n    this.populateForm();\r\n    return true;\r\n  }\r\n\r\n  populateForm() {\r\n    let email = url(this.sel.emailQSP);\r\n    let firstname = url(this.sel.firstnameQSP);\r\n    let lastname = url(this.sel.lastnameQSP);\r\n\r\n    if (typeof email !== 'undefined') {\r\n      $(this.sel.emailInput).val(email);\r\n    }\r\n\r\n    if (typeof firstname !== 'undefined') {\r\n      $(this.sel.firstnameInput).val(firstname);\r\n\r\n      if ($.trim(firstname).length > 0) {\r\n        $(this.sel.userFirstnameElement).text(firstname);\r\n      }\r\n    }\r\n\r\n    if (typeof lastname !== 'undefined') {\r\n      $(this.sel.lastnameInput).val(lastname);\r\n    }\r\n  }\r\n\r\n  showLoggedInElements(tokenData) {\r\n    let firstname = url(this.sel.firstnameQSP);\r\n\r\n    if ((typeof firstname === 'undefined') || ($.trim(firstname).length == 0)) {\r\n      $(this.sel.userFirstnameElement).text(tokenData.name);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new ShipForm();\r\n","class ShipNowForm {\r\n  constructor() {\r\n    this.sel = {\r\n      form: 'form.forms.ship-now',\r\n      countryselect: 'form.forms.ship-now #shipnow_country'\r\n    };\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.toggleAddress = this.toggleAddress.bind(this);\r\n    this.submitForm = this.submitForm.bind(this);\r\n    this.getFormData = this.getFormData.bind(this);\r\n    this.showSuccess = this.showSuccess.bind(this);\r\n    this.showError = this.showError.bind(this);\r\n    this.validate = this.validate.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('change', this.sel.countryselect, this.toggleAddress);\r\n    $(document).on('submit', this.sel.form, this.submitForm);\r\n\r\n    var country = $(this.sel.form).data('preselectcountry');\r\n    if ((country !== null) && $.trim(country).length > 0) {\r\n      $(this.sel.countryselect).val(country).trigger('change');\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    $(this.sel.form).each((index, item) => {\r\n      $(item).validate({\r\n        errorPlacement: (error, element) => {\r\n          if (element.attr('type') === 'checkbox') {\r\n            error.insertAfter($(element).parent().find('label'));\r\n          } else if (element.is('select')) {\r\n            error.insertAfter(element);\r\n            element.parent().find('.selectboxit-btn').addClass('error');\r\n          } else {\r\n            error.insertAfter(element);\r\n          }\r\n        },\r\n        success: (label) => {\r\n          let $parent = $(label).parents('form.ship-now');\r\n          if ($parent.find('select').length > 0) {\r\n            $parent.find('.selectboxit-btn').removeClass('error');\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  toggleAddress(e) {\r\n    var val = $(this.sel.countryselect).val();\r\n\r\n    var options = $('option', this.sel.countryselect);\r\n    var mandatory = true;\r\n    options.each((index, item) => {\r\n      if ($(item).attr('value') === val && ('' + $(item).data('nonmandatory')) === 'true') {\r\n        mandatory = false;\r\n      }\r\n    });\r\n\r\n    if (mandatory) {\r\n      $('#shipnow_address', this.sel.form).attr('required', 'required').attr('placeholder', 'Address*');\r\n      $('#shipnow_zip', this.sel.form).attr('required', 'required').attr('placeholder', 'ZIP or Postcode*');\r\n      $('#shipnow_city', this.sel.form).attr('required', 'required').attr('placeholder', 'City*');\r\n    } else {\r\n      $('#shipnow_address', this.sel.form).removeAttr('required').attr('placeholder', 'Address').removeClass('error').closest('div').find('label').remove();\r\n      $('#shipnow_zip', this.sel.form).removeAttr('required').attr('placeholder', 'ZIP or Postcode').removeClass('error').closest('div').find('label').remove();\r\n      $('#shipnow_city', this.sel.form).removeAttr('required').attr('placeholder', 'City').removeClass('error').closest('div').find('label').remove();\r\n    }\r\n  }\r\n\r\n  submitForm(e) {\r\n    e.preventDefault();\r\n    let $form = $(e.target);\r\n    let formData = this.getFormData($form);\r\n    $.post($form.attr('action'), formData, (data) => {\r\n      if (data.status === 'OK') {\r\n        this.showSuccess();\r\n      } else {\r\n        this.showError();\r\n      }\r\n    });\r\n  }\r\n\r\n  getFormData($form) {\r\n    let unindexedArray = $form.serializeArray();\r\n    let indexedArray = {};\r\n    $.map(unindexedArray, (n) => (indexedArray[n.name] = n.value));\r\n\r\n    indexedArray.source = $.trim($form.data('source'));\r\n\r\n    return indexedArray;\r\n  }\r\n\r\n  showSuccess() {\r\n    window.location = $(this.sel.form).data('thanks');\r\n  }\r\n\r\n  showError() {\r\n    alert('An error occurred. Please try again later.');\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.form).length <= 0) return false;\r\n    this.bindEvents();\r\n    this.validate();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new ShipNowForm();\r\n","class ShipNowTwoStepForm {\r\n  constructor() {\r\n    this.firstname = '';\r\n    this.lastname = '';\r\n    this.email = '';\r\n\r\n    this.config = {\r\n      // fbAppId: '1000773163337798',\r\n      fbAppId: '1080031328801211',\r\n      // goClientId: '913960352236-u7un0l22tvkmlbpa5bcnf1uqg4csi7e3.apps.googleusercontent.com',\r\n      goClientId: '313469837420-l882h39ge8n8n9pb97ldvjk3fm8ppqgs.apps.googleusercontent.com'\r\n    };\r\n\r\n    this.sel = {\r\n      component: '.shipNowMulti.wysiwyg, .animatedForm',\r\n      swingbutton: '.shipNowMulti__headcta--red',\r\n      forms: 'form.forms.ship-now-twostep',\r\n      form1: 'form.forms.form1.ship-now-twostep',\r\n      form2: 'form.forms.form2.ship-now-twostep',\r\n      countryselect: 'form.forms.form2.ship-now-twostep #shipnow_country',\r\n\r\n      buttonFacebook: '.forms__cta--social.facebook',\r\n      buttonLinkedin: '.forms__cta--social.linkedin',\r\n      buttonGooglePlus: '.forms__cta--social.google'\r\n    };\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    \r\n    this.toggleAddress = this.toggleAddress.bind(this);\r\n    this.submitFacebook = this.submitFacebook.bind(this);\r\n    this.submitLinkedin = this.submitLinkedin.bind(this);\r\n    this.submitGoogle = this.submitGoogle.bind(this);\r\n    this.submitForm1 = this.submitForm1.bind(this);\r\n    this.nextForm = this.nextForm.bind(this);\r\n    this.submitForm2 = this.submitForm2.bind(this);\r\n    this.getFormData = this.getFormData.bind(this);\r\n    this.showSuccess = this.showSuccess.bind(this);\r\n    this.validate = this.validate.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('submit', this.sel.form1, this.submitForm1);\r\n    $(document).on('submit', this.sel.form2, this.submitForm2);\r\n    $(document).on('change', this.sel.countryselect, this.toggleAddress);\r\n\r\n    var country = $(this.sel.form2).data('preselectcountry');\r\n    if ((country !== null) && $.trim(country).length > 0) {\r\n      $(this.sel.countryselect).val(country).trigger('change');\r\n    }\r\n\r\n    if ($(this.sel.component).find(this.sel.buttonFacebook).length > 0) {\r\n      window.fbAsyncInit = () => {\r\n        window.fb_interval = setInterval(() => {\r\n          if (typeof (window.FB) !== 'undefined' && window.FB !== null) {\r\n            window.FB.init({\r\n              appId: this.config.fbAppId,\r\n              cookie: true,\r\n              xfbml: true,\r\n              version: 'v2.8'\r\n            });\r\n\r\n            clearInterval(window.fb_interval);\r\n          }\r\n        }, 100);\r\n      };\r\n\r\n      if (document.getElementById('facebook-jssdk') === null) {\r\n        var fjs = document.getElementsByTagName('script')[0];\r\n        var js = document.createElement('script');\r\n        js.id = 'facebook-jssdk';\r\n        js.src = '//connect.facebook.net/en_EN/sdk.js';\r\n        fjs.parentNode.insertBefore(js, fjs);\r\n      }\r\n      $(this.sel.component).find(this.sel.buttonFacebook).on('click', (evt) => {\r\n        this.submitFacebook(evt);\r\n        return false;\r\n      });\r\n    }\r\n\r\n    if ($(this.sel.component).find(this.sel.buttonLinkedin).length > 0) {\r\n      $(this.sel.component).find(this.sel.buttonLinkedin).on('click', (evt) => {\r\n        this.submitLinkedin(evt);\r\n        return false;\r\n      });\r\n    }\r\n\r\n    var googleButton = $(this.sel.component).find(this.sel.buttonGooglePlus);\r\n    if (googleButton.length > 0) {\r\n      window.go_interval = setInterval(() => {\r\n        if (typeof (window.gapi) !== 'undefined' && window.gapi !== null) {\r\n          window.gapi.load('auth2', () => {\r\n            var auth2 = window.gapi.auth2.init({\r\n              client_id: this.config.goClientId,\r\n              cookiepolicy: 'single_host_origin'\r\n            });\r\n\r\n            var element = googleButton.get(0);\r\n            auth2.attachClickHandler(element, {},\r\n              (googleUser) => {\r\n                this.submitGoogle(googleUser);\r\n                return false;\r\n              },\r\n              (result) => {\r\n                if (result.error !== 'popup_closed_by_user') {\r\n                  alert(result.error);\r\n                }\r\n              }\r\n            );\r\n          });\r\n\r\n          clearInterval(window.go_interval);\r\n        }\r\n      }, 100);\r\n\r\n      $(this.sel.component).find(this.sel.buttonGooglePlus).on('click', (evt) => {\r\n        evt.preventDefault();\r\n        return false;\r\n      });\r\n    }\r\n\r\n    $(document).on('click', this.sel.swingbutton, (evt) => {\r\n      var id = $(evt.currentTarget).attr('href');\r\n      var offset = $(id).offset().top;\r\n      $('html, body').animate({\r\n        scrollTop: offset\r\n      }, 1000, 'swing');\r\n\r\n      return false;\r\n    });\r\n  }\r\n\r\n  validate() {\r\n    $(this.sel.forms).each((index, item) => {\r\n      $(item).validate({\r\n        errorPlacement: (error, element) => {\r\n          if (element.attr('type') === 'checkbox') {\r\n            error.insertAfter($(element).parent().find('label'));\r\n          } else if (element.is('select')) {\r\n            error.insertAfter(element);\r\n            element.parent().find('.selectboxit-btn').addClass('error');\r\n          } else {\r\n            error.insertAfter(element);\r\n          }\r\n        },\r\n        success: (label) => {\r\n          let $parent = $(label).parents('form.ship-now');\r\n          if ($parent.find('select').length > 0) {\r\n            $parent.find('.selectboxit-btn').removeClass('error');\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  toggleAddress(e) {\r\n    var val = $(this.sel.countryselect).val();\r\n\r\n    var options = $('option', this.sel.countryselect);\r\n    var mandatory = true;\r\n    options.each((index, item) => {\r\n      if ($(item).attr('value') === val && ('' + $(item).data('nonmandatory')) === 'true') {\r\n        mandatory = false;\r\n      }\r\n    });\r\n\r\n    if (mandatory) {\r\n      $('#shipnow_address', this.sel.form).attr('required', 'required').attr('placeholder', 'Address*');\r\n      $('#shipnow_zip', this.sel.form).attr('required', 'required').attr('placeholder', 'ZIP or Postcode*');\r\n      $('#shipnow_city', this.sel.form).attr('required', 'required').attr('placeholder', 'City*');\r\n    } else {\r\n      $('#shipnow_address', this.sel.form).removeAttr('required').attr('placeholder', 'Address').removeClass('error').closest('div').find('label').remove();\r\n      $('#shipnow_zip', this.sel.form).removeAttr('required').attr('placeholder', 'ZIP or Postcode').removeClass('error').closest('div').find('label').remove();\r\n      $('#shipnow_city', this.sel.form).removeAttr('required').attr('placeholder', 'City').removeClass('error').closest('div').find('label').remove();\r\n    }\r\n  }\r\n\r\n  submitFacebook(evt) {\r\n    evt.preventDefault();\r\n\r\n    window.FB.login((loginResponse) => {\r\n      if (loginResponse.authResponse) {\r\n        window.FB.api('/me', (dataResponse) => {\r\n          this.firstname = dataResponse.first_name;\r\n          this.lastname = dataResponse.last_name;\r\n          this.email = dataResponse.email;\r\n\r\n          this.nextForm();\r\n        }, { fields: [ 'id', 'email', 'first_name', 'last_name' ]});\r\n      }\r\n      return false;\r\n    }, { scope: 'email,public_profile', return_scopes: true });\r\n  }\r\n\r\n  submitLinkedin(evt) {\r\n    evt.preventDefault();\r\n\r\n    IN.User.authorize(() => {\r\n      IN.API.Profile('me').fields('id', 'first-name', 'last-name', 'email-address').result((result) => {\r\n        var member = result.values[0];\r\n\r\n        this.firstname = member.firstName;\r\n        this.lastname = member.lastName;\r\n        this.email = member.emailAddress;\r\n\r\n        this.nextForm();\r\n      });\r\n    });\r\n\r\n    setInterval(() => {\r\n      var result = window.IN.User.isAuthorized();\r\n      if (result) {\r\n        IN.API.Profile('me').fields('id', 'first-name', 'last-name', 'email-address').result((result) => {\r\n          var member = result.values[0];\r\n  \r\n          this.firstname = member.firstName;\r\n          this.lastname = member.lastName;\r\n          this.email = member.emailAddress;\r\n  \r\n          this.nextForm();\r\n        });\r\n      }\r\n    }, 1000);\r\n\r\n    return false;\r\n  }\r\n\r\n  submitGoogle(googleUser) {\r\n    var basicProfile = googleUser.getBasicProfile();\r\n\r\n    this.firstname = basicProfile.getGivenName();\r\n    this.lastname = basicProfile.getFamilyName();\r\n    this.email = basicProfile.getEmail();\r\n\r\n    this.nextForm();\r\n  }\r\n\r\n  submitForm1(e) {\r\n    e.preventDefault();\r\n    let $form = $(e.target);\r\n    let formData = this.getFormData($form);\r\n\r\n    this.firstname = formData.firstname;\r\n    this.lastname = formData.lastname;\r\n    this.email = formData.email;\r\n\r\n    this.nextForm();\r\n  }\r\n\r\n  nextForm() {\r\n    $('.shipNowMulti__formstep--step1', this.sel.component).hide();\r\n    $('.shipNowMulti__formstep--step2', this.sel.component).show();\r\n    $(this.sel.component).addClass('active');\r\n  }\r\n\r\n  submitForm2(e) {\r\n    e.preventDefault();\r\n    let $form = $(e.target);\r\n    let formData = this.getFormData($form);\r\n    formData.firstname = this.firstname;\r\n    formData.lastname = this.lastname;\r\n    formData.email = this.email;\r\n\r\n    $.post($form.attr('action'), formData, (data) => {\r\n      if (data.status === 'OK') {\r\n        this.showSuccess();\r\n      } else {\r\n        alert('An error occurred. Please try again later.');\r\n      }\r\n    });\r\n  }\r\n\r\n  getFormData($form) {\r\n    let unindexedArray = $form.serializeArray();\r\n    let indexedArray = {};\r\n    $.map(unindexedArray, (n) => (indexedArray[n.name] = n.value));\r\n\r\n    indexedArray.source = $.trim($form.data('source'));\r\n\r\n    return indexedArray;\r\n  }\r\n\r\n  showSuccess() {\r\n    var thanks = $('.shipNowMulti__formstep--step2', this.sel.component).data(\"thanks\");\r\n    if ((thanks !== null) && (thanks.length > 0)) {\r\n      window.location = thanks;\r\n    } else {\r\n      $('.shipNowMulti__formstep--step2', this.sel.component).hide();\r\n      $('.shipNowMulti__formstep--thanks', this.sel.component).show();\r\n    }\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    this.validate();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new ShipNowTwoStepForm();\r\n","class ShowHide {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '[data-show-hide-id]',\r\n      toggle: '[data-show-hide-target]'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('click', this.sel.toggle, (e) => {\r\n      const showHideTarget = $(e.target).attr('data-show-hide-target');\r\n      $('[data-show-hide-id=' + showHideTarget + ']').slideToggle();\r\n    });\r\n  }\r\n}\r\n\r\nexport default new ShowHide();\r\n","class Social {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.social'\r\n    };\r\n\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.containerTop = this.containerTop.bind(this);\r\n    this.handleScroll = this.handleScroll.bind(this);\r\n    this.checkSharePos = this.checkSharePos.bind(this);\r\n    this.debounce = this.debounce.bind(this);\r\n    this.init = this.init.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n    window.addEventListener('scroll', this.handleScroll);\r\n  }\r\n\r\n  containerTop() {\r\n    return $(this.sel.component).parent().position().top;\r\n  }\r\n\r\n  handleScroll() {\r\n    if (window.innerWidth >= 992) {\r\n      let height = $(window).scrollTop();\r\n      let bottom = this.containerTop() + $(this.sel.component).parent().height() - $(this.sel.component).outerHeight() - 60;\r\n      if (height >= this.containerTop() && height < bottom && !$(this.sel.component).hasClass('social--affix')) {\r\n        $(this.sel.component)\r\n          .addClass('social--affix')\r\n          .css({\r\n            'left': this.getLeftOffset($(this.sel.component)),\r\n            'top': ''\r\n          });\r\n      } else if (height < this.containerTop() && $(this.sel.component).hasClass('social--affix')) {\r\n        $(this.sel.component)\r\n          .removeClass('social--affix')\r\n          .css({\r\n            'left': '',\r\n            'top': ''\r\n          });\r\n      } else if (height >= bottom && $(this.sel.component).hasClass('social--affix')) {\r\n        $(this.sel.component)\r\n          .removeClass('social--affix')\r\n          .css({\r\n            'left': '',\r\n            'top': this.getTopOffset()\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  getLeftOffset($elm) {\r\n    let parentOffset = parseInt($elm.parent().offset().left, 10);\r\n    let myOffset = parseInt($elm.offset().left, 10);\r\n    return (parentOffset + myOffset);\r\n  }\r\n\r\n  getTopOffset() {\r\n    let parentOffset = this.containerTop();\r\n    let scrollPos = $(window).scrollTop();\r\n    let top = scrollPos - parentOffset + 50;\r\n    return top;\r\n  }\r\n\r\n  checkSharePos() {\r\n    if ($('.social--vertical.social--affix').length) {\r\n      $('.social--vertical.social--affix').removeAttr('style').removeClass('social--affix');\r\n    }\r\n  }\r\n\r\n  // Deboutce function\r\n  debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function () {\r\n      var context = this;\r\n      var args = arguments;\r\n      var later = function () {\r\n        timeout = null;\r\n        if (!immediate) func.apply(context, args);\r\n      };\r\n      var callNow = immediate && !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n      if (callNow) func.apply(context, args);\r\n    };\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    window.addEventListener('resize', this.debounce(this.checkSharePos, 100));\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new Social();\r\n","class SubscribePanel {\r\n  constructor() {\r\n    this.sel = {\r\n      component: '.subscribePanel',\r\n      form: '.subscribePanel__form',\r\n      successOverlay: '.subscribePanel__responseOverlay.success',\r\n      errorOverlay: '.subscribePanel__responseOverlay.error'\r\n    };\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.submitForm = this.submitForm.bind(this);\r\n    this.getFormData = this.getFormData.bind(this);\r\n    this.showSuccess = this.showSuccess.bind(this);\r\n    this.showError = this.showError.bind(this);\r\n    this.validate = this.validate.bind(this);\r\n  }\r\n\r\n  bindEvents() {\r\n    $(document).on('submit', this.sel.form, this.submitForm);\r\n  }\r\n\r\n  validate() {\r\n    $(this.sel.form).each((index, item) => {\r\n      $(item).validate({\r\n        errorPlacement: (error, element) => {\r\n          if (element.attr('type') === 'checkbox') {\r\n            error.insertAfter($(element).parent().find('label'));\r\n          } else if (element.is('select')) {\r\n            error.insertAfter(element.parent());\r\n            element.parent().find('.selectboxit-btn').addClass('error');\r\n          } else {\r\n            error.insertAfter(element);\r\n          }\r\n        },\r\n        success: (label) => {\r\n          let $parent = $(label).parents('.subscribe__formField');\r\n          if ($parent.find('select').length > 0) {\r\n            $parent.find('.selectboxit-btn').removeClass('error');\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  submitForm(e) {\r\n    e.preventDefault();\r\n    let $form = $(e.target);\r\n    let formData = this.getFormData($form);\r\n    $.post($form.attr('action'), formData, (data) => {\r\n      if (data.status === 'OK') {\r\n        this.showSuccess();\r\n      } else {\r\n        this.showError();\r\n      }\r\n    });\r\n  }\r\n\r\n  getFormData($form) {\r\n    let unindexedArray = $form.serializeArray();\r\n    let indexedArray = {};\r\n    $.map(unindexedArray, (n) => (indexedArray[n.name] = n.value));\r\n    return indexedArray;\r\n  }\r\n\r\n  showSuccess() {\r\n    $(this.sel.successOverlay).addClass('subscribePanel__responseOverlay--show');\r\n  }\r\n\r\n  showError() {\r\n    $(this.sel.errorOverlay).addClass('subscribePanel__responseOverlay--show');\r\n  }\r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    this.validate();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default new SubscribePanel();\r\n","class Toast {\r\n  constructor(text, duration) {\r\n    this.text = text;\r\n    this.duration = duration;\r\n    this.id = '_' + Math.random().toString(36).substr(2, 9);\r\n\r\n    this.setText = this.setText.bind(this);\r\n    this.setDuration = this.setDuration.bind(this);\r\n    this.show = this.show.bind(this);\r\n\r\n    let toast = document.createElement('div');\r\n    toast.setAttribute('id', this.id);\r\n    toast.setAttribute('class', 'toast');\r\n    let inner = document.createElement('div');\r\n    inner.setAttribute('class', 'inner');\r\n    inner.innerText = this.text;\r\n    toast.appendChild(inner);\r\n    document.body.appendChild(toast);\r\n    this.$toast = $('#' + this.id);\r\n  }\r\n\r\n  setText(text) {\r\n    this.text = text;\r\n    this.$toast.find('.inner').text(this.text);\r\n  }\r\n\r\n  setDuration(duration) {\r\n    this.duration = duration;\r\n  }\r\n\r\n  show() {\r\n    this.$toast.addClass('show');\r\n\r\n    setTimeout(() => {\r\n      this.$toast.removeClass('show');\r\n    }, this.duration);\r\n  }\r\n}\r\n\r\nexport default Toast;\r\n","class LoginForm {\r\n  constructor() {\r\n    this.config = {\r\n      urlToken: '/libs/granite/csrf/token.json',\r\n      urlRefreshCheck: '/bin/dhl/refresh_token/index.json',\r\n      urlGetAllDetails: '/bin/dhl/getdetails/index.json',\r\n      urlUpdateDetails: '/bin/dhl/update_details/index.json'\r\n    };\r\n\r\n    this.sel = {\r\n      component: '.standardContent.user-account, .page-body.user-account'\r\n    };\r\n\r\n    this.init = this.init.bind(this);\r\n    this.bindEvents = this.bindEvents.bind(this);\r\n    this.readCookie = this.readCookie.bind(this);\r\n\r\n    this.tryUpdateDetails = this.tryUpdateDetails.bind(this);\r\n    this.completeUpdateDetails = this.completeUpdateDetails.bind(this);\r\n\r\n    this.loggedIn = this.loggedIn.bind(this);\r\n    this.notLoggedIn = this.notLoggedIn.bind(this);\r\n  }\r\n  \r\n\r\n  init() {\r\n    if ($(this.sel.component).length <= 0) return false;\r\n    this.bindEvents();\r\n    return true;\r\n  }\r\n\r\n  bindEvents() {\r\n    $(window).on('userloggedin.DHL', (evt, tokenData) => {\r\n      this.loggedIn(tokenData);\r\n    });\r\n    $(window).on('usernotloggedin.DHL', () => {\r\n      this.notLoggedIn();\r\n    });\r\n\r\n    var form = $(this.sel.component).find('form');\r\n    if (form.length > 0) {\r\n      jQuery.validator.addMethod('myAccountCurrentPassword', (value, element) => {\r\n        var $parent = $(element).parents('form');\r\n        var $currentPasswordContainer = $parent.find('.useraccount-currentpassword');\r\n        var $newPassword = $parent.find('input[name=\"myAccount__newPassword\"]');\r\n        var $confirmPassword = $parent.find('input[name=\"myAccount__confirmPassword\"]');\r\n\r\n        return (($newPassword.val() === '' && $confirmPassword.val() === '') || ($currentPasswordContainer.is(':visible') && $(element).val() !== ''));\r\n      }, 'You must enter your current password');\r\n\r\n      jQuery.validator.addMethod('myAccountPassword', (value, element) => {\r\n        if ($(element).val() === '') return true;\r\n        return new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[_\\W])[A-Za-z\\d_\\W]{8,}$/).test(value);\r\n      }, 'Password format is not valid');\r\n\r\n      jQuery.validator.addMethod('myAccountEqualTo', (value, element) => {\r\n        return ($('#' + $(element).attr('data-equalTo')).val() === $(element).val());\r\n      }, 'Passwords do not match');\r\n\r\n      form.validate({\r\n        rules: {\r\n          myAccount__currentPassword: 'myAccountCurrentPassword',\r\n          myAccount__newPassword: 'myAccountPassword',\r\n          myAccount__confirmPassword: 'myAccountEqualTo'\r\n        },\r\n        errorPlacement: (error, element) => {\r\n          if (element.attr('type') === 'checkbox') {\r\n            error.insertAfter($(element).parent().find('label'));\r\n          } else if (element.attr('type') === 'password') {\r\n            $(element).append(error);\r\n            error.insertAfter($(element).parent());\r\n          } else if (element.attr('type') === 'search') {\r\n            error.insertAfter($(element).parent());\r\n          } else {\r\n            error.insertAfter(element);\r\n          }\r\n        },\r\n        submitHandler: (formElement) => {\r\n          this.tryUpdateDetails(formElement);\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  readCookie(name) {\r\n    var nameEQ = name + '=';\r\n    var ca = document.cookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\r\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  tryUpdateDetails(form) {\r\n    var frm = $(form);\r\n    frm.find('input.forms__cta--red').val('please wait...');\r\n    frm.find(\"button[type='submit']\").text('please wait...');\r\n\r\n    var cookie = this.readCookie('DHL.AuthToken');\r\n    if (cookie !== null) {\r\n      var split = cookie.split('|');\r\n      if (split.length >= 2) {\r\n        $.get(this.config.urlToken, (tokenresponse) => {\r\n          var csrftoken = tokenresponse.token;\r\n          $.ajax({\r\n            url: this.config.urlGetAllDetails,\r\n            data: { username: split[0], token: split[1] },\r\n            type: 'post',\r\n            headers: { 'CSRF-Token': csrftoken },\r\n            dataType: 'json',\r\n            success: (allDetailsResponse) => {\r\n              if (allDetailsResponse) {\r\n                if (allDetailsResponse.status === 'ok') {\r\n                  $(window).trigger('checkauthtokens.DHL', [ allDetailsResponse, true ]);\r\n                  this.completeUpdateDetails(form, allDetailsResponse);\r\n                } else {\r\n                  alert('An unknown error occurred while attempting to update your details (1). Please try again later');\r\n                }\r\n              } else {\r\n                alert('An unknown error occurred while attempting to update your details (2). Please try again later');\r\n              }\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        alert('An unknown error occurred while attempting to update your details (3). Please try again later');\r\n      }\r\n    } else {\r\n      var refreshCookie = this.readCookie('DHL.RefreshToken');\r\n      if (refreshCookie !== null) {\r\n        var refreshSplit = refreshCookie.split('|');\r\n        if (refreshSplit.length >= 2) {\r\n          $.get(this.config.urlToken, (tokenresponse) => {\r\n            var csrftoken = tokenresponse.token;\r\n            $.ajax({\r\n              url: this.config.urlRefreshCheck,\r\n              data: { username: refreshSplit[0], refresh_token: refreshSplit[1] },\r\n              type: 'post',\r\n              headers: { 'CSRF-Token': csrftoken },\r\n              dataType: 'json',\r\n              success: (refreshResponse) => {\r\n                if (refreshResponse) {\r\n                  if (refreshResponse.status === 'ok') {\r\n                    $(window).trigger('checkauthtokens.DHL', [ refreshResponse, true ]);\r\n                    this.tryUpdateDetails(form);\r\n                  } else {\r\n                    alert('An unknown error occurred while attempting to update your details (4). Please try again later');\r\n                  }\r\n                } else {\r\n                  alert('An unknown error occurred while attempting to update your details (5). Please try again later');\r\n                }\r\n              }\r\n            });\r\n          });\r\n        } else {\r\n          alert('An unknown error occurred while attempting to update your details (6). Please try again later');\r\n        }\r\n      } else {\r\n        alert('An unknown error occurred while attempting to enter the competition. Please try again later');\r\n      }\r\n    }\r\n  }\r\n\r\n  completeUpdateDetails(form, details) {\r\n    var frm = $(form);\r\n\r\n    var newemail = frm.find('input#myAccount__email').val();\r\n    if (newemail.trim() === details.registration_email) {\r\n      newemail = '';\r\n    }\r\n\r\n    var categories = '';\r\n    frm.find('#glb-youraccount-categories input:checked').each((index, item) => {\r\n      if (categories.length > 0) {\r\n        categories += ',';\r\n      }\r\n      categories += $(item).val();\r\n    });\r\n\r\n    var data = {\r\n      token: details.token,\r\n\r\n      firstname: frm.find('input#myAccount__firstName').val(),\r\n      lastname: frm.find('input#myAccount__lastName').val(),\r\n      username: details.registration_email,\r\n      newusername: newemail,\r\n\r\n      password: frm.find('input#myAccount__currentPassword').val(),\r\n      newpassword: frm.find('input#myAccount__newPassword').val(),\r\n\r\n      position: frm.find('input#myAccount__position').val(),\r\n      contact: frm.find('input#myAccount__phoneNumber').val(),\r\n      size: frm.find('select#myAccount__businessSize').val(),\r\n      sector: frm.find('select#myAccount__businessSector').val(),\r\n\r\n      tcagree: frm.find('input#checkboxIdTCMessage').is(':checked'),\r\n\r\n      cats: categories\r\n    };\r\n\r\n    if (($.trim(data.firstname).length === 0) || ($.trim(data.lastname).length === 0) || ($.trim(data.username).length === 0)) {\r\n      alert('Please enter your name, email address and personal details.');\r\n    } else {\r\n      frm.find(\"button[type='submit'].update-btn\").text('please wait...');\r\n      frm.find('input.forms__cta--red').val('please wait...');\r\n\r\n      $.get(this.config.urlToken, (tokenresponse) => {\r\n        var csrftoken = tokenresponse.token;\r\n        $.ajax({\r\n          url: this.config.urlUpdateDetails,\r\n          data: data,\r\n          type: 'post',\r\n          headers: { 'CSRF-Token': csrftoken },\r\n          dataType: 'json',\r\n          success: (updateDetailsResponse) => {\r\n            if (updateDetailsResponse) {\r\n              $(window).trigger('checkauthtokens.DHL', [ updateDetailsResponse, true ]);\r\n\r\n              if (updateDetailsResponse.status === 'ok') {\r\n                frm.find('.myAccount__message').show();\r\n\r\n                if (data.newpassword.length > 0) {\r\n                  frm.find('input#myAccount__email').removeAttr('readonly');\r\n                  frm.find('.useraccount-currentpassword').show();\r\n                }\r\n                frm.find('input#myAccount__currentPassword').val('');\r\n                frm.find('input#myAccount__newPassword').val('');\r\n                frm.find('input#myAccount__confirmPassword').val('');\r\n\r\n                $('header .header__auth--loggedin .user-firstname').text(data.firstname);\r\n                $('.competitionDataCapture.logged-in .loggedin-name').text(data.firstname);\r\n                $(window).scrollTop(0);\r\n              } else {\r\n                alert('An error occurred while attempting to update your details.\\n' + updateDetailsResponse.error);\r\n              }\r\n            } else {\r\n              alert('An unknown error occurred while attempting to update your details. Please try again later');\r\n            }\r\n            frm.find(\"button[type='submit'].update-btn\").text('Update');\r\n            frm.find('input.forms__cta--red').val('Update');\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    frm.find(\"button[type='submit'].update-btn\").text('Update');\r\n    frm.find('input.forms__cta--red').val('Update');\r\n  }\r\n\r\n  loggedIn(tokenData) {\r\n    if (tokenData && tokenData.status && tokenData.status === 'ok') {\r\n      $.get(this.config.urlToken, (tokenresponse) => {\r\n        var csrftoken = tokenresponse.token;\r\n\r\n        $.ajax({\r\n          url: this.config.urlGetAllDetails,\r\n          data: { username: tokenData.username, token: tokenData.token },\r\n          type: 'post',\r\n          headers: { 'CSRF-Token': csrftoken },\r\n          dataType: 'json',\r\n          success: (allDetailsResponse) => {\r\n            if (allDetailsResponse) {\r\n              if (allDetailsResponse.status === 'ok') {\r\n                var componentForm = $(this.sel.component);\r\n                $(window).trigger('checkauthtokens.DHL', [ allDetailsResponse, true ]);\r\n\r\n                componentForm.find('.loggedin-username').text(allDetailsResponse.registration_firstname);\r\n\r\n                componentForm.find('input#myAccount__firstName').val(allDetailsResponse.registration_firstname);\r\n                componentForm.find('input#myAccount__lastName').val(allDetailsResponse.registration_lastname);\r\n                componentForm.find('input#myAccount__email').val(allDetailsResponse.registration_email);\r\n\r\n                componentForm.find('input#myAccount__position').val(allDetailsResponse.registration_position);\r\n                componentForm.find('input#myAccount__phoneNumber').val(allDetailsResponse.registration_contact);\r\n\r\n                componentForm.find('select#myAccount__businessSize').val(allDetailsResponse.registration_size);\r\n                componentForm.find('select#myAccount__businessSector').val(allDetailsResponse.registration_sector);\r\n\r\n                if (allDetailsResponse.registration_tcagree === 'true') {\r\n                  componentForm.find('input#checkboxIdTCMessage').prop('checked', true);\r\n                } else {\r\n                  componentForm.find('input#checkboxIdTCMessage').prop('checked', false);\r\n                }\r\n\r\n                componentForm.find('#glb-youraccount-categories input[type=\"checkbox\"]').prop('checked', false);\r\n                var categories = allDetailsResponse.registration_cats.split(',');\r\n                for (var i = 0; i < categories.length; i++) {\r\n                  componentForm.find('#glb-youraccount-categories input[type=\"checkbox\"][value=\"' + categories[i] + '\"]').prop('checked', true);\r\n                }\r\n\r\n                if (allDetailsResponse.registration_islinkedin === 'false') {\r\n                  if (allDetailsResponse.full !== false) {\r\n                    componentForm.find('.useraccount-currentpassword').show();\r\n                  }\r\n                } else {\r\n                  componentForm.find('input#myAccount__email').attr('readonly', 'readonly');\r\n                }\r\n\r\n                componentForm.closest('.page-body-wrapper').removeClass('awaiting');\r\n                componentForm.show();\r\n              } else {\r\n                alert('An unknown error occurred while attempting to display your details. Please try again later');\r\n              }\r\n            } else {\r\n              alert('An unknown error occurred while attempting to display your details. Please try again later');\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  notLoggedIn() {\r\n    if ($(this.sel.component).hasClass('no-redirect')) {\r\n      $(this.sel.component).show();\r\n    } else {\r\n      window.location = '/content/dhl.html';\r\n    }\r\n  }\r\n}\r\n\r\nexport default new LoginForm();\r\n\r\n","// Import components\r\nimport Header from './Components/Header';\r\nimport BootstrapCarousel from './Components/BootstrapCarousel';\r\nimport ArticleGrid from './Components/ArticleGrid';\r\nimport SubscribePanel from './Components/SubscribePanel';\r\nimport Password from './Components/Password';\r\nimport PasswordValidity from './Components/PasswordValidity';\r\nimport FormValidation from './Components/FormValidation';\r\nimport ShowHide from './Components/ShowHide';\r\nimport CookieBanner from './Components/CookieBanner';\r\nimport SearchForm from './Components/SearchForm';\r\nimport EcomForms from './Components/EcomForms';\r\nimport ShipForm from './Components/ShipForm';\r\nimport IEDetector from './Components/IEDetector';\r\nimport Social from './Components/Social';\r\nimport Hero from './Components/Hero';\r\nimport AuthenticationEvents from './Components/AuthenticationEvents';\r\nimport DeleteAccountForm from './Components/DeleteAccountForm';\r\nimport LoginForm from './Components/LoginForm';\r\nimport PasswordReminderForm from './Components/PasswordReminderForm';\r\nimport RegisterForm from './Components/RegisterForm';\r\nimport YourAccountForm from './Components/YourAccountForm';\r\nimport ShipNowForm from './Components/ShipNowForm';\r\nimport ShipNowTwoStepForm from './Components/ShipNowTwoStepForm';\r\nimport CompetitionForm from './Components/CompetitionForm';\r\nimport ServiceWorker from './Components/ServiceWorker';\r\nimport Offline from './Components/Offline';\r\nimport LandingPoints from './Components/LandingPoints';\r\nimport BackButton from './Components/BackButton';\r\n\r\n$(document).ready(() => {\r\n  try {\r\n    document.createEvent('TouchEvent');\r\n    $('body').addClass('touch');\r\n  } catch (e) {\r\n    // nothing\r\n  }\r\n  // Initiate components\r\n  IEDetector.init();\r\n  Header.init();\r\n  BootstrapCarousel.init();\r\n  ArticleGrid.init();\r\n  SubscribePanel.init();\r\n  Password.init();\r\n  PasswordValidity.init();\r\n  // FormValidation.init();\r\n  ShowHide.init();\r\n  CookieBanner.init();\r\n  SearchForm.init();\r\n  EcomForms.init();\r\n  ShipForm.init();\r\n  Social.init();\r\n  Hero.init();\r\n  CompetitionForm.init();\r\n  ShipNowForm.init();\r\n  ShipNowTwoStepForm.init();\r\n  YourAccountForm.init();\r\n  RegisterForm.init();\r\n  PasswordReminderForm.init();\r\n  LoginForm.init();\r\n  DeleteAccountForm.init();\r\n  AuthenticationEvents.init();\r\n  ServiceWorker.init();\r\n  Offline.init();\r\n  LandingPoints.init();\r\n  BackButton.init();\r\n});\r\n"]}