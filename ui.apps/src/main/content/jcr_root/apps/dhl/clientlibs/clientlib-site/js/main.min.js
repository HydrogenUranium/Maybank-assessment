!function(){function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return o(t[s][1][e]||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}return e}()({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.getPathPrefix=this.getPathPrefix.bind(this),this.init=this.init.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"init",value:function(){var e=$(".page-body.article-counter");if(e.length>0){var t=e.data("path");if($.trim(t).length>0){var n={p:t};$.post(this.getPathPrefix()+"/apps/dhl/discoverdhlapi/counter/index.json",n)}}}}]),e}();n.default=new r},{}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;i(this,e),this.endpoint=t,this.pageSize=n,this.skip=0,this.doRequest=this.doRequest.bind(this),this.search=this.search.bind(this),this.loadMore=this.loadMore.bind(this)}return o(e,[{key:"doRequest",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$.get(this.endpoint,{skip:this.skip,pageSize:this.pageSize,keyword:n},function(n){t.skip+=n.Items.length,e(n)})}},{key:"search",value:function(e,t){this.skip=0,this.doRequest(e,t)}},{key:"loadMore",value:function(e){this.doRequest(e)}}]),e}(),s=function(){function e(){i(this,e),this.loading=!1,this.hasmore=!0,this.sel={component:".articleGrid",grid:".articleGrid__grid",loadMore:".articleGrid__loadMore",template:"#articleGrid__panelTemplate",nav:".articleGrid__nav"},this.template=$($(this.sel.template).html()),this.bindEvents=this.bindEvents.bind(this),this.loadMore=this.loadMore.bind(this),this.populateTemplates=this.populateTemplates.bind(this),this.init=this.init.bind(this),this.showSpinner=this.showSpinner.bind(this),this.hideSpinner=this.hideSpinner.bind(this),this.scrollnav=this.scrollnav.bind(this),this.scrollleft=this.scrollleft.bind(this),this.scrollright=this.scrollright.bind(this),this.checkScroll=this.checkScroll.bind(this),this.pageScroll=this.pageScroll.bind(this)}return o(e,[{key:"bindEvents",value:function(){$(window).on("scroll",this.pageScroll),$(document).on("click",this.sel.loadMore,this.loadMore),$(document).on("click",".scrollleft",this.scrollleft),$(document).on("click",".scrollright",this.scrollright),this.pageScroll()}},{key:"pageScroll",value:function(){if(this.hasmore&&!this.loading){var e=$(window),t=$(this.sel.loadMore);if(t&&$(t).length>0){e.scrollTop()+e.height()>t.offset().top+t.outerHeight()&&this.loadMore()}}}},{key:"loadMore",value:function(e){e&&e.preventDefault(),this.loading=!0,this.showSpinner();var t=0;$(".articleGrid__item",this.sel.component).each(function(e,n){t<6&&!$(n).is(":visible")&&($(n).show(),t++)}),$(".articleGrid__item",this.sel.component).length===$(".articleGrid__item:visible",this.sel.component).length&&($(this.sel.loadMore).parents(".row").first().remove(),this.hasmore=!1),this.hideSpinner(),this.loading=!1}},{key:"showSpinner",value:function(){$(this.sel.loadMore).addClass("articleGrid__loadMore--loading")}},{key:"hideSpinner",value:function(){$(this.sel.loadMore).removeClass("articleGrid__loadMore--loading")}},{key:"scrollnav",value:function(){var e=document.querySelector(this.sel.nav);if(null!==e){e.scrollWidth>e.clientWidth&&$(this.sel.nav).after('<i class="scrollright">></i>')}}},{key:"scrollright",value:function(){var e=this.sel.nav,t=document.querySelector(e).scrollWidth;$(e).animate({scrollLeft:t+"px"},500,function(){$(".scrollright").remove(),$(e).before('<i class="scrollleft"><</i>')})}},{key:"scrollleft",value:function(){var e=this.sel.nav;$(e).animate({scrollLeft:0},500,function(){$(".scrollleft").remove(),$(e).after('<i class="scrollright">></i>')})}},{key:"checkScroll",value:function(){var e=document.querySelector(this.sel.nav);if(null!==e){var t=e.scrollWidth,n=e.clientWidth,i=t-n;$(self).scroll(function(){0===this.scrollLeft&&($(".scrollleft").remove(),$(self).after('<i class="scrollright">></i>')),this.scrollLeft>=i&&($(".scrollright").remove(),$(self).before('<i class="scrollleft"><</i>'))})}}},{key:"populateTemplates",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=this.template.clone(),o=e[n],r=992,s=Math.random().toString(36).substr(2,9);i.find(".articlePanel").attr("id",s),o.IsLarge&&(r=768,i.find(".articlePanel").addClass("articlePanel--large")),o.IsVideo&&i.find(".articlePanel").addClass("articlePanel--video"),i.find(".articlePanel__image").attr({href:o.Link,title:o.Title}).attr("style","background-image: url("+o.Images.Mobile+");"),i.find("style")[0].innerHTML="@media screen and (min-width: "+r+"px){#"+s+" .articlePanel__image{background-image: url("+o.Images.Desktop+") !important;}}",i.find(".articlePanel__content > a").attr({href:o.Link,title:o.Title}),i.find(".articlePanel__title").text(o.Title),i.find(".articlePanel__description").text(o.Description),i.find(".articlePanel__subTitle a:first-child").attr({href:o.Category.Link,title:o.Category.Name}).text(o.Category.Name),i.find(".articlePanel__subTitle a:last-child").attr({href:o.Link,title:o.Title}).text(o.TimeToRead),t.push(i)}return t}},{key:"init",value:function(){if($(this.sel.component).length<=0)return!1;var e=$(this.sel.component).attr("data-endpoint");return this.API=new r(e),this.scrollnav(),this.bindEvents(),this.checkScroll(),!0}}]),e}();n.default=new s},{}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.config={urlToken:"/libs/granite/csrf/token.json",urlCheck:"/apps/dhl/discoverdhlapi/check/index.json",urlRefreshCheck:"/apps/dhl/discoverdhlapi/refresh_token/index.json",urlDownloadAsset:"/apps/dhl/discoverdhlapi/download_asset/index.json"},this.getPathPrefix=this.getPathPrefix.bind(this),this.getPathHome=this.getPathHome.bind(this),this.init=this.init.bind(this),this.readCookie=this.readCookie.bind(this),this.clearCookie=this.clearCookie.bind(this),this.createCookie=this.createCookie.bind(this),this.checkLoginStatus=this.checkLoginStatus.bind(this),this.checkAuthTokens=this.checkAuthTokens.bind(this),this.showLoggedInElements=this.showLoggedInElements.bind(this),this.showNotLoggedInElements=this.showNotLoggedInElements.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"getPathHome",value:function(){var e=$("head meta[name='dhl-path-home']").attr("content");return e||""}},{key:"init",value:function(){var e=this;$(window).on("checkauthtokens.DHL",function(t,n,i){e.checkAuthTokens(n,i)}),$(window).on("userloggedin.DHL",function(t,n){e.showLoggedInElements(n)}),$(window).on("usernotloggedin.DHL",function(){e.showNotLoggedInElements()});var t=$(".footer .footer__ctas--loggedin");t.length>0&&t.on("click",".logout-link",function(){return e.clearCookie("DHL.AuthToken"),e.clearCookie("DHL.RefreshToken"),location.reload(),!1}),this.checkLoginStatus()}},{key:"readCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}},{key:"clearCookie",value:function(e){this.createCookie(e,"",-1)}},{key:"createCookie",value:function(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+1e3*n),i="; expires="+o.toUTCString()}document.cookie=e+"="+t+i+"; path=/"}},{key:"checkLoginStatus",value:function(){var e=this.readCookie("DHL.AuthToken");if(null!==e){var t=e.split("|");t.length>=2?this.callTokenCheck(this.getPathPrefix()+this.config.urlCheck,{username:t[0],token:t[1]}):$(window).trigger("usernotloggedin.DHL")}else{var n=this.readCookie("DHL.RefreshToken");if(null!==n){var i=n.split("|");i.length>=2?this.callTokenCheck(this.getPathPrefix()+this.config.urlRefreshCheck,{username:i[0],refresh_token:i[1]}):$(window).trigger("usernotloggedin.DHL")}else $(window).trigger("usernotloggedin.DHL")}}},{key:"callTokenCheck",value:function(e,t){var n=this;$.get(this.getPathPrefix()+this.config.urlToken,function(i){var o=i.token;$.ajax({url:e,data:t,type:"post",headers:{"CSRF-Token":o},dataType:"json",success:function(e){n.checkAuthTokens(e,!1)}})})}},{key:"checkAuthTokens",value:function(e,t){if(e&&e.status&&"ok"===e.status)return this.createCookie("DHL.AuthToken",e.username+"|"+e.token,e.ttl),this.createCookie("DHL.RefreshToken",e.username+"|"+e.refresh_token,86400),void(!0!==t&&$(window).trigger("userloggedin.DHL",e));!0!==t&&$(window).trigger("usernotloggedin.DHL")}},{key:"showLoggedInElements",value:function(e){var t=this;if($(".below-register-form .tab.mobile").hide(),$(".below-register-form #register-tab-1").hide(),$(".below-register-form .tab-contents .tab-content[data-rel='#register-tab-1']").removeClass("open"),$(".below-register-form #register-tab-2").addClass("active").show(),$(".below-register-form .tab-contents .tab-content[data-rel='#register-tab-2']").addClass("open"),$(".below-register-form").show(),$("header .header__desktopLinkItem.logged-in .user-firstname, header .header__primaryLinks .user-firstname").text(e.name),$("header .header__desktopLinkItem.logged-in, header .header__primaryLinks.logged-in").show(),$(".footer .logout-links").show(),$(".competitionDataCapture.logged-in").show(),$(".competitionDataCapture.logged-in .loggedin-name").text(e.name),$(".cta-third-panel-loggedin").show(),$(".gated").addClass("unlocked").removeClass("locked").each(function(e,t){$(t).closest("body").find(".hero .hero__cta--grey").show()}),$(".gated-hide").addClass("unlocked").removeClass("locked"),$(".articleGrid .article-grid-item-loggedin").show(),!1===e.full&&($(".create-password").find(".create-password-name").text(e.name),$(window).trigger("show.CreatePasswordModal.DHL")),$(".reset-password-container").length>0&&(window.location=this.getPathHome()+".html"),$(".page-body.register").length>0&&(window.location=this.getPathHome()+"/your-account.html"),$(".gatingArticle__actions.logged-in").length>0){var n=$(".gatingArticle__actions.logged-in");$.get(this.getPathPrefix()+this.config.urlToken,function(e){var i=e.token;$.ajax({url:t.getPathPrefix()+t.config.urlDownloadAsset,data:{assetinfo:n.data("assetinfo")},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(e){"ok"===e.status&&(n.find(".gatingArticle__button").attr("href",e.href),n.show())}})})}if($("#download .DHLdownload__ctas.logged-in").length>0){var i=$("#download .DHLdownload__ctas.logged-in");$.get(this.getPathPrefix()+this.config.urlToken,function(e){var n=e.token;$.ajax({url:t.getPathPrefix()+t.config.urlDownloadAsset,data:{assetinfo:i.data("assetinfo")},type:"post",headers:{"CSRF-Token":n},dataType:"json",success:function(e){"ok"===e.status&&(i.find(".DHLdownload__cta--red").attr("href",e.href),i.show())}})})}}},{key:"showNotLoggedInElements",value:function(){$(".below-register-form .tab-container #register-tab-1").addClass("active").show(),$(".below-register-form .tab-contents .tab-content[data-rel='#register-tab-1']").addClass("open"),$(".below-register-form #register-tab-2").removeClass("active").show(),$(".below-register-form .tab-contents .tab-content[data-rel='#register-tab-2']").removeClass("open"),$(".below-register-form").show(),$("header .header__desktopLinkItem.logged-out, header .header__primaryLinks.logged-out").show(),$(".footer .login-links").show(),$(".gatingArticle__actions.no-logged-in").show(),$("#download .DHLdownload__ctas.no-logged-in").show(),$(".competitionDataCapture.not-logged-in").show(),$(".article-page-login-cta").show(),$(".gated").addClass("locked").removeClass("unlocked").each(function(e,t){$(t).closest("body").find(".hero .hero__cta--grey").hide()}),$(".gated-hide").addClass("locked").removeClass("unlocked"),null!==this.readCookie("DHL.NewsletterSubscribed")?$(".articleGrid .article-grid-item-loggedin").show():($(".articleGrid .article-grid-item-subscribe").show(),$(".subscribePanel").show())}}]),e}();n.default=new r},{}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".backButton",backButton:".backButton__button--back",forwardButton:".backButton__button--forward"},this.init=this.init.bind(this),this.showButton=this.showButton.bind(this),this.bindEvents=this.bindEvents.bind(this),this.goBack=this.goBack.bind(this),this.goForward=this.goForward.bind(this),this.initHeadroom=this.initHeadroom.bind(this)}return o(e,[{key:"showButton",value:function(){$(this.sel.component).addClass("backButton--show")}},{key:"bindEvents",value:function(){$(document).on("click",this.sel.backButton,this.goBack),$(document).on("click",this.sel.forwardButton,this.goForward)}},{key:"goBack",value:function(e){e.preventDefault(),history.back(-1)}},{key:"goForward",value:function(e){e.preventDefault(),history.forward()}},{key:"initHeadroom",value:function(){var e=$(this.sel.component)[0];new Headroom(e,{classes:{initial:"backButton",pinned:"backButton--pinned",unpinned:"backButton--unpinned",top:"backButton--top",notTop:"backButton--not-top",bottom:"backButton--bottom",notBottom:"backButton--not-bottom"}}).init()}},{key:"init",value:function(){(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(this.bindEvents(),this.showButton(),this.initHeadroom())}}]),e}();n.default=new r},{}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".carousel",items:".carousel-item",link:".categoryHero__link"},this.init=this.init.bind(this),this.checkNumberSlides=this.checkNumberSlides.bind(this),this.touchSwipeCarousel=this.touchSwipeCarousel.bind(this)}return o(e,[{key:"checkNumberSlides",value:function(){var e=this;$(this.sel.component).each(function(t,n){$(n).find(e.sel.items).length<=1&&$(n).addClass("static")})}},{key:"touchSwipeCarousel",value:function(){var e=this,t=!1;$(this.sel.component).swipe({swipe:function(n,i){var o=$(n.target).is(e.sel.component)?$(n.target):$(n.target).parents(e.sel.component);t=!0,"left"===i?o.carousel("next"):"right"===i&&o.carousel("prev")},tap:function(e){if($(".categoryHero__link").length&&window.innerWidth<992){var t=$(e.target).parents(".categoryHero__link").first().attr("data-href");""!==t&&(window.location=t)}},allowPageScroll:"vertical"}),$(this.sel.link).on("click",function(){if(!t){var e=$(this).attr("data-href");""!==e&&(window.location=e)}t=!1})}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.touchSwipeCarousel(),this.checkNumberSlides(),!0)}}]),e}();n.default=new r},{}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.config={urlToken:"/libs/granite/csrf/token.json",urlRefreshCheck:"/apps/dhl/discoverdhlapi/refresh_token/index.json",urlGetAllDetails:"/apps/dhl/discoverdhlapi/getdetails/index.json",urlCompetition:"/apps/dhl/discoverdhlapi/competition/index.json"},this.sel={component:".competitionDataCapture form"},this.getPathPrefix=this.getPathPrefix.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.readCookie=this.readCookie.bind(this),this.validate=this.validate.bind(this),this.tryCompetitionEntryLoggedIn=this.tryCompetitionEntryLoggedIn.bind(this),this.tryCompetitionEntryNotLoggedIn=this.tryCompetitionEntryNotLoggedIn.bind(this),this.completeCompetitionEntryLoggedIn=this.completeCompetitionEntryLoggedIn.bind(this)}return o(e,[{key:"bindEvents",value:function(){}},{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"readCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),this.validate(),!0)}},{key:"validate",value:function(){var e=this,t=$(this.sel.component);t.length>0&&t.each(function(t,n){$(n).closest(".competitionDataCapture").hasClass("not-logged-in")?$(n).validate({rules:{register__yourEmail:"email"},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):(t.attr("type"),e.insertAfter($(t).parent()))},submitHandler:function(t){return e.tryCompetitionEntryNotLoggedIn(t),!1}}):$(n).validate({errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):(t.attr("type"),e.insertAfter($(t).parent()))},submitHandler:function(t){return e.tryCompetitionEntryLoggedIn(t),!1}})})}},{key:"tryCompetitionEntryNotLoggedIn",value:function(e){var t=this,n=$(e),i={};if(0===n.find(".comp-answer").length){var o=n.find("input[type='radio']:checked").val();if(null===o||0===o.length)return void alert("Please select an option");i={firstname:n.find("input#register__firstName").val(),lastname:n.find("input#register__lastName").val(),email:n.find("input#register__yourEmail").val(),position:n.find("input#register__position").val(),contact:n.find("input#register__contactNumber").val(),size:n.find("select#register__businessSize").val(),sector:n.find("select#register__businessSector").val(),path:n.data("path"),answer:o}}else i={firstname:n.find("input#register__firstName").val(),lastname:n.find("input#register__lastName").val(),email:n.find("input#register__yourEmail").val(),position:n.find("input#register__position").val(),contact:n.find("input#register__contactNumber").val(),size:n.find("select#register__businessSize").val(),sector:n.find("select#register__businessSector").val(),path:n.data("path")},n.find(".comp-answer").each(function(e,t){var n=$(t).val();1===$(t).data("index")?i.answer=n:i["answer"+$(t).data("index")]=n});0===$.trim(i.firstname).length||0===$.trim(i.lastname).length||0===$.trim(i.email).length?alert("Please enter your name, email address and competition details."):(n.find("button[type='submit']").text("please wait..."),n.find("input[type='submit']").val("please wait..."),$.get(this.getPathPrefix()+this.config.urlToken,function(e){var o=e.token;$.ajax({url:t.getPathPrefix()+t.config.urlCompetition,data:i,type:"post",headers:{"CSRF-Token":o},dataType:"json",success:function(e){if(e)if("ok"===e.status){var t=n.closest(".competition-container").find(".modal");t.find(".thanks-name").text(i.firstname),t.show().addClass("show"),n.closest(".competitionDataCapture").hide()}else alert("An error occurred while attempting to enter the competition.\n"+e.error);else alert("An unknown error occurred while attempting to enter the competition. Please try again later");n.find("button[type='submit']").text("Enter the competition"),n.find("input[type='submit']").val("Enter the competition")}})}))}},{key:"tryCompetitionEntryLoggedIn",value:function(e){var t=this,n=$(e);n.find("button[type='submit']").text("please wait..."),n.find("input[type='submit']").val("please wait...");var i=this.readCookie("DHL.AuthToken");if(null!==i){var o=i.split("|");o.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(n){var i=n.token;$.ajax({url:t.getPathPrefix()+t.config.urlGetAllDetails,data:{username:o[0],token:o[1]},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(n){n&&"ok"===n.status?t.completeCompetitionEntryLoggedIn(e,n):alert("An unknown error occurred while attempting to enter the competition. Please try again later")}})}):alert("An unknown error occurred while attempting to enter the competition. Please try again later")}else{var r=this.readCookie("DHL.RefreshToken");if(null!==r){var s=r.split("|");s.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(n){var i=n.token;$.ajax({url:t.getPathPrefix()+t.config.urlRefreshCheck,data:{username:s[0],refresh_token:s[1]},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(n){n&&"ok"===n.status?($(window).trigger("checkauthtokens.DHL",[n,!0]),t.tryCompetitionEntryLoggedIn(e)):alert("An unknown error occurred while attempting to enter the competition. Please try again later")}})}):alert("An unknown error occurred while attempting to enter the competition. Please try again later")}else alert("An unknown error occurred while attempting to enter the competition. Please try again later")}}},{key:"completeCompetitionEntryLoggedIn",value:function(e,t){var n=this,i=$(e),o="";if(i.find(".comp-answer").length>0)o=i.find(".comp-answer").val();else if(null===(o=i.find("input[type='radio']:checked").val())||0===o.length)return alert("Please select an option"),i.find("button[type='submit']").text("Enter the competition "+t.registration_firstname),void i.find("input[type='submit']").val("Enter the competition "+t.registration_firstname);var r={firstname:t.registration_firstname,lastname:t.registration_lastname,email:t.registration_email,position:t.registration_position,contact:t.registration_contact,size:t.registration_size,sector:t.registration_sector,path:i.data("path"),answer:o};0===$.trim(r.answer).length||0===$.trim(r.firstname).length||0===$.trim(r.lastname).length||0===$.trim(r.email).length?alert("Please enter your name, email address and competition details."):(i.find("button[type='submit']").text("please wait..."),i.find("input[type='submit']").val("please wait..."),$.get(this.getPathPrefix()+this.config.urlToken,function(e){var t=e.token;$.ajax({url:n.getPathPrefix()+n.config.urlCompetition,data:r,type:"post",headers:{"CSRF-Token":t},dataType:"json",success:function(e){if(e)if("ok"===e.status){var t=i.closest(".competition-container").find(".modal");t.find(".thanks-name").text(r.firstname),t.show().addClass("show"),i.closest(".competitionDataCapture").hide()}else alert("An error occurred while attempting to enter the competition.\n"+e.error);else alert("An unknown error occurred while attempting to enter the competition. Please try again later");i.find("button[type='submit']").text("Enter the competition "+r.firstname),i.find("input[type='submit']").val("Enter the competition "+r.firstname)}})})),i.find("button[type='submit']").text("Enter the competition"),i.find("input[type='submit']").val("Enter the competition")}}]),e}();n.default=new r},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={IDB:{DB:"offline-articles",ARTICLES_STORE:"articles"}}},{}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".cookie-banner",closeButton:".cookie-banner__button"},this.cookieName="dhl-cookie-warning",this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.hideCookieBanner=this.hideCookieBanner.bind(this),this.showCookieBanner=this.showCookieBanner.bind(this),this.displayBanner=this.displayBanner.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),this.displayBanner(),!0)}},{key:"bindEvents",value:function(){var e=this;$(document).on("click",this.sel.closeButton,function(){e.hideCookieBanner(),Cookies.set(e.cookieName,{seen:1})})}},{key:"displayBanner",value:function(){void 0===Cookies.get(this.cookieName)&&this.showCookieBanner()}},{key:"showCookieBanner",value:function(){$(this.sel.component).addClass("cookie-banner--display")}},{key:"hideCookieBanner",value:function(){$(this.sel.component).removeClass("cookie-banner--display"),$(this.sel.component).remove()}}]),e}();n.default=new r},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./Constants"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(){i(this,e),this.database=null,this.initiateDb=this.initiateDb.bind(this),this.addArticle=this.addArticle.bind(this),this.deleteArticle=this.deleteArticle.bind(this),this.getArticles=this.getArticles.bind(this),window.Promise&&this.initiateDb()}return o(e,[{key:"initiateDb",value:function(){this.database=idb.open(s.default.IDB.DB,1,function(e){if(!e.objectStoreNames.contains(s.default.IDB.ARTICLES_STORE)){var t=e.createObjectStore(s.default.IDB.ARTICLES_STORE,{keyPath:"link"});t.createIndex("title","title",{unique:!1}),t.createIndex("link","link",{unique:!0}),t.createIndex("description","description",{unique:!1}),t.createIndex("categoryName","categoryName",{unique:!1}),t.createIndex("categoryLink","categoryLink",{unique:!1}),t.createIndex("timeToRead","timeToRead",{unique:!1}),t.createIndex("imageMobile","imageMobile",{unique:!1}),t.createIndex("imageDesktop","imageDesktop",{unique:!1}),t.createIndex("isLarge","isLarge",{unique:!1}),t.createIndex("isVideo","isVideo",{unique:!1}),t.createIndex("cacheName","cacheName",{unique:!1})}})}},{key:"deleteArticle",value:function(e){return this.database.then(function(t){var n=t.transaction([s.default.IDB.ARTICLES_STORE],"readwrite"),i=n.objectStore(s.default.IDB.ARTICLES_STORE);return Promise.all([i.delete(e),n.complete])})}},{key:"addArticle",value:function(e,t,n,i,o,r,a,l,c,u,d){return this.database.then(function(h){var f=h.transaction([s.default.IDB.ARTICLES_STORE],"readwrite"),m=f.objectStore(s.default.IDB.ARTICLES_STORE);return Promise.all([m.add({title:e,link:t,description:n,categoryName:i,categoryLink:o,timeToRead:r,imageMobile:a,imageDesktop:l,isLarge:c,isVideo:u,cacheName:d}),f.complete])})}},{key:"getArticles",value:function(){return this.database.then(function(e){return e.transaction([s.default.IDB.ARTICLES_STORE],"readonly").objectStore(s.default.IDB.ARTICLES_STORE).getAll()})}}]),e}();n.default=new a},{"./Constants":7}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.config={urlToken:"/libs/granite/csrf/token.json",urlRefreshCheck:"/apps/dhl/discoverdhlapi/refresh_token/index.json",urlGetAllDetails:"/apps/dhl/discoverdhlapi/getdetails/index.json",urlDeleteAccount:"/apps/dhl/discoverdhlapi/deleteaccount/index.json"},this.sel={component:".delete-account"},this.getPathPrefix=this.getPathPrefix.bind(this),this.getPathHome=this.getPathHome.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.readCookie=this.readCookie.bind(this),this.clearCookie=this.clearCookie.bind(this),this.createCookie=this.createCookie.bind(this),this.tryDeleteAccount=this.tryDeleteAccount.bind(this),this.completeDeleteAccount=this.completeDeleteAccount.bind(this),this.loggedIn=this.loggedIn.bind(this),this.notLoggedIn=this.notLoggedIn.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"getPathHome",value:function(){var e=$("head meta[name='dhl-path-home']").attr("content");return e||""}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;jQuery.validator.addMethod("password",function(e,t){return new RegExp($(t).attr("pattern")).test(e)},"Password format is not valid"),jQuery.validator.addMethod("equalTo",function(e,t){return $("#"+$(t).attr("data-equalTo")).val()===$(t).val()},"Passwords do not match"),$(window).on("userloggedin.DHL",function(t,n){e.loggedIn(n)}),$(window).on("usernotloggedin.DHL",function(){e.notLoggedIn()}),$(this.sel.component).find("form").validate({rules:{login__firstName:"email",login__password:"password"},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):"search"===t.attr("type")?e.insertAfter($(t).parent()):e.insertAfter(t)},submitHandler:function(t){return e.tryDeleteAccount(t),!1}})}},{key:"readCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}},{key:"clearCookie",value:function(e){this.createCookie(e,"",-1)}},{key:"createCookie",value:function(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+1e3*n),i="; expires="+o.toUTCString()}document.cookie=e+"="+t+i+"; path=/"}},{key:"tryDeleteAccount",value:function(e){var t=this,n=$(e);n.find("button[type='submit']").text("please wait..."),n.find("input.forms__cta--red").val("please wait...");var i=this.readCookie("DHL.AuthToken")
;if(null!==i){var o=i.split("|");o.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(n){var i=n.token;$.ajax({url:t.getPathPrefix()+t.config.urlGetAllDetails,data:{username:o[0],token:o[1]},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(n){n?"ok"===n.status?($(window).trigger("checkauthtokens.DHL",[n,!0]),t.completeDeleteAccount(e,n)):alert("An unknown error occurred while attempting to delete your account (1). Please try again later"):alert("An unknown error occurred while attempting to delete your account (2). Please try again later")}})}):alert("An unknown error occurred while attempting to delete your account (3). Please try again later")}else{var r=this.readCookie("DHL.RefreshToken");if(null!==r){var s=r.split("|");s.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(n){var i=n.token;$.ajax({url:t.getPathPrefix()+t.config.urlRefreshCheck,data:{username:s[0],refresh_token:s[1]},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(n){n?"ok"===n.status?($(window).trigger("checkauthtokens.DHL",[n,!0]),t.tryDeleteAccount(e)):alert("An unknown error occurred while attempting to delete your account (4). Please try again later"):alert("An unknown error occurred while attempting to delete your account (5). Please try again later")}})}):alert("An unknown error occurred while attempting to delete your account (6). Please try again later")}else alert("An unknown error occurred while attempting to delete your account. Please try again later")}}},{key:"completeDeleteAccount",value:function(e,t){var n=this,i=$(e),o={token:t.token,username:i.find("input#login__firstName").val(),password:i.find("input#login__password").val()};0==$.trim(o.username).length||0==$.trim(o.password).length?alert("Please enter your email address and password."):(i.find("button[type='submit']").text("please wait..."),i.find("input.forms__cta--red").val("please wait..."),$.get(this.getPathPrefix()+this.config.urlToken,function(e){var t=e.token;$.ajax({url:n.getPathPrefix()+n.config.urlDeleteAccount,data:o,type:"post",headers:{"CSRF-Token":t},dataType:"json",success:function(e){e?($(window).trigger("checkauthtokens.DHL",[e,!0]),"ok"===e.status?(n.clearCookie("DHL.AuthToken"),n.clearCookie("DHL.RefreshToken"),window.location=i.data("successurl")):alert("An error occurred while attempting to delete your account.\n"+e.error)):alert("An unknown error occurred while attempting to delete your account. Please try again later"),i.find("button[type='submit']").text("Delete Account"),i.find("input.forms__cta--red").val("Delete Account")}})})),i.find("button[type='submit']").text("Delete Account"),i.find("input.forms__cta--red").val("Delete Account")}},{key:"loggedIn",value:function(e){e&&e.status&&"ok"===e.status&&$(this.sel.component).show()}},{key:"notLoggedIn",value:function(){$(this.sel.component).hasClass("no-redirect")?$(this.sel.component).show():window.location=this.getPathHome()+".html"}}]),e}();n.default=new r},{}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".ecom-form",closeIcon:".ecom-form__close",maxForm:".ecom-form--max",minForm:".ecom-form--min",submitForm:".ecom-form input[type=submit]"},this.displayFormAfter=5e3,this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.formTimer=this.formTimer.bind(this),this.showHideMaxForm=this.showHideMaxForm.bind(this),this.showHideMinForm=this.showHideMinForm.bind(this),this.submitForm=this.submitForm.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),this.formTimer(),!0)}},{key:"bindEvents",value:function(){var e=this;$(document).on("click",this.sel.closeIcon,function(){e.showHideMaxForm(),e.showHideMinForm()}),$(document).on("click",this.sel.submitForm,function(t){t.preventDefault();var n=$(t.target).closest("form");e.submitForm(n)})}},{key:"formTimer",value:function(){var e=this;setTimeout(function(){e.showHideMaxForm()},this.displayFormAfter)}},{key:"showHideMaxForm",value:function(){$(this.sel.maxForm).toggleClass("is-hidden")}},{key:"showHideMinForm",value:function(){$(this.sel.minForm).toggleClass("is-shown")}},{key:"submitForm",value:function(e){window.location.href=e.attr("action")+"?"+e.serialize()}}]),e}();n.default=new r},{}],12:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./PasswordValidity"),s=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(){i(this,e),this.sel={component:".forms"},this.init=this.init.bind(this),this.validate=this.validate.bind(this),this.addPasswordCheck=this.addPasswordCheck.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.addPasswordCheck(),this.validate(),!0)}},{key:"addPasswordCheck",value:function(){$.validator.addMethod("passwordCheck",function(e){return s.default.isPasswordValid(e)},"Please enter a valid password")}},{key:"validate",value:function(){$(this.sel.component).validate({rules:{required:{required:!0},password:{passwordCheck:!0}},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):"search"===t.attr("type")?e.insertAfter($(t).parent()):e.insertAfter(t)}})}}]),e}();n.default=new a},{"./PasswordValidity":23}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.lastLetter="",this.allSuggestions=[],this.selectedIndex=-1,this.maxSuggestions=0,this.lastVal="",this.sel={component:".header",toggle:".header__navigation",menu:".header__meganav",overlay:".header__overlay",search:".header__desktopSearch",searchForm:".header__searchform",searchFormForm:".header__searchform form",searchFormInput:".header__searchform .form-field",searchFormInputClear:".header__searchform .form-group .clear",searchSuggestions:".header__searchform .suggestions",country:".header__desktopCountry",countryForm:".header__countrySelectPanel",countrySecondary:".header__countrySelectPanel .mob .welcomes a"},this.cookieName="dhl-default-language",this.lastScrollTop=0,this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.toggleSearch=this.toggleSearch.bind(this),this.showSearch=this.showSearch.bind(this),this.hideSearch=this.hideSearch.bind(this),this.toggleCountry=this.toggleCountry.bind(this),this.showCountry=this.showCountry.bind(this),this.hideCountry=this.hideCountry.bind(this),this.selectCountrySecondary=this.selectCountrySecondary.bind(this),this.bodyScrolling=this.bodyScrolling.bind(this),this.checkScroll=this.checkScroll.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;$(document).on("keydown",this.sel.searchFormInput,function(t){return 9===t.keyCode&&!t.shiftKey||40===t.keyCode||39===t.keyCode?(e.selectedIndex++,e.selectedIndex>=e.maxSuggestions&&(e.selectedIndex=0),e.showSuggestions(!0),t.preventDefault(),!1):!(9===t.keyCode&&t.shiftKey||37===t.keyCode||38===t.keyCode)||(e.selectedIndex--,e.selectedIndex<0&&(e.selectedIndex=e.maxSuggestions-1),e.showSuggestions(!0),t.preventDefault(),!1)}),$(document).on("keypress",this.sel.searchFormInput,function(t){if(13===t.keyCode){var n=$(t.currentTarget),i=$(e.sel.searchFormInput).attr("name"),o=n.val().trim(),r=$(e.sel.searchFormForm).attr("action")+"?"+i+"="+encodeURIComponent(o);window.location=r}}),$(document).on("keyup",this.sel.searchFormInput,function(t){if(16===t.keyCode||9===t.keyCode||40===t.keyCode||39===t.keyCode||37===t.keyCode||38===t.keyCode)return!1;var n=$(t.currentTarget);return n.val().length>0?($(".top-searches",e.sel.component).hide(),$(e.sel.searchFormInputClear).show(),e.checkSuggestions(n)):(e.clearSuggestions(),$(e.sel.searchFormInputClear).hide(),$(".top-searches",e.sel.component).show()),!0}),$(document).on("click",this.sel.searchFormInputClear,function(t){return $(e.sel.searchFormInput).val(""),$(e.sel.searchFormInputClear).hide(),e.clearSuggestions(),t.preventDefault(),!1}),$(document).on("click",this.sel.toggle,function(t){t.preventDefault(),e.toggleMenu()}),$(document).on("click",this.sel.overlay,this.toggleMenu),$(document).on("click",this.sel.search,this.toggleSearch),$(document).on("click",this.sel.country,this.toggleCountry),$(document).on("click",this.sel.countrySecondary,this.selectCountrySecondary),$(document).on("click",".header__lang, .header__countrySelectPanel .langs a, .header__countrySelectPanel .countries a",function(t){var n=$(t.currentTarget).attr("href"),i=$(t.currentTarget).attr("data-home");null!==i&&i.length>0&&(n=i),Cookies.set(e.cookieName,n)}),$(window).on("scroll",this.checkScroll),this.checkScroll(),$(this.sel.searchFormInput).length>0&&$(this.sel.searchFormInput).val().length>0&&$(this.sel.searchFormInputClear).show()}},{key:"checkScroll",value:function(){var e=$(window).scrollTop();e>$(".page-body").offset().top?($(".page-body").addClass("fixed"),$(this.sel.component).addClass("fixed"),e>this.lastScrollTop?($(this.sel.component).removeClass("in"),$(this.sel.searchSuggestions).addClass("hide")):($(this.sel.component).addClass("in"),$(this.sel.searchSuggestions).removeClass("hide"))):($(".page-body").removeClass("fixed"),$(this.sel.component).removeClass("fixed")),this.lastScrollTop=e}},{key:"toggleMenu",value:function(){var e=this;$(this.sel.menu).is(":visible")?(this.bodyScrolling(!0),$(this.sel.toggle).removeClass("header__navigation--open")):(this.bodyScrolling(!1),$(this.sel.toggle).addClass("header__navigation--open")),$(this.sel.menu).slideToggle(150),$(this.sel.searchForm).hasClass("header__searchform--open")&&($(this.sel.searchForm).removeClass("header__searchform--open"),$(this.sel.search).closest(".header__desktopLinkItem").removeClass("header__desktopLinkItem--open"),setTimeout(function(){$(e.sel.search).removeClass("header__desktopSearch--close")},150)),$(this.sel.countryForm).hasClass("header__countrySelectPanel--open")&&($(this.sel.countryForm).removeClass("header__countrySelectPanel--open"),$(this.sel.country).closest(".header__desktopLinkItem").removeClass("header__desktopLinkItem--open"),setTimeout(function(){$(e.sel.search).removeClass("header__desktopCountry--close")},150))}},{key:"bodyScrolling",value:function(e){if(e)$("body").removeClass("modal-open"),document.documentElement.style.height="auto",document.documentElement.style.overflow="auto",document.body.style.height="auto";else{$("body").addClass("modal-open");var t=window.screen.availHeight;document.documentElement.style.overflow="hidden",document.documentElement.style.height=t.toString()+"px",document.body.style.height=t.toString()+"px"}}},{key:"toggleSearch",value:function(e){var t=this;if(e.preventDefault(),$(this.sel.search).hasClass("header__desktopSearch--close"))this.hideSearch();else{this.showSearch(),$(".top-searches",this.sel.component).hide(),$(".top-searches .items",this.sel.component).empty();var n="";$(this.sel.searchFormForm).attr("data-topsearches").length>0&&(n=$(this.sel.searchFormForm).attr("data-topsearches")),n.length>0&&$.get(n,function(e){for(var n=$(".top-searches .items",t.sel.component),i=$(t.sel.searchFormInput).attr("name"),o=!1,r=0;r<e.results.length;r++){o=!0;var s=e.results[r].trim(),a=$(t.sel.searchFormForm).attr("action")+"?"+i+"="+encodeURIComponent(s);n.append("<a href='"+a+"' title='"+s+"'><span>"+s+"</span></a>")}o&&$(".top-searches",t.sel.component).show()})}}},{key:"showSearch",value:function(){$(this.sel.countryForm).removeClass("header__countrySelectPanel--open"),$(this.sel.country).closest(".header__desktopLinkItem").removeClass("header__desktopLinkItem--open"),$(this.sel.search).addClass("header__desktopSearch--close"),$(this.sel.search).closest(".header__desktopLinkItem").addClass("header__desktopLinkItem--open"),$(this.sel.searchForm).addClass("header__searchform--open"),$(this.sel.searchFormInput).focus(),$(this.sel.toggle).hasClass("header__navigation--open")&&(this.bodyScrolling(!0),$(this.sel.toggle).removeClass("header__navigation--open"),$(this.sel.menu).slideToggle(150))}},{key:"hideSearch",value:function(){var e=this;return $(this.sel.searchForm).removeClass("header__searchform--open"),$(this.sel.search).closest(".header__desktopLinkItem").removeClass("header__desktopLinkItem--open"),setTimeout(function(){$(e.sel.search).removeClass("header__desktopSearch--close")},150),!0}},{key:"checkSuggestions",value:function(e){var t=this,n=$.trim(e.val()),i=n.substr(0,1);if(i===this.lastLetter)this.showSuggestions();else{this.clearSuggestions(),this.lastLetter=i,this.selectedIndex=-1;var o="";$(this.sel.searchFormForm).attr("data-suggestions").length>0&&(o=$(this.sel.searchFormForm).attr("data-suggestions")),$.get(o,{s:i},function(e){if(0===e.results.length)t.clearSuggestions();else{t.allSuggestions=[];for(var n=0;n<e.results.length;n++)t.allSuggestions.push(e.results[n]);t.showSuggestions()}})}}},{key:"clearSuggestions",value:function(){$(this.sel.searchSuggestions).empty().hide()}},{key:"showSuggestions",value:function(e){this.clearSuggestions();var t=$.trim($(this.sel.searchFormInput).val());e?t=this.lastVal:this.lastVal=t;for(var n=!1,i=0,o=0;o<this.allSuggestions.length;o++){for(var r=!1,s=t.toLowerCase().split(/\s/),a=0;a<s.length&&!(r=this.allSuggestions[o].toLowerCase().includes(s[a].trim()));a++);if(1===t.length||r){var l=$(this.sel.searchFormInput).attr("name"),c=this.allSuggestions[o].trim(),u=$(this.sel.searchFormForm).attr("action")+"?"+l+"="+encodeURIComponent(c),d="";i===this.selectedIndex&&($(this.sel.searchFormInput).val(c),d=' class="selected"'),$(this.sel.searchSuggestions).append("<a"+d+" href='"+u+"' title='"+c+"'><span>"+c+"</span></a>"),n=!0,i++}if(i>=10)break}this.maxSuggestions=i,n&&$(this.sel.searchSuggestions).show()}},{key:"toggleCountry",value:function(e){e.preventDefault(),$(this.sel.country).hasClass("header__desktopCountry--close")?this.hideCountry():this.showCountry()}},{key:"showCountry",value:function(){var e=this;$(this.sel.searchForm).removeClass("header__searchform--open"),$(this.sel.search).closest(".header__desktopLinkItem").removeClass("header__desktopLinkItem--open"),setTimeout(function(){$(e.sel.search).removeClass("header__desktopSearch--close")},150),$(this.sel.country).addClass("header__desktopCountry--close"),$(this.sel.country).closest(".header__desktopLinkItem").addClass("header__desktopLinkItem--open"),$(this.sel.countryForm).addClass("header__countrySelectPanel--open"),$(this.sel.toggle).hasClass("header__navigation--open")&&(this.bodyScrolling(!0),$(this.sel.toggle).removeClass("header__navigation--open"),$(this.sel.menu).slideToggle(150))}},{key:"hideCountry",value:function(){var e=this;return $(this.sel.countryForm).removeClass("header__countrySelectPanel--open"),$(this.sel.country).closest(".header__desktopLinkItem").removeClass("header__desktopLinkItem--open"),$(this.sel.countryForm).find(".mob").removeClass("open"),setTimeout(function(){$(e.sel.country).removeClass("header__desktopCountry--close")},150),!0}},{key:"selectCountrySecondary",value:function(e){e.preventDefault(),$(this.sel.countryForm).find(".mob").addClass("open")}}]),e}();n.default=new r},{}],14:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".hero",trigger:".hero__playButton, .hero__cta--video",iframe:".hero .hero__video"},this.bindEvents=this.bindEvents.bind(this),this.handleClick=this.handleClick.bind(this),this.init=this.init.bind(this)}return o(e,[{key:"bindEvents",value:function(){$(document).on("click",this.sel.trigger,this.handleClick)}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.getVideoID(e.target.href);$(this.sel.iframe).attr("src","https://www.youtube.com/embed/"+t+"?rel=0&amp;showinfo=0&amp;autoplay=1").addClass("hero__video--open")}},{key:"getVideoID",value:function(e){var t="",n=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);return void 0!==n[2]?(t=n[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=n,t}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}}]),e}();n.default=new r},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:"body"},this.init=this.init.bind(this),this.detectIE=this.detectIE.bind(this)}return o(e,[{key:"init",value:function(){if($(this.sel.component).length<=0)return!1;var e=this.detectIE();return!1!==e&&(e>=12?$(this.sel.component).addClass("ie-edge"):$(this.sel.component).addClass("ie-"+e)),!0}},{key:"detectIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)}}]),e}();n.default=new r},{}],16:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".landingpoints",landingPointItem:".landingpoints .landingpoint",clickableTitle:".landingpoints .landingpoint__title a"},this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;$(document).on("click",this.sel.clickableTitle,function(t){var n=$(t.currentTarget).closest(e.sel.landingPointItem);return n.hasClass("open")?(n.find(".landingpoint__content").css({height:0}),n.removeClass("open")):($(t.currentTarget).closest(e.sel.component).find(".landingpoint.open .landingpoint__content").css({height:0}),$(t.currentTarget).closest(e.sel.component).find(".landingpoint").removeClass("open"),n.addClass("open"),n.find(".landingpoint__content").css({height:n.find(".landingpoint__content p").outerHeight()})),!1})}}]),e}();n.default=new r},{}],17:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".root__countrySelectPanel"},this.redirect=!0,this.cookieName="dhl-default-language",this.getPathPrefix=this.getPathPrefix.bind(this),this.init=this.init.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"init",value:function(){if($(this.sel.component).length<=0)return!1;if(!this.redirect)return $(".mask",this.sel).hide(),!1;var e=Cookies.get(this.cookieName);if(void 0===e){for(var t=window.navigator.userLanguage||window.navigator.language,n=JSON.parse($("#languagesData").html()),i="",o="",r=0;r<n.variants.length;r++){var s=n.variants[r];"*"===s.languages&&(i=this.getPathPrefix()+s.path+".html"),s.languages.indexOf(t)>=0&&(o=this.getPathPrefix()+s.path+".html")}""!==o?(Cookies.set(this.cookieName,o),window.location.href=o):""!==i&&(Cookies.set(this.cookieName,i),window.location.href=i)}else window.location.href=e;return $(".mask",this.sel).hide(),!0}}]),e}();n.default=new r},{}],18:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.config={fbAppId:"1080031328801211",goClientId:"313469837420-l882h39ge8n8n9pb97ldvjk3fm8ppqgs.apps.googleusercontent.com",urlToken:"/libs/granite/csrf/token.json",urlLogin:"/apps/dhl/discoverdhlapi/login/index.json"},this.sel={component:".page-body.login form.forms",buttonFacebook:".forms__cta--social.fb",buttonLinkedin:".forms__cta--social.li",buttonGooglePlus:".forms__cta--social.go"},this.getPathPrefix=this.getPathPrefix.bind(this),this.getPathHome=this.getPathHome.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.tryLoginFacebook=this.tryLoginFacebook.bind(this),this.tryLoginLinkedin=this.tryLoginLinkedin.bind(this),this.tryLoginGoogle=this.tryLoginGoogle.bind(this),this.tryLogin=this.tryLogin.bind(this),this.executeLogin=this.executeLogin.bind(this),this.loggedIn=this.loggedIn.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"getPathHome",value:function(){var e=$("head meta[name='dhl-path-home']").attr("content");return e||""}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;if($(window).on("userloggedin.DHL",function(){e.loggedIn()}),jQuery.validator.addMethod("password",function(e,t){return new RegExp($(t).attr("pattern")).test(e)},"Password format is not valid"),jQuery.validator.addMethod("equalTo",function(e,t){return $("#"+$(t).attr("data-equalTo")).val()===$(t).val()},"Passwords do not match"),$(this.sel.component).find(this.sel.buttonFacebook).length>0){if(window.fbAsyncInit=function(){window.fb_interval=setInterval(function(){void 0!==window.FB&&null!==window.FB&&(window.FB.init({appId:e.config.fbAppId,cookie:!0,xfbml:!0,version:"v2.8"}),clearInterval(window.fb_interval))},100)},null===document.getElementById("facebook-jssdk")){var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.id="facebook-jssdk",n.src="//connect.facebook.net/en_EN/sdk.js",t.parentNode.insertBefore(n,t)}$(this.sel.component).find(this.sel.buttonFacebook).on("click",function(t){return e.tryLoginFacebook(t),!1})}$(this.sel.component).find(this.sel.buttonLinkedin).length>0&&$(this.sel.component).find(this.sel.buttonLinkedin).on("click",function(t){return e.tryLoginLinkedin(t),!1});var i=$(this.sel.component).find(this.sel.buttonGooglePlus);i.length>0&&(window.go_interval=setInterval(function(){void 0!==window.gapi&&null!==window.gapi&&(window.gapi.load("auth2",function(){var t=window.gapi.auth2.init({client_id:e.config.goClientId,cookiepolicy:"single_host_origin"}),n=i.get(0);t.attachClickHandler(n,{},function(t){return e.tryLoginGoogle(t),!1},function(e){"popup_closed_by_user"!==e.error&&alert(e.error)})}),clearInterval(window.go_interval))},100),$(this.sel.component).find(this.sel.buttonGooglePlus).on("click",function(e){return e.preventDefault(),!1})),$(this.sel.component).validate({rules:{login__email:"email",login__password:"password"},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):"search"===t.attr("type")?e.insertAfter($(t).parent()):e.insertAfter(t)},submitHandler:function(t){return e.tryLogin(t),!1}})}},{key:"tryLoginFacebook",value:function(e){var t=this;e.preventDefault(),$(this.sel.component).find(this.sel.buttonFacebook).text("please wait..."),window.FB.login(function(e){return e.authResponse&&window.FB.api("/me",function(e){var n={username:e.email,password:e.id};t.executeLogin(n,function(){$(t.sel.component).find(t.sel.buttonFacebook).text("Facebook")})},{fields:["id","email"]}),!1},{scope:"email,public_profile",return_scopes:!0})}},{key:"tryLoginLinkedin",value:function(e){var t=this;return e.preventDefault(),$(this.sel.component).find(this.sel.buttonLinkedin).text("please wait..."),IN.User.authorize(function(){IN.API.Profile("me").fields("id","first-name","last-name","email-address").result(function(e){var n=e.values[0],i={username:n.emailAddress,password:n.id};t.executeLogin(i,function(){$(t.sel.component).find(t.sel.buttonLinkedin).text("LinkedIn")})})}),setInterval(function(){window.IN.User.isAuthorized()&&IN.API.Profile("me").fields("id","first-name","last-name","email-address").result(function(e){var n=e.values[0],i={username:n.emailAddress,password:n.id};t.executeLogin(i,function(){$(t.sel.component).find(t.sel.buttonLinkedin).text("LinkedIn")})})},1e3),!1}},{key:"tryLoginGoogle",value:function(e){var t=this,n={username:e.getBasicProfile().getEmail(),password:e.getBasicProfile().getId()};$(this.sel.component).find(this.sel.buttonGooglePlus).text("please wait..."),this.executeLogin(n,function(){$(t.sel.component).find(t.sel.buttonGooglePlus).text("Google+")})}},{key:"tryLogin",value:function(e){var t=$(e),n=t.find("input#login__email").val(),i=t.find("input#login__password").val();return 0===$.trim(n).length||0===$.trim(i).length?alert("Please enter your email address and password"):(t.find("button[type='submit']").text("please wait..."),t.find("input.forms__cta--red").val("please wait..."),this.executeLogin({username:n,password:i},function(){t.find("button[type='submit']").text("Log In"),t.find("input.forms__cta--red").val("Login")})),!1}},{key:"executeLogin",value:function(e,t){var n=this;$.get(this.getPathPrefix()+this.config.urlToken,function(i){var o=i.token;$.ajax({url:n.getPathPrefix()+n.config.urlLogin,data:e,type:"post",headers:{"CSRF-Token":o},dataType:"json",success:function(e){if(e)if("ok"===e.status){$(window).trigger("checkauthtokens.DHL",[e,!0]);var i=$(n.sel.component).data("back");0===$.trim(i).length&&(i=n.getPathHome()+".html"),window.location=i}else alert("An error occurred while attempting to register.\n"+e.error);else alert("An unknown error occurred while attempting to register. Please try again later.");t()}})})}},{key:"loggedIn",value:function(){window.location="/content/dhl/your-account.html"}}]),e}();n.default=new r},{}],19:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:"[data-marketo-form]"},this.init=this.init.bind(this)}return o(e,[{key:"init",value:function(){var e=this;return!($(this.sel.component).length<=0)&&($(this.sel.component).each(function(t,n){return e.bindEvents(n,t)}),!0)}},{key:"bindEvents",value:function(e){var t=$(e),n=t.find("[data-marketo-visible-form]"),i=n.find("form"),o=i?i.attr("id"):"",r=o?o.replace("mktoForm_",""):"",s=[],a=t.attr("data-marketo-form"),l=a?JSON.parse(a):null;return 0!==r.length?MktoForms2.whenReady(function(e){$("#mktoForms2BaseStyle").remove(),$("#mktoForms2ThemeStyle").remove();var t=e.getId();if(-1===s.indexOf(t.toString())){t.toString()===r.toString()&&s.push(t.toString());e.getId().toString()===r.toString()&&e.onSuccess(function(e){if(l)return MktoForms2.loadForm("//express-resource.dhl.com",l.hiddenMunchkinId,l.hiddenFormId,function(t){console.log("formLoaded",t,e);var n=$.extend(e,t.getValues());t.addHiddenFields(n),t.submit(),t.onSubmit(function(e){return console.log("second form submit...",e.getValues()),!1}),t.onSuccess(function(e){return console.log("second form success..."),!0})}),!1})}}):MktoForms2.whenReady(function(e){$("#mktoForms2BaseStyle").remove(),$("#mktoForms2ThemeStyle").remove()}),!0}}]),e}();n.default=new r},{}],20:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./Toast"),a=i(s),l=e("./Database"),c=i(l),u=function(){function e(){o(this,e),this.sel={component:".hero__saveForOffline"},this.articleCacheName="offline-"+window.location.pathname,this.init=this.init.bind(this),this.handleClick=this.handleClick.bind(this),this.doSave=this.doSave.bind(this),this.doUnsave=this.doUnsave.bind(this),this.bindEvents=this.bindEvents.bind(this),this.getHeroImages=this.getHeroImages.bind(this),this.isCurrentPageSaved=this.isCurrentPageSaved.bind(this)}return r(e,[{key:"bindEvents",value:function(){$(document).on("click",this.sel.component,this.handleClick)}},{key:"handleClick",value:function(e){e.preventDefault(),$(this.sel.component).hasClass("hero__saveForOffline--saved")?this.doUnsave():this.doSave()}},{key:"isCurrentPageSaved",value:function(){var e=this;caches.keys().then(function(t){return Promise.all(t.filter(function(t){return t===e.articleCacheName}))}).then(function(t){t.length>0&&$(e.sel.component).addClass("hero__saveForOffline--saved").attr("title","Article Saved").find("span").text("Article Saved")})}},{key:"getHeroImages",value:function(){var e=$(".hero__image");if(e.length>0){var t=[];t.push(e.css("background-image").split("url(")[1].split(")")[0].replace(/"/g,"").replace(/'/g,""));var n=e.parents(".hero").find("style").html().split("url(")[1].split(")")[0].replace(/"/g,"").replace(/'/g,"");return t.push(n),t}return!1}},{key:"doUnsave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname,n=new a.default("Article has been removed",3e3)
;return c.default.deleteArticle(t).then(function(){caches.delete("offline-"+t).then(function(){$(e.sel.component).removeClass("hero__saveForOffline--saved").attr("title","Save Article").find("span").text("Save Article"),n.show()})}).catch(function(){n.setText("There was a problem deleting the article"),n.show()})}},{key:"doSave",value:function(){var e=this,t=new a.default("Article is now available offline",3e3);if($("#articleData").length<=0)return console.log("SW ERROR: Offline.js:90"),t.setText("Article could not be saved for offline"),t.show(),!1;var n=JSON.parse($("#articleData").html());return c.default.addArticle(n.title,window.location.pathname,n.description,n.categoryName,n.categoryLink,n.timeToRead,n.imageMobile,n.imageDesktop,n.isLarge,n.isVideo,this.articleCacheName).then(function(){var i=[window.location.pathname,n.imageMobile,n.imageDesktop];if($(".hero__image").length>0){var o=e.getHeroImages();o&&(i=i.concat(o))}if($(".accountapply").length>0){var r=$(".accountapply .container").css("background-image");""!=r&&(r=r.split("url(")[1].split(")")[0].replace(/"/g,"").replace(/'/g,""),i.push(r))}$(".page-body .wysiwyg img, .authorPanel img").each(function(e,t){""!==$.trim($(t).attr("src"))&&i.push($(t).attr("src"))}),caches.open(e.articleCacheName).then(function(n){var o=[],r=document.createElement("a");$.each(i,function(e,t){if(r.href=t,r.host===window.location.host){var n=r.pathname+r.search;-1===$.inArray(n,o)&&o.push(n)}}),n.addAll(o).then(function(){$(e.sel.component).addClass("hero__saveForOffline--saved").attr("title","Saved for offline").find("span").text("Article Saved")}).catch(function(e){console.log(e.message),t.setText("Article could not be saved for offline")}).then(function(){t.show()})})}).catch(function(e){console.log(e.message),t.setText("Article could not be saved for offline"),t.show()}),!0}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.isCurrentPageSaved(),this.bindEvents(),!0)}}]),e}(),d=function(){function e(){o(this,e),this.sel={component:".articleGrid--saved",grid:".articleGrid--saved .articleGrid__grid",title:".articleGrid--saved .articleGrid__title",template:"#articleGrid__panelTemplate",editSavedArticles:".hero__editSavedArticles",articles:".articleGrid--saved .articleGrid__grid .articlePanel",deletableArticle:".articleGrid--saved .articleGrid__grid .articlePanel--deletable"},this.saveForOffline=new u,this.template=$($(this.sel.template).html()),this.init=this.init.bind(this),this.loadArticles=this.loadArticles.bind(this),this.populateTemplates=this.populateTemplates.bind(this),this.bindEvents=this.bindEvents.bind(this),this.handleEdit=this.handleEdit.bind(this),this.deleteArticle=this.deleteArticle.bind(this),this.handleSwipe=this.handleSwipe.bind(this)}return r(e,[{key:"loadArticles",value:function(){var e=this;return c.default.getArticles().then(function(t){for(var n=[],i=0;i<t.length;i++){var o=t[i];n.push({Link:o.link,Title:o.title,Description:o.description,Category:{Name:o.categoryName,Link:o.categoryLink},TimeToRead:o.timeToRead,Images:{Mobile:o.imageMobile,Desktop:o.imageDesktop},IsLarge:o.isLarge,IsVideo:o.isVideo})}n.length>0?$(e.sel.grid).html(e.populateTemplates(n)):$(e.sel.title).text("You have no saved articles")})}},{key:"populateTemplates",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=this.template.clone(),o=e[n],r=992,s=Math.random().toString(36).substr(2,9);i.find(".articlePanel").attr("id",s),o.IsLarge&&(r=768,i.find(".articlePanel").addClass("articlePanel--large")),o.IsVideo&&i.find(".articlePanel").addClass("articlePanel--video"),i.find(".articlePanel__image").attr({href:o.Link,title:o.Title}).attr("style","background-image: url("+o.Images.Mobile+");"),i.find("style")[0].innerHTML="@media screen and (min-width: "+r+"px){#"+s+" .articlePanel__image{background-image: url("+o.Images.Desktop+") !important;}}",i.find(".articlePanel__content > a").attr({href:o.Link,title:o.Title}),i.find(".articlePanel__title").text(o.Title),i.find(".articlePanel__description").text(o.Description),i.find(".articlePanel__subTitle a:first-child").attr({href:o.Category.Link,title:o.Category.Name}).text(o.Category.Name),i.find(".articlePanel__subTitle a:last-child").attr({href:o.Link,title:o.Title}).text(o.TimeToRead),t.push(i)}return t}},{key:"bindEvents",value:function(){$(document).on("click",this.sel.editSavedArticles,this.handleEdit),$(document).on("click",this.sel.deletableArticle,this.deleteArticle),$(this.sel.articles).swipedetect(this.handleSwipe)}},{key:"handleEdit",value:function(e){e.preventDefault(),$(this.sel.editSavedArticles).toggleClass("hero__editSavedArticles--editing"),$(this.sel.editSavedArticles).hasClass("hero__editSavedArticles--editing")?$(this.sel.grid).find(".articlePanel").addClass("articlePanel--deletable"):$(this.sel.grid).find(".articlePanel").removeClass("articlePanel--deletable")}},{key:"deleteArticle",value:function(e){var t=this;e.preventDefault();var n=$(e.target).parents(".articlePanel");$(e.target).hasClass("articlePanel")&&(n=$(e.target));var i=new URL(n.find(".articlePanel__image")[0].href);this.saveForOffline.doUnsave(i.pathname).then(function(){n.parent().remove(),$(t.sel.grid).find(".articlePanel").length<=0&&($(t.sel.grid).append('<div class="col-12"><h2 class="articleGrid__title">You have no saved articles</h2></div>'),t.handleEdit({preventDefault:function(){}}))})}},{key:"handleSwipe",value:function(e,t){var n=$(t).hasClass("articlePanel--deletable");"left"!==e||n?"right"===e&&n&&$(t).removeClass("articlePanel--deletable"):($(".articlePanel.articlePanel--deletable").removeClass("articlePanel--deletable"),$(t).addClass("articlePanel--deletable"))}},{key:"init",value:function(){var e=this;return!($(this.sel.component).length<=0)&&(this.loadArticles().then(function(){e.bindEvents()}),!0)}}]),e}(),h=function(){function e(){o(this,e),this.saveForOffline=new u,this.offlineArticles=new d,this.init=this.init.bind(this),this.checkStatus=this.checkStatus.bind(this),this.doOnline=this.doOnline.bind(this),this.doOffline=this.doOffline.bind(this)}return r(e,[{key:"checkStatus",value:function(){navigator.onLine?this.doOnline():this.doOffline()}},{key:"doOnline",value:function(){$("body").removeClass("offline"),$('.disable-offline[tabindex="-1"], .disable-offline *[tabindex="-1"]').removeAttr("tabindex")}},{key:"doOffline",value:function(){$("body").addClass("offline"),$(".disable-offline, .disable-offline *").attr("tabindex","-1")}},{key:"bindEvents",value:function(){window.addEventListener("online",this.doOnline),window.addEventListener("offline",this.doOffline)}},{key:"init",value:function(){return"onLine"in navigator&&(this.saveForOffline.init(),this.offlineArticles.init(),this.checkStatus(),this.bindEvents(),!0)}}]),e}();n.default=new h},{"./Database":9,"./Toast":33}],21:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".forms__password",toggle:".forms__password input[type=checkbox]"},this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.togglePlainText=this.togglePlainText.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;$(document).on("change",this.sel.toggle,function(t){var n=$(t.target).attr("data-field-id");e.togglePlainText(n)})}},{key:"togglePlainText",value:function(e){var t=$("#"+e);switch(t.attr("type")){case"password":t.attr("type","text");break;default:case"text":t.attr("type","password")}}}]),e}();n.default=new r},{}],22:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.config={urlToken:"/libs/granite/csrf/token.json",urlLogin:"/apps/dhl/discoverdhlapi/login/index.json",urlRequest:"/apps/dhl/discoverdhlapi/request_password/index.json",urlReset:"/apps/dhl/discoverdhlapi/reset_password/index.json"},this.sel={component:".reset-password-container"},this.getPathPrefix=this.getPathPrefix.bind(this),this.getPathHome=this.getPathHome.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.createCookie=this.createCookie.bind(this),this.requestToken=this.requestToken.bind(this),this.resetPassword=this.resetPassword.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"getPathHome",value:function(){var e=$("head meta[name='dhl-path-home']").attr("content");return e||""}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;jQuery.validator.addMethod("password",function(e,t){return new RegExp($(t).attr("pattern")).test(e)},"Password format is not valid"),jQuery.validator.addMethod("equalTo",function(e,t){return $("#"+$(t).attr("data-equalTo")).val()===$(t).val()},"Passwords do not match");var t=$(this.sel.component);if(t.length>0){var n=t.data("username"),i=t.data("token");null!==n&&void 0!==n&&n.length>0&&null!==i&&void 0!==i&&i.length>0?(t.find(".step-3").show(),t.find(".step-1").hide(),t.find(".step-2").hide()):(t.find(".step-1").show(),t.find(".step-2").hide(),t.find(".step-3").hide()),t.find(".step-1 form").validate({rules:{resetPassword__email:"email"},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):"search"===t.attr("type")?e.insertAfter($(t).parent()):e.insertAfter(t)},submitHandler:function(t){return e.requestToken(t),!1}}),t.find(".step-3 form").validate({rules:{reset__createPassword:"password",reset__confirmPassword:"equalTo"},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):"search"===t.attr("type")?e.insertAfter($(t).parent()):e.insertAfter(t)},submitHandler:function(t){return e.resetPassword(t),!1}})}}},{key:"createCookie",value:function(e,t,n){var i="";if(n){var o=new Date;o.setTime(o.getTime()+1e3*n),i="; expires="+o.toUTCString()}document.cookie=e+"="+t+i+"; path=/"}},{key:"requestToken",value:function(e){var t=this,n={username:$(e).find("input#resetPassword__email").val(),page:window.location.href};$(e).find("button[type='submit']").text("please wait..."),$(e).find("input.forms__cta--red").val("please wait..."),$.get(this.getPathPrefix()+this.config.urlToken,function(i){var o=i.token;$.ajax({url:t.getPathPrefix()+t.config.urlRequest,data:n,type:"post",headers:{"CSRF-Token":o},dataType:"json",success:function(n){n?"ok"===n.status?($(t.sel.component).find(".step-1").hide(),$(t.sel.component).find(".step-2").show()):alert("An error occurred while attempting to request a password reset.\n"+n.error):alert("An unknown error occurred while attempting to request a password reset. Please try again later"),$(e).find("button[type='submit']").text("Get new password"),$(e).find("input.forms__cta--red").val("Get new password")}})})}},{key:"resetPassword",value:function(e){var t=this,n=$(this.sel.component).data("username"),i=$(this.sel.component).data("token"),o=$(e).find("input#reset__createPassword").val(),r={username:n,token:i,password:o};$(e).find("button[type='submit']").text("please wait..."),$(e).find("input.forms__cta--red").val("please wait..."),$.get(this.getPathPrefix()+this.config.urlToken,function(i){var s=i.token;$.ajax({url:t.getPathPrefix()+t.config.urlReset,data:r,type:"post",headers:{"CSRF-Token":s},dataType:"json",success:function(i){i?"ok"===i.status?$.get(t.getPathPrefix()+t.config.urlToken,function(r){var s=r.token;$.ajax({url:t.getPathPrefix()+t.config.urlLogin,data:{username:n,password:o},type:"post",headers:{"CSRF-Token":s},dataType:"json",success:function(n){if(n)if("ok"===n.status){$(window).trigger("checkauthtokens.DHL",[n,!0]);var o=$(e).data("back");0===$.trim(o).length&&(o=t.getPathHome()+".html"),window.location=o}else alert("An error occurred while attempting to login using your updated credentials.\n"+i.error);else alert("An unknown error occurred while attempting to login using your updated credentials. Please try again later");$(e).find("button[type='submit']").text("Submit"),$(e).find("input.forms__cta--red").val("Submit")}})}):alert("An error occurred while attempting to request a password reset.\n"+i.error):alert("An unknown error occurred while attempting to request a password reset. Please try again later")}})})}}]),e}();n.default=new r},{}],23:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.checkCasing=this.checkCasing.bind(this),this.checkSpecial=this.checkSpecial.bind(this),this.checkNumber=this.checkNumber.bind(this),this.checkLength=this.checkLength.bind(this),this.isValid=this.isValid.bind(this)}return o(e,[{key:"isValid",value:function(e){var t=this.checkLength(e),n=this.checkCasing(e),i=this.checkSpecial(e),o=this.checkNumber(e);return{isValid:t&&n&&i&&o,isLengthValid:t,isCasingValid:n,isSpeicalValid:i,isNumberValid:o}}},{key:"checkLength",value:function(e){return e.length>=8}},{key:"checkCasing",value:function(e){return/^(?=.*[a-z]).+$/.test(e)&&/^(?=.*[A-Z]).+$/.test(e)}},{key:"checkNumber",value:function(e){return/^(?=.*[0-9]).+$/.test(e)}},{key:"checkSpecial",value:function(e){return/^(?=.*[!%&*()={}@#><]).+$/.test(e)}}]),e}(),s=function(){function e(){i(this,e),this.sel={component:".validity-checks"},this.passwordApi=new r,this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this,t=$(this.sel.component).attr("data-field-id"),n=$("#"+t);$(document).on("keyup keypress change","#"+t,function(){var t=n.val();e.checkPasswordValidity(t)})}},{key:"isPasswordValid",value:function(e){return this.passwordApi.isValid(e).isValid}},{key:"checkPasswordValidity",value:function(e){var t=this.passwordApi.isValid(e);t.isLengthValid?$("[data-check=length]").addClass("is-valid"):$("[data-check=length]").removeClass("is-valid"),t.isCasingValid?$("[data-check=casing]").addClass("is-valid"):$("[data-check=casing]").removeClass("is-valid"),t.isSpeicalValid?$("[data-check=special]").addClass("is-valid"):$("[data-check=special]").removeClass("is-valid"),t.isNumberValid?$("[data-check=number]").addClass("is-valid"):$("[data-check=number]").removeClass("is-valid")}}]),e}();n.default=new s},{}],24:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.config={fbAppId:"1080031328801211",goClientId:"313469837420-l882h39ge8n8n9pb97ldvjk3fm8ppqgs.apps.googleusercontent.com",urlToken:"/libs/granite/csrf/token.json",urlRefreshCheck:"/apps/dhl/discoverdhlapi/refresh_token/index.json",urlRegister:"/apps/dhl/discoverdhlapi/register/index.json",urlUpdateCategories:"/apps/dhl/discoverdhlapi/update_categories/index.json"},this.sel={component:".page-body.register, #download, .gated",buttonFacebook:".forms__cta--social.fb",buttonLinkedin:".forms__cta--social.li",buttonGooglePlus:".forms__cta--social.go"},this.getPathPrefix=this.getPathPrefix.bind(this),this.getPathHome=this.getPathHome.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.loggedIn=this.loggedIn.bind(this),this.tryRegisterFacebook=this.tryRegisterFacebook.bind(this),this.tryRegisterLinkedin=this.tryRegisterLinkedin.bind(this),this.tryRegisterGoogle=this.tryRegisterGoogle.bind(this),this.tryRegister=this.tryRegister.bind(this),this.executeRegister=this.executeRegister.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"getPathHome",value:function(){var e=$("head meta[name='dhl-path-home']").attr("content");return e||""}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"readCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}},{key:"bindEvents",value:function(){var e=this;if($(window).on("userloggedin.DHL",function(){e.loggedIn()}),jQuery.validator.addMethod("password",function(e,t){return 0===$.trim(e).length||new RegExp($(t).attr("pattern")).test(e)},"Password format is not valid"),jQuery.validator.addMethod("equalTo",function(e,t){return $("#"+$(t).attr("data-equalTo")).val()===$(t).val()},"Passwords do not match"),$(this.sel.component).find(this.sel.buttonFacebook).length>0){if(window.fbAsyncInit=function(){window.fb_interval=setInterval(function(){void 0!==window.FB&&null!==window.FB&&(window.FB.init({appId:e.config.fbAppId,cookie:!0,xfbml:!0,version:"v2.8"}),clearInterval(window.fb_interval))},100)},null===document.getElementById("facebook-jssdk")){var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.id="facebook-jssdk",n.src="//connect.facebook.net/en_EN/sdk.js",t.parentNode.insertBefore(n,t)}$(this.sel.component).find(this.sel.buttonFacebook).on("click",function(t){return e.tryRegisterFacebook(t),!1})}$(this.sel.component).find(this.sel.buttonLinkedin).length>0&&$(this.sel.component).find(this.sel.buttonLinkedin).on("click",function(t){return e.tryRegisterLinkedin(t),!1});var i=$(this.sel.component).find(this.sel.buttonGooglePlus);i.length>0&&(window.go_interval=setInterval(function(){void 0!==window.gapi&&null!==window.gapi&&(window.gapi.load("auth2",function(){var t=window.gapi.auth2.init({client_id:e.config.goClientId,cookiepolicy:"single_host_origin"}),n=i.get(0);t.attachClickHandler(n,{},function(t){return e.tryRegisterGoogle(t),!1},function(e){"popup_closed_by_user"!==e.error&&alert(e.error)})}),clearInterval(window.go_interval))},100),$(this.sel.component).find(this.sel.buttonGooglePlus).on("click",function(e){return e.preventDefault(),!1})),$(this.sel.component).find("#glb-register-start form#register-detail-form").validate({rules:{register__email:"email",register__password1:"password"},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):"search"===t.attr("type")?e.insertAfter($(t).parent()):e.insertAfter(t)},submitHandler:function(t){return e.tryRegister(t),!1}}),$(this.sel.component).find("#glb-register-categories form .forms__cta--red").on("click",function(t){return t.preventDefault(),e.tryCategorySelection(t),!1})}},{key:"tryRegisterFacebook",value:function(e){var t=this;e.preventDefault(),$(this.sel.component).find(this.sel.buttonFacebook).text("please wait..."),window.FB.login(function(e){return e.authResponse&&window.FB.api("/me",function(e){var n={firstname:e.first_name,lastname:e.last_name,username:e.email,password:e.id,islinkedin:"true",tcagree:!0};t.executeRegister(n,function(){$(t.sel.component).find(t.sel.buttonFacebook).text("Facebook")})},{fields:["id","email","first_name","last_name"]}),!1},{scope:"email,public_profile",return_scopes:!0})}},{key:"tryRegisterLinkedin",value:function(e){var t=this;return e.preventDefault(),$(this.sel.component).find(this.sel.buttonLinkedin).text("please wait..."),IN.User.authorize(function(){IN.API.Profile("me").fields("id","first-name","last-name","email-address").result(function(e){var n=e.values[0],i={firstname:n.firstName,lastname:n.lastName,username:n.emailAddress,password:n.id,islinkedin:"true",tcagree:!0};t.executeRegister(i,function(){$(t.sel.component).find(t.sel.buttonLinkedin).text("LinkedIn")})})}),setInterval(function(){window.IN.User.isAuthorized()&&IN.API.Profile("me").fields("id","first-name","last-name","email-address").result(function(e){var n=e.values[0],i={firstname:n.firstName,lastname:n.lastName,username:n.emailAddress,password:n.id,islinkedin:"true",tcagree:!0};t.executeRegister(i,function(){$(t.sel.component).find(t.sel.buttonLinkedin).text("LinkedIn")})})},1e3),!1}},{key:"tryRegisterGoogle",value:function(e){var t=this,n=e.getBasicProfile(),i={firstname:n.getGivenName(),lastname:n.getFamilyName(),username:n.getEmail(),password:n.getId(),islinkedin:"true",tcagree:!0};$(this.sel.component).find(this.sel.buttonGooglePlus).text("please wait..."),this.executeRegister(i,function(){$(t.sel.component).find(t.sel.buttonGooglePlus).text("Google+")})}},{key:"tryRegister",value:function(e){var t=$(e),n={firstname:t.find("input#register__firstname").val(),lastname:t.find("input#register__lastname").val(),username:t.find("input#register__email").val(),password:t.find("input#register__password1").val(),islinkedin:"false",tcagree:t.find("input#checkboxId").is(":checked")};return 0===$.trim(n.firstname).length||0===$.trim(n.lastname).length||0===$.trim(n.username).length?alert("Please enter your name and email address."):(t.find("button[type='submit']").text("please wait..."),t.find("input.forms__cta--red").val("please wait..."),this.executeRegister(n,function(){t.find("button[type='submit']").text("Submit"),t.find("input.forms__cta--red").val("Submit")})),!1}},{key:"executeRegister",value:function(e,t){var n=this;$.get(this.getPathPrefix()+this.config.urlToken,function(i){var o=i.token;$.ajax({url:n.getPathPrefix()+n.config.urlRegister,data:e,type:"post",headers:{"CSRF-Token":o},dataType:"json",success:function(i){if(i){var o=$(".page-body.register, #download, .gated").find("form");if("ok"===i.status){if($(window).trigger("checkauthtokens.DHL",[i,!0]),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"registrationComplete"}),o.closest("#download").length>0||o.closest(".gated").length>0)return void location.reload();var r=$(".register.below-register-form").find(".modal"),s=$(n.sel.component).find("#glb-register-categories");r.length>0?(r.find(".thanks-name").text(e.firstname),r.find("button").on("click",function(){var e=o.data("back");0===$.trim(e).length?location.reload():window.location=e}),r.modal("show")):s.length>0&&($(n.sel.component).find("#glb-register-start").hide(),s.find(".forms__title").text("Thanks "+i.name),s.show())}else i.error.includes("Email address already exists")?$('<label id="register__email-error" class="error" for="register__email">This email address already exists</label>').insertAfter(o.find("input#register__email")):alert("An error occurred while attempting to register.\n"+i.error)}else alert("An unknown error occurred while attempting to register. Please try again later.");t()}})})}},{key:"tryCategorySelection",value:function(){var e=this,t="";if($(this.sel.component).find("#glb-register-categories form").find("input:checked").each(function(e,n){t.length>0&&(t+=","),t+=$(n).val()}),t.length>0){var n=this.readCookie("DHL.AuthToken");if(null!==n){var i=n.split("|");i.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(n){var o=n.token;$.ajax({url:e.getPathPrefix()+e.config.urlUpdateCategories,data:{username:i[0],token:i[1],cats:t},type:"post",headers:{"CSRF-Token":o},dataType:"json",success:function(t){t?"ok"===t.status?($(window).trigger("checkauthtokens.DHL",[t,!0]),window.location=e.getPathHome()+".html"):alert("An unknown error occurred while attempting to update your details (1). Please try again later"):alert("An unknown error occurred while attempting to update your details (2). Please try again later")}})}):alert("An unknown error occurred while attempting to update your details (3). Please try again later")}else{var o=this.readCookie("DHL.RefreshToken");if(null!==o){var r=o.split("|");r.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(t){var n=t.token;$.ajax({url:e.getPathPrefix()+e.config.urlRefreshCheck,data:{username:r[0],refresh_token:r[1]},type:"post",headers:{"CSRF-Token":n},dataType:"json",success:function(t){t?"ok"===t.status?($(window).trigger("checkauthtokens.DHL",[t,!0]),e.tryCategorySelection()):alert("An unknown error occurred while attempting to update your details (4). Please try again later"):alert("An unknown error occurred while attempting to update your details (5). Please try again later")}})}):alert("An unknown error occurred while attempting to update your details (6). Please try again later")}else alert("An unknown error occurred while attempting to enter the competition. Please try again later")}}return!1}},{key:"loggedIn",value:function(){$(".page-body.register").length>0&&(window.location="/content/dhl/your-account.html")}}]),e}();n.default=new r},{}],25:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".search-form",clearButton:".search-form__clear-icon",input:".search-form__search input[type=search]"},this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.clearSearchForm=this.clearSearchForm.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;$(document).on("click",this.sel.clearButton,function(){e.clearSearchForm()})}},{key:"clearSearchForm",value:function(){$(this.sel.input).val("").focus()}}]),e}();n.default=new r},{}],26:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.deferredPrompt=null,this.init=this.init.bind(this),this.register=this.register.bind(this),this.addToHomeScreen=this.addToHomeScreen.bind(this)}return o(e,[{key:"register",value:function(){navigator.serviceWorker.register("/discover/etc.clientlibs/dhl/clientlibs/clientlib-site/resources/sw.js?v=discoverDhl-20221115-1").then(function(){}).catch(function(){console.log("ServiceWorker registration failed: ",err)})}},{key:"addToHomeScreen",value:function(){var e=this;window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.deferredPrompt=t,"ignore"!==Cookies.get("a2hs")&&$(".addToHomeScreen").addClass("addToHomeScreen--open")}),$(document).on("click",".addToHomeScreen__cta",function(t){t.preventDefault(),e.deferredPrompt.prompt(),e.deferredPrompt.userChoice.then(function(t){"accepted"===t.outcome?$(".addToHomeScreen").removeClass("addToHomeScreen--open"):($(".addToHomeScreen__title").text("That's a shame, maybe next time"),$(".addToHomeScreen__cta").remove(),$(".addToHomeScreen__link").text("Close"),e.createA2hsCookie()),e.deferredPrompt=null})}),$(document).on("click",".addToHomeScreen__link",function(t){t.preventDefault(),$(".addToHomeScreen").removeClass("addToHomeScreen--open"),e.deferredPrompt=null,e.createA2hsCookie()})}},{key:"createA2hsCookie",value:function(){Cookies.set("a2hs","ignore",{expires:14})}},{key:"init",value:function(){return"serviceWorker"in navigator&&(this.register(),!0)}}]),e}();n.default=new r},{}],27:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".ship-now",firstnameInput:"#firstname",firstnameQSP:"?firstname",lastnameInput:"#lastname",lastnameQSP:"?lastname",emailInput:"#email",emailQSP:"?email",userFirstnameElement:".user-firstname"},this.init=this.init.bind(this),this.populateForm=this.populateForm.bind(this),this.showLoggedInElements=this.showLoggedInElements.bind(this)}return o(e,[{key:"init",value:function(){var e=this;return!($(this.sel.component).length<=0)&&($(window).on("userloggedin.DHL",function(t,n){e.showLoggedInElements(n)}),this.populateForm(),!0)}},{key:"populateForm",value:function(){var e=url(this.sel.emailQSP),t=url(this.sel.firstnameQSP),n=url(this.sel.lastnameQSP);void 0!==e&&$(this.sel.emailInput).val(e),void 0!==t&&($(this.sel.firstnameInput).val(t),$.trim(t).length>0&&$(this.sel.userFirstnameElement).text(t)),void 0!==n&&$(this.sel.lastnameInput).val(n)}},{key:"showLoggedInElements",value:function(e){var t=url(this.sel.firstnameQSP);void 0!==t&&0!==$.trim(t).length||$(this.sel.userFirstnameElement).text(e.name)}}]),e}();n.default=new r},{}],28:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){o(this,e),this.sel={form:"form.forms.ship-now",countryselect:"form.forms.ship-now #shipnow_country"},this.getPathPrefix=this.getPathPrefix.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.toggleAddress=this.toggleAddress.bind(this),this.submitForm=this.submitForm.bind(this),this.getFormData=this.getFormData.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.validate=this.validate.bind(this)}return r(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"bindEvents",value:function(){$(document).on("change",this.sel.countryselect,this.toggleAddress),$(document).on("submit",this.sel.form,this.submitForm);var e=$(this.sel.form).data("preselectcountry");null!==e&&$.trim(e).length>0&&$(this.sel.countryselect).val(e).trigger("change")}},{key:"validate",
value:function(){var e=document.getElementById("glb-shipnow-form");if(e){var t=e.elements,n=new Map,o=!0,r=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var c=a.value,u=c.getAttribute("name");n.set(u,this.validateField(c))}}catch(e){r=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}return[].concat(i(n.values())).includes(!1)}return!1}},{key:"validateField",value:function(e){var t=e.type,n=e.value.trim(),i=void 0;switch(t){case"email":i=this.validateEmailField(n);break;case"tel":i=this.validatePhoneNumber(n);break;default:i=this.validateTextField(n)}return i?(this.completeValidation(e),!0):(this.failValidation(e),!1)}},{key:"failValidation",value:function(e){this.modifyCssClass(e,"error","valid");var t=this.getLabel(e);null===t&&(e.after(this.createErrorLabel(e)),t=this.getLabel(e)),this.updateLabelMessage(e,t)}},{key:"updateLabelMessage",value:function(e,t){var n=e.getAttribute("data-msg");null===n&&(n="Field is mandatory"),null===t&&void 0===t||(t.textContent=n)}},{key:"createErrorLabel",value:function(e){var t=e.id,n=e.getAttribute("data-msg");n||(n="This field is mandatory!");var i=document.createElement("label"),o=document.createTextNode(n);return i.classList.add("error"),i.setAttribute("for",t),i.appendChild(o),i}},{key:"modifyCssClass",value:function(e,t,n){e.classList.contains(n)&&e.classList.replace(n,t),e.classList.add(t)}},{key:"removeCssClass",value:function(e,t){e&&e.classList.remove(t)}},{key:"addCssClass",value:function(e,t){e&&e.classList.add(t)}},{key:"completeValidation",value:function(e){this.modifyCssClass(e,"valid","error");var t=this.getLabel(e);null!==t&&t.remove()}},{key:"getLabel",value:function(e){var t=e.nextElementSibling;if(t){if("label"===t.tagName.toLocaleLowerCase())return t}return null}},{key:"validateTextField",value:function(e){return null!==e&&0!==e.length}},{key:"validateEmailField",value:function(e){var t=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/;return!!e.match(t)}},{key:"validatePhoneNumber",value:function(e){return new RegExp("((\\(\\d{3,4}\\)( )?)|\\d{3,4}( )?)?[- ./]?( )?\\d{3,4}?( )?[- ./]?( )?\\d{3,4}?( )?$").test(e)}},{key:"toggleAddress",value:function(e){var t=$(this.sel.countryselect).val(),n=$("option",this.sel.countryselect),i=!0;n.each(function(e,n){$(n).attr("value")===t&&""+$(n).data("nonmandatory")=="true"&&(i=!1)}),i?($("#shipnow_address",this.sel.form).attr("required","required").attr("placeholder","Address*"),$("#shipnow_zip",this.sel.form).attr("required","required").attr("placeholder","ZIP or Postcode*"),$("#shipnow_city",this.sel.form).attr("required","required").attr("placeholder","City*")):($("#shipnow_address",this.sel.form).removeAttr("required").attr("placeholder","Address").removeClass("error").closest("div").find("label").remove(),$("#shipnow_zip",this.sel.form).removeAttr("required").attr("placeholder","ZIP or Postcode").removeClass("error").closest("div").find("label").remove(),$("#shipnow_city",this.sel.form).removeAttr("required").attr("placeholder","City").removeClass("error").closest("div").find("label").remove())}},{key:"submitForm",value:function(e){var t=this;if(e.preventDefault(),this.validate()){var n=$(e.target),i=this.getFormData(n);$.post(this.getPathPrefix()+n.attr("action"),i,function(e){"OK"===e.status?t.showSuccess():t.showError(e.fields)})}return!1}},{key:"getFormData",value:function(e){var t=e.serializeArray(),n={};return $.map(t,function(e){return n[e.name]=e.value}),n.source=$.trim(e.data("source")),n.lo=$.trim(e.data("lo")),n}},{key:"showSuccess",value:function(){window.location=$(this.sel.form).data("thanks")}},{key:"showError",value:function(e){if(Array.isArray(e)){var t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value,a=s.field,l="shipnow_"+this.getFirstWord(a),c=document.getElementById(l);c&&this.failValidation(c)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"getFirstWord",value:function(e){return e.split(" ")[0]}},{key:"init",value:function(){return!($(this.sel.form).length<=0)&&(this.registerEventListeners(),this.bindEvents(),!0)}},{key:"registerEventListeners",value:function(){var e=this,t=["shipnow_firstname","shipnow_lastname","shipnow_companyname","shipnow_phone","shipnow_address","shipnow_zip","shipnow_city","shipnow_email"],n=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)!function(){var t=r.value,n=document.getElementById(t);n&&n.addEventListener("blur",function(){e.validateField(n)})}()}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}}]),e}();n.default=new s},{}],29:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.firstname="",this.lastname="",this.email="",this.config={fbAppId:"1080031328801211",goClientId:"313469837420-l882h39ge8n8n9pb97ldvjk3fm8ppqgs.apps.googleusercontent.com"},this.sel={component:".shipNowMulti.wysiwyg, .animatedForm",swingbutton:".shipNowMulti__headcta--red",forms:"form.forms.ship-now-twostep",form1:"form.forms.form1.ship-now-twostep",form2:"form.forms.form2.ship-now-twostep",countryselect:"form.forms.form2.ship-now-twostep #shipnow_country",buttonFacebook:".forms__cta--social.facebook",buttonLinkedin:".forms__cta--social.linkedin",buttonGooglePlus:".forms__cta--social.google"},this.getPathPrefix=this.getPathPrefix.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.toggleAddress=this.toggleAddress.bind(this),this.submitFacebook=this.submitFacebook.bind(this),this.submitLinkedin=this.submitLinkedin.bind(this),this.submitGoogle=this.submitGoogle.bind(this),this.submitForm1=this.submitForm1.bind(this),this.nextForm=this.nextForm.bind(this),this.submitForm2=this.submitForm2.bind(this),this.getFormData=this.getFormData.bind(this),this.showSuccess=this.showSuccess.bind(this),this.validate=this.validate.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"bindEvents",value:function(){var e=this;$(document).on("submit",this.sel.form1,this.submitForm1),$(document).on("submit",this.sel.form2,this.submitForm2),$(document).on("change",this.sel.countryselect,this.toggleAddress);var t=$(this.sel.form2).data("preselectcountry");if(null!==t&&$.trim(t).length>0&&$(this.sel.countryselect).val(t).trigger("change"),$(this.sel.component).find(this.sel.buttonFacebook).length>0){if(window.fbAsyncInit=function(){window.fb_interval=setInterval(function(){void 0!==window.FB&&null!==window.FB&&(window.FB.init({appId:e.config.fbAppId,cookie:!0,xfbml:!0,version:"v2.8"}),clearInterval(window.fb_interval))},100)},null===document.getElementById("facebook-jssdk")){var n=document.getElementsByTagName("script")[0],i=document.createElement("script");i.id="facebook-jssdk",i.src="//connect.facebook.net/en_EN/sdk.js",n.parentNode.insertBefore(i,n)}$(this.sel.component).find(this.sel.buttonFacebook).on("click",function(t){return e.submitFacebook(t),!1})}$(this.sel.component).find(this.sel.buttonLinkedin).length>0&&$(this.sel.component).find(this.sel.buttonLinkedin).on("click",function(t){return e.submitLinkedin(t),!1});var o=$(this.sel.component).find(this.sel.buttonGooglePlus);o.length>0&&(window.go_interval=setInterval(function(){void 0!==window.gapi&&null!==window.gapi&&(window.gapi.load("auth2",function(){var t=window.gapi.auth2.init({client_id:e.config.goClientId,cookiepolicy:"single_host_origin"}),n=o.get(0);t.attachClickHandler(n,{},function(t){return e.submitGoogle(t),!1},function(e){"popup_closed_by_user"!==e.error&&alert(e.error)})}),clearInterval(window.go_interval))},100),$(this.sel.component).find(this.sel.buttonGooglePlus).on("click",function(e){return e.preventDefault(),!1})),$(document).on("click",this.sel.swingbutton,function(e){var t=$(e.currentTarget).attr("href"),n=$(t).offset().top;return $("html, body").animate({scrollTop:n},1e3,"swing"),!1})}},{key:"validate",value:function(){$(this.sel.forms).each(function(e,t){$(t).validate({errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):t.is("select")?(e.insertAfter(t),t.parent().find(".selectboxit-btn").addClass("error")):e.insertAfter(t)},success:function(e){var t=$(e).parents("form.ship-now");t.find("select").length>0&&t.find(".selectboxit-btn").removeClass("error")}})})}},{key:"toggleAddress",value:function(e){var t=$(this.sel.countryselect).val(),n=$("option",this.sel.countryselect),i=!0;n.each(function(e,n){$(n).attr("value")===t&&""+$(n).data("nonmandatory")=="true"&&(i=!1)}),i?($("#shipnow_address",this.sel.form).attr("required","required").attr("placeholder","Address*"),$("#shipnow_zip",this.sel.form).attr("required","required").attr("placeholder","ZIP or Postcode*"),$("#shipnow_city",this.sel.form).attr("required","required").attr("placeholder","City*")):($("#shipnow_address",this.sel.form).removeAttr("required").attr("placeholder","Address").removeClass("error").closest("div").find("label").remove(),$("#shipnow_zip",this.sel.form).removeAttr("required").attr("placeholder","ZIP or Postcode").removeClass("error").closest("div").find("label").remove(),$("#shipnow_city",this.sel.form).removeAttr("required").attr("placeholder","City").removeClass("error").closest("div").find("label").remove())}},{key:"submitFacebook",value:function(e){var t=this;e.preventDefault(),window.FB.login(function(e){return e.authResponse&&window.FB.api("/me",function(e){t.firstname=e.first_name,t.lastname=e.last_name,t.email=e.email,t.nextForm()},{fields:["id","email","first_name","last_name"]}),!1},{scope:"email,public_profile",return_scopes:!0})}},{key:"submitLinkedin",value:function(e){var t=this;return e.preventDefault(),IN.User.authorize(function(){IN.API.Profile("me").fields("id","first-name","last-name","email-address").result(function(e){var n=e.values[0];t.firstname=n.firstName,t.lastname=n.lastName,t.email=n.emailAddress,t.nextForm()})}),setInterval(function(){window.IN.User.isAuthorized()&&IN.API.Profile("me").fields("id","first-name","last-name","email-address").result(function(e){var n=e.values[0];t.firstname=n.firstName,t.lastname=n.lastName,t.email=n.emailAddress,t.nextForm()})},1e3),!1}},{key:"submitGoogle",value:function(e){var t=e.getBasicProfile();this.firstname=t.getGivenName(),this.lastname=t.getFamilyName(),this.email=t.getEmail(),this.nextForm()}},{key:"submitForm1",value:function(e){e.preventDefault();var t=$(e.target),n=this.getFormData(t);this.firstname=n.firstname,this.lastname=n.lastname,this.email=n.email,this.nextForm()}},{key:"nextForm",value:function(){$(".shipNowMulti__formstep--step1",this.sel.component).hide(),$(".shipNowMulti__formstep--step2",this.sel.component).show(),$(this.sel.component).addClass("active")}},{key:"submitForm2",value:function(e){var t=this;e.preventDefault();var n=$(e.target),i=this.getFormData(n);i.firstname=this.firstname,i.lastname=this.lastname,i.email=this.email,$.post(this.getPathPrefix()+n.attr("action"),i,function(e){"OK"===e.status?t.showSuccess():alert("An error occurred. Please try again later.")})}},{key:"getFormData",value:function(e){var t=e.serializeArray(),n={};return $.map(t,function(e){return n[e.name]=e.value}),n.source=$.trim(e.data("source")),n.lo=$.trim(e.data("lo")),n}},{key:"showSuccess",value:function(){var e=$(".shipNowMulti__formstep--step2",this.sel.component).data("thanks");null!==e&&e.length>0?window.location=e:($(".shipNowMulti__formstep--step2",this.sel.component).hide(),$(".shipNowMulti__formstep--thanks",this.sel.component).show())}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),this.validate(),!0)}}]),e}();n.default=new r},{}],30:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:"[data-show-hide-id]",toggle:"[data-show-hide-target]"},this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this)}return o(e,[{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){$(document).on("click",this.sel.toggle,function(e){var t=$(e.target).attr("data-show-hide-target");$("[data-show-hide-id="+t+"]").slideToggle()})}}]),e}();n.default=new r},{}],31:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".social"},this.bindEvents=this.bindEvents.bind(this),this.containerTop=this.containerTop.bind(this),this.handleScroll=this.handleScroll.bind(this),this.checkSharePos=this.checkSharePos.bind(this),this.debounce=this.debounce.bind(this),this.init=this.init.bind(this)}return o(e,[{key:"bindEvents",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"containerTop",value:function(){return $(this.sel.component).parent().position().top}},{key:"handleScroll",value:function(){if(window.innerWidth>=992){var e=$(window).scrollTop(),t=this.containerTop()+$(this.sel.component).parent().height()-$(this.sel.component).outerHeight()-60;e>=this.containerTop()&&e<t&&!$(this.sel.component).hasClass("social--affix")?$(this.sel.component).addClass("social--affix").css({left:this.getLeftOffset($(this.sel.component)),top:""}):e<this.containerTop()&&$(this.sel.component).hasClass("social--affix")?$(this.sel.component).removeClass("social--affix").css({left:"",top:""}):e>=t&&$(this.sel.component).hasClass("social--affix")&&$(this.sel.component).removeClass("social--affix").css({left:"",top:this.getTopOffset()})}}},{key:"getLeftOffset",value:function(e){return parseInt(e.parent().offset().left,10)+parseInt(e.offset().left,10)}},{key:"getTopOffset",value:function(){var e=this.containerTop();return $(window).scrollTop()-e+50}},{key:"checkSharePos",value:function(){$(".social--vertical.social--affix").length&&$(".social--vertical.social--affix").removeAttr("style").removeClass("social--affix")}},{key:"debounce",value:function(e,t,n){var i;return function(){var o=this,r=arguments,s=function(){i=null,n||e.apply(o,r)},a=n&&!i;clearTimeout(i),i=setTimeout(s,t),a&&e.apply(o,r)}}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),window.addEventListener("resize",this.debounce(this.checkSharePos,100)),!0)}}]),e}();n.default=new r},{}],32:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.sel={component:".subscribePanel",form:".subscribePanel__form",successOverlay:".subscribePanel__responseOverlay.success",errorOverlay:".subscribePanel__responseOverlay.error"},this.getPathPrefix=this.getPathPrefix.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.submitForm=this.submitForm.bind(this),this.getFormData=this.getFormData.bind(this),this.showSuccess=this.showSuccess.bind(this),this.showError=this.showError.bind(this),this.validate=this.validate.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"bindEvents",value:function(){$(document).on("submit",this.sel.form,this.submitForm)}},{key:"validate",value:function(){$(this.sel.form).each(function(e,t){$(t).validate({errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):t.is("select")?(e.insertAfter(t.parent()),t.parent().find(".selectboxit-btn").addClass("error")):e.insertAfter(t)},success:function(e){var t=$(e).parents(".subscribe__formField");t.find("select").length>0&&t.find(".selectboxit-btn").removeClass("error")}})})}},{key:"submitForm",value:function(e){var t=this;e.preventDefault();var n=$(e.target),i=this.getFormData(n);$.post(this.getPathPrefix()+n.attr("action"),i,function(e){"OK"===e.status?t.showSuccess():t.showError()})}},{key:"getFormData",value:function(e){var t=e.serializeArray(),n={};return $.map(t,function(e){return n[e.name]=e.value}),n}},{key:"showSuccess",value:function(){$(this.sel.successOverlay).addClass("subscribePanel__responseOverlay--show")}},{key:"showError",value:function(){$(this.sel.errorOverlay).addClass("subscribePanel__responseOverlay--show")}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),this.validate(),!0)}}]),e}();n.default=new r},{}],33:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){i(this,e),this.text=t,this.duration=n,this.id="_"+Math.random().toString(36).substr(2,9),this.setText=this.setText.bind(this),this.setDuration=this.setDuration.bind(this),this.show=this.show.bind(this);var o=document.createElement("div");o.setAttribute("id",this.id),o.setAttribute("class","toast");var r=document.createElement("div");r.setAttribute("class","inner"),r.innerText=this.text,o.appendChild(r),document.body.appendChild(o),this.$toast=$("#"+this.id)}return o(e,[{key:"setText",value:function(e){this.text=e,this.$toast.find(".inner").text(this.text)}},{key:"setDuration",value:function(e){this.duration=e}},{key:"show",value:function(){var e=this;this.$toast.addClass("show"),setTimeout(function(){e.$toast.removeClass("show")},this.duration)}}]),e}();n.default=r},{}],34:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.config={urlToken:"/libs/granite/csrf/token.json",urlRefreshCheck:"/apps/dhl/discoverdhlapi/refresh_token/index.json",urlGetAllDetails:"/apps/dhl/discoverdhlapi/getdetails/index.json",urlUpdateDetails:"/apps/dhl/discoverdhlapi/update_details/index.json"},this.sel={component:".standardContent.user-account, .page-body.user-account"},this.getPathPrefix=this.getPathPrefix.bind(this),this.getPathHome=this.getPathHome.bind(this),this.init=this.init.bind(this),this.bindEvents=this.bindEvents.bind(this),this.readCookie=this.readCookie.bind(this),this.tryUpdateDetails=this.tryUpdateDetails.bind(this),this.completeUpdateDetails=this.completeUpdateDetails.bind(this),this.loggedIn=this.loggedIn.bind(this),this.notLoggedIn=this.notLoggedIn.bind(this)}return o(e,[{key:"getPathPrefix",value:function(){var e=$("head meta[name='dhl-path-prefix']").attr("content");return e||""}},{key:"getPathHome",value:function(){var e=$("head meta[name='dhl-path-home']").attr("content");return e||""}},{key:"init",value:function(){return!($(this.sel.component).length<=0)&&(this.bindEvents(),!0)}},{key:"bindEvents",value:function(){var e=this;$(window).on("userloggedin.DHL",function(t,n){e.loggedIn(n)}),$(window).on("usernotloggedin.DHL",function(){e.notLoggedIn()});var t=$(this.sel.component).find("form");t.length>0&&(jQuery.validator.addMethod("myAccountCurrentPassword",function(e,t){var n=$(t).parents("form"),i=n.find(".useraccount-currentpassword"),o=n.find('input[name="myAccount__newPassword"]'),r=n.find('input[name="myAccount__confirmPassword"]');return""===o.val()&&""===r.val()||i.is(":visible")&&""!==$(t).val()},"You must enter your current password"),jQuery.validator.addMethod("myAccountPassword",function(e,t){return""===$(t).val()||new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[_\W])[A-Za-z\d_\W]{8,}$/).test(e)},"Password format is not valid"),jQuery.validator.addMethod("myAccountEqualTo",function(e,t){return $("#"+$(t).attr("data-equalTo")).val()===$(t).val()},"Passwords do not match"),t.validate({rules:{myAccount__currentPassword:"myAccountCurrentPassword",myAccount__newPassword:"myAccountPassword",myAccount__confirmPassword:"myAccountEqualTo"},errorPlacement:function(e,t){"checkbox"===t.attr("type")?e.insertAfter($(t).parent().find("label")):"password"===t.attr("type")?($(t).append(e),e.insertAfter($(t).parent())):"search"===t.attr("type")?e.insertAfter($(t).parent()):e.insertAfter(t)},submitHandler:function(t){return e.tryUpdateDetails(t),!1}}))}},{key:"readCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}},{key:"tryUpdateDetails",value:function(e){var t=this,n=$(e);n.find("input.forms__cta--red").val("please wait..."),n.find("button[type='submit']").text("please wait...");var i=this.readCookie("DHL.AuthToken");if(null!==i){var o=i.split("|");o.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(n){var i=n.token;$.ajax({url:t.getPathPrefix()+t.config.urlGetAllDetails,data:{username:o[0],token:o[1]},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(n){n?"ok"===n.status?($(window).trigger("checkauthtokens.DHL",[n,!0]),t.completeUpdateDetails(e,n)):alert("An unknown error occurred while attempting to update your details (1). Please try again later"):alert("An unknown error occurred while attempting to update your details (2). Please try again later")}})}):alert("An unknown error occurred while attempting to update your details (3). Please try again later")}else{var r=this.readCookie("DHL.RefreshToken");if(null!==r){var s=r.split("|");s.length>=2?$.get(this.getPathPrefix()+this.config.urlToken,function(n){var i=n.token;$.ajax({url:t.getPathPrefix()+t.config.urlRefreshCheck,data:{username:s[0],refresh_token:s[1]},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(n){n?"ok"===n.status?($(window).trigger("checkauthtokens.DHL",[n,!0]),t.tryUpdateDetails(e)):alert("An unknown error occurred while attempting to update your details (4). Please try again later"):alert("An unknown error occurred while attempting to update your details (5). Please try again later")}})}):alert("An unknown error occurred while attempting to update your details (6). Please try again later")}else alert("An unknown error occurred while attempting to enter the competition. Please try again later")}}},{key:"completeUpdateDetails",value:function(e,t){var n=this,i=$(e),o=i.find("input#myAccount__email").val();o.trim()===t.registration_email&&(o="");var r="";i.find("#glb-youraccount-categories input:checked").each(function(e,t){r.length>0&&(r+=","),r+=$(t).val()});var s={token:t.token,firstname:i.find("input#myAccount__firstName").val(),lastname:i.find("input#myAccount__lastName").val(),username:t.registration_email,newusername:o,password:i.find("input#myAccount__currentPassword").val(),newpassword:i.find("input#myAccount__newPassword").val(),position:i.find("input#myAccount__position").val(),contact:i.find("input#myAccount__phoneNumber").val(),size:i.find("select#myAccount__businessSize").val(),sector:i.find("select#myAccount__businessSector").val(),tcagree:i.find("input#checkboxIdTCMessage").is(":checked"),cats:r};0===$.trim(s.firstname).length||0===$.trim(s.lastname).length||0===$.trim(s.username).length?alert("Please enter your name, email address and personal details."):(i.find("button[type='submit'].update-btn").text("please wait..."),i.find("input.forms__cta--red").val("please wait..."),$.get(this.getPathPrefix()+this.config.urlToken,function(e){var t=e.token;$.ajax({url:n.getPathPrefix()+n.config.urlUpdateDetails,data:s,type:"post",headers:{"CSRF-Token":t},dataType:"json",success:function(e){e?($(window).trigger("checkauthtokens.DHL",[e,!0]),"ok"===e.status?(i.find(".myAccount__message").show(),s.newpassword.length>0&&(i.find("input#myAccount__email").removeAttr("readonly"),i.find(".useraccount-currentpassword").show()),i.find("input#myAccount__currentPassword").val(""),i.find("input#myAccount__newPassword").val(""),i.find("input#myAccount__confirmPassword").val(""),$("header .header__auth--loggedin .user-firstname").text(s.firstname),$(".competitionDataCapture.logged-in .loggedin-name").text(s.firstname),$(window).scrollTop(0)):alert("An error occurred while attempting to update your details.\n"+e.error)):alert("An unknown error occurred while attempting to update your details. Please try again later"),i.find("button[type='submit'].update-btn").text("Update"),i.find("input.forms__cta--red").val("Update")}})})),i.find("button[type='submit'].update-btn").text("Update"),i.find("input.forms__cta--red").val("Update")}},{key:"loggedIn",value:function(e){var t=this;e&&e.status&&"ok"===e.status&&$.get(this.getPathPrefix()+this.config.urlToken,function(n){var i=n.token;$.ajax({url:t.getPathPrefix()+t.config.urlGetAllDetails,data:{username:e.username,token:e.token},type:"post",headers:{"CSRF-Token":i},dataType:"json",success:function(e){if(e)if("ok"===e.status){var n=$(t.sel.component);$(window).trigger("checkauthtokens.DHL",[e,!0]),n.find(".loggedin-username").text(e.registration_firstname),n.find("input#myAccount__firstName").val(e.registration_firstname),n.find("input#myAccount__lastName").val(e.registration_lastname),n.find("input#myAccount__email").val(e.registration_email),n.find("input#myAccount__position").val(e.registration_position),n.find("input#myAccount__phoneNumber").val(e.registration_contact),n.find("select#myAccount__businessSize").val(e.registration_size),n.find("select#myAccount__businessSector").val(e.registration_sector),"true"===e.registration_tcagree?n.find("input#checkboxIdTCMessage").prop("checked",!0):n.find("input#checkboxIdTCMessage").prop("checked",!1),n.find('#glb-youraccount-categories input[type="checkbox"]').prop("checked",!1);for(var i=e.registration_cats.split(","),o=0;o<i.length;o++)n.find('#glb-youraccount-categories input[type="checkbox"][value="'+i[o]+'"]').prop("checked",!0);"false"===e.registration_islinkedin?!1!==e.full&&n.find(".useraccount-currentpassword").show():n.find("input#myAccount__email").attr("readonly","readonly"),n.closest(".page-body-wrapper").removeClass("awaiting"),n.show()}else alert("An unknown error occurred while attempting to display your details. Please try again later");else alert("An unknown error occurred while attempting to display your details. Please try again later")}})})}},{key:"notLoggedIn",value:function(){$(this.sel.component).hasClass("no-redirect")?$(this.sel.component).show():window.location=this.getPathHome()+".html"}}]),e}();n.default=new r},{}],35:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=e("./Components/Header"),r=i(o),s=e("./Components/BootstrapCarousel"),a=i(s),l=e("./Components/ArticleGrid"),c=i(l),u=e("./Components/SubscribePanel"),d=i(u),h=e("./Components/Password"),f=i(h),m=e("./Components/PasswordValidity"),p=i(m),g=e("./Components/FormValidation"),v=(i(g),e("./Components/ShowHide")),b=i(v),k=e("./Components/CookieBanner"),y=i(k),w=e("./Components/SearchForm"),_=i(w),C=e("./Components/EcomForms"),P=i(C),x=e("./Components/ShipForm"),A=i(x),S=e("./Components/IEDetector"),T=i(S),E=e("./Components/Social"),L=i(E),F=e("./Components/Hero"),I=i(F),D=e("./Components/AuthenticationEvents"),j=i(D),O=e("./Components/DeleteAccountForm"),H=i(O),R=e("./Components/LoginForm"),M=i(R),N=e("./Components/PasswordReminderForm"),B=i(N),q=e("./Components/RegisterForm"),G=i(q),V=e("./Components/YourAccountForm"),U=i(V),z=e("./Components/ShipNowForm"),Q=i(z),W=e("./Components/ShipNowTwoStepForm"),Z=i(W),K=e("./Components/CompetitionForm"),Y=i(K),J=e("./Components/ServiceWorker"),X=i(J),ee=e("./Components/Offline"),te=i(ee),ne=e("./Components/LandingPoints"),ie=i(ne),oe=e("./Components/BackButton"),re=i(oe),se=e("./Components/ArticleCounter"),ae=(i(se),e("./Components/MarketoForm")),le=i(ae),ce=e("./Components/LanguageDetect"),ue=i(ce);$(document).ready(function(){try{document.createEvent("TouchEvent"),$("body").addClass("touch")}catch(e){}(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&$("html").addClass("pwa"),ue.default.init(),T.default.init(),r.default.init(),a.default.init(),c.default.init(),d.default.init(),f.default.init(),p.default.init(),b.default.init(),y.default.init(),_.default.init(),P.default.init(),A.default.init(),L.default.init(),I.default.init(),Y.default.init(),Q.default.init(),Z.default.init(),U.default.init(),G.default.init(),B.default.init(),M.default.init(),H.default.init(),j.default.init(),X.default.init(),te.default.init(),ie.default.init(),re.default.init(),le.default.init()})},{"./Components/ArticleCounter":1,"./Components/ArticleGrid":2,"./Components/AuthenticationEvents":3,"./Components/BackButton":4,"./Components/BootstrapCarousel":5,"./Components/CompetitionForm":6,"./Components/CookieBanner":8,"./Components/DeleteAccountForm":10,"./Components/EcomForms":11,"./Components/FormValidation":12,"./Components/Header":13,"./Components/Hero":14,"./Components/IEDetector":15,"./Components/LandingPoints":16,"./Components/LanguageDetect":17,"./Components/LoginForm":18,"./Components/MarketoForm":19,"./Components/Offline":20,"./Components/Password":21,"./Components/PasswordReminderForm":22,"./Components/PasswordValidity":23,"./Components/RegisterForm":24,"./Components/SearchForm":25,"./Components/ServiceWorker":26,"./Components/ShipForm":27,"./Components/ShipNowForm":28,"./Components/ShipNowTwoStepForm":29,"./Components/ShowHide":30,"./Components/Social":31,"./Components/SubscribePanel":32,"./Components/YourAccountForm":34}]},{},[35]);